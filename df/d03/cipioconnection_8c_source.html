<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>OpENer - Open Source EtherNet/IP(TM)  I/O Target Stack: src/cip/cipioconnection.c Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">OpENer - Open Source EtherNet/IP(TM)  I/O Target Stack
   &#160;<span id="projectnumber">1.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('df/d03/cipioconnection_8c_source.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">cipioconnection.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../df/d03/cipioconnection_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*******************************************************************************</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Copyright (c) 2011, Rockwell Automation, Inc.</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * All rights reserved.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> ******************************************************************************/</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../de/d45/cipioconnection_8h.html">cipioconnection.h</a>&quot;</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d2/da3/cipconnectionmanager_8h.html">cipconnectionmanager.h</a>&quot;</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../de/df4/cipassembly_8h.html">cipassembly.h</a>&quot;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d1/dad/ciptcpipinterface_8h.html">ciptcpipinterface.h</a>&quot;</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/d14/cipcommon_8h.html">cipcommon.h</a>&quot;</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d1/dc0/appcontype_8h.html">appcontype.h</a>&quot;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d0/dff/cpf_8h.html">cpf.h</a>&quot;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d1/d1b/trace_8h.html">trace.h</a>&quot;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d0/dec/endianconv_8h.html">endianconv.h</a>&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">/*The port to be used per default for I/O messages on UDP.*/</span></div>
<div class="line"><a name="l00018"></a><span class="lineno"><a class="line" href="../../df/d03/cipioconnection_8c.html#a190a0e08c9d8f31cf09442fdb3c3671b">   18</a></span>&#160;<span class="preprocessor">#define OPENER_EIP_IO_UDP_PORT   0x08AE</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">/* producing multicast connection have to consider the rules that apply for</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> * application connection types.</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<a class="code" href="../../d7/d69/typedefs_8h.html#adf0533b554c6a20e73928f231e5286d9">EIP_STATUS</a></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<a class="code" href="../../df/d03/cipioconnection_8c.html#a7e4d255d4b152b39dc1e9678094685f9">openProducingMulticastConnection</a>(<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html">S_CIP_ConnectionObject</a> *pa_pstConnObj,</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;    <a class="code" href="../../de/d1c/structS__CIP__CPF__Data.html">S_CIP_CPF_Data</a> *pa_CPF_data);</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<a class="code" href="../../d7/d69/typedefs_8h.html#adf0533b554c6a20e73928f231e5286d9">EIP_STATUS</a></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<a class="code" href="../../df/d03/cipioconnection_8c.html#a082f6fee564e932e77a812908de1c3ce">OpenMulticastConnection</a>(<span class="keywordtype">int</span> pa_direction, <a class="code" href="../../d9/db7/structCIP__ConnectionObject.html">S_CIP_ConnectionObject</a> *pa_pstConnObj,</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    <a class="code" href="../../de/d1c/structS__CIP__CPF__Data.html">S_CIP_CPF_Data</a> *pa_CPF_data);</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<a class="code" href="../../d7/d69/typedefs_8h.html#adf0533b554c6a20e73928f231e5286d9">EIP_STATUS</a></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<a class="code" href="../../df/d03/cipioconnection_8c.html#a5528cb41b78cd5f5641a3666dcc1177d">OpenConsumingPointToPointConnection</a>(<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html">S_CIP_ConnectionObject</a> *pa_pstConnObj,</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    <a class="code" href="../../de/d1c/structS__CIP__CPF__Data.html">S_CIP_CPF_Data</a> *pa_CPF_data);</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="keywordtype">int</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<a class="code" href="../../df/d03/cipioconnection_8c.html#a309b521bf439ca702ce2895e0a4390c5">OpenProducingPointToPointConnection</a>(<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html">S_CIP_ConnectionObject</a> *pa_pstConnObj,</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <a class="code" href="../../de/d1c/structS__CIP__CPF__Data.html">S_CIP_CPF_Data</a> *pa_CPF_data);</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<a class="code" href="../../d7/d69/typedefs_8h.html#a72b3e7231681538d97279aa001872297">EIP_UINT16</a></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<a class="code" href="../../df/d03/cipioconnection_8c.html#a9243c246dc6021572d661b9b923a6b7a">handleConfigData</a>(<a class="code" href="../../d5/de9/structCIP__Class.html">S_CIP_Class</a> *pa_pstAssemblyClass,</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <a class="code" href="../../d9/db7/structCIP__ConnectionObject.html">S_CIP_ConnectionObject</a> *pa_pstIOConnObj);</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">/* Regularly close the IO connection. If it is an exclusive owner or input only</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment"> * connection and in charge of the connection a new owner will be searched</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="keywordtype">void</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<a class="code" href="../../df/d03/cipioconnection_8c.html#a2b592280d464553c451f653c1a45a052">closeIOConnection</a>(<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html">S_CIP_ConnectionObject</a> *pa_pstConnObjData);</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="keywordtype">void</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<a class="code" href="../../df/d03/cipioconnection_8c.html#aca969065c50443a0e464dbe318de06d4">handleIOConnectionTimeOut</a>(<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html">S_CIP_ConnectionObject</a> *pa_pstConn);</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<a class="code" href="../../d7/d69/typedefs_8h.html#adf0533b554c6a20e73928f231e5286d9">EIP_STATUS</a></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<a class="code" href="../../df/d03/cipioconnection_8c.html#a93b2d7ce5fd9c7bf5583f738e09bd914">sendConnectedData</a>(<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html">S_CIP_ConnectionObject</a> *pa_pstConnection);</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<a class="code" href="../../d7/d69/typedefs_8h.html#adf0533b554c6a20e73928f231e5286d9">EIP_STATUS</a></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<a class="code" href="../../df/d03/cipioconnection_8c.html#a0a63c015bc216d71e9cb1781472ce8df">handleReceivedIOConnData</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/db7/structCIP__ConnectionObject.html">CIP_ConnectionObject</a> *pa_pstConnection,</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <a class="code" href="../../d7/d69/typedefs_8h.html#a811fdad4b361d09293f3bd0b814b8e18">EIP_UINT8</a> * pa_pnData, <a class="code" href="../../d7/d69/typedefs_8h.html#a72b3e7231681538d97279aa001872297">EIP_UINT16</a> pa_nDataLength);</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">/**** Global variables ****/</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment">/* buffers for the config data coming with a forward open request.</span></div>
<div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="../../de/d45/cipioconnection_8h.html#a8160f1516e9aa813509d35f4e9ba8971">   65</a></span>&#160;<span class="comment"> */</span><a class="code" href="../../d7/d69/typedefs_8h.html#a811fdad4b361d09293f3bd0b814b8e18">EIP_UINT8</a> *<a class="code" href="../../df/d03/cipioconnection_8c.html#a8160f1516e9aa813509d35f4e9ba8971">g_pnConfigDataBuffer</a> = NULL;</div>
<div class="line"><a name="l00066"></a><span class="lineno"><a class="line" href="../../de/d45/cipioconnection_8h.html#a5c06aee6a78fae0cf97177e187dac727">   66</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d03/cipioconnection_8c.html#a5c06aee6a78fae0cf97177e187dac727">g_unConfigDataLen</a> = 0;<a class="code" href="../../d7/d69/typedefs_8h.html#a4f1d71ddb23827c1af144276d0dd1947">EIP_UINT32</a> <a class="code" href="../../df/d03/cipioconnection_8c.html#a48ed327ec7ab3a482159eaa61b8d0a1b">g_nRunIdleState</a>;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">/**** Implementation ****/</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="keywordtype">int</span></div>
<div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="../../de/d45/cipioconnection_8h.html#ae83037a608b08d325fc34869395f37a3">   72</a></span>&#160;<a class="code" href="../../df/d03/cipioconnection_8c.html#ae83037a608b08d325fc34869395f37a3">establishIOConnction</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/db7/structCIP__ConnectionObject.html">CIP_ConnectionObject</a> *pa_pstConnObjData,</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <a class="code" href="../../d7/d69/typedefs_8h.html#a72b3e7231681538d97279aa001872297">EIP_UINT16</a> *pa_pnExtendedError)</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;{</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  <span class="keywordtype">int</span> O2TConnectionType, T2OConnectionType;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <span class="keywordtype">int</span> nRetVal = <a class="code" href="../../d7/d69/typedefs_8h.html#adf0533b554c6a20e73928f231e5286d9ac471acf92535c32126cd4d318f8175ef">EIP_OK</a>;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <a class="code" href="../../d9/d11/structCIPAttributeStruct.html">S_CIP_attribute_struct</a> *pstAttribute;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  <span class="comment">/* currently we allow I/O connections only to assembly objects */</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  <a class="code" href="../../d5/de9/structCIP__Class.html">S_CIP_Class</a> *pstAssemblyClass = <a class="code" href="../../d2/dc9/group__CIP__API.html#ga1db1e5dc1fc04ac40a02f4f4ca550aa1">getCIPClass</a>(<a class="code" href="../../de/df4/cipassembly_8h.html#aee29cb8987fb0ce48a7b616c796cec1e">CIP_ASSEMBLY_CLASS_CODE</a>); <span class="comment">/* we don&#39;t need to check for zero as this is handled in the connection path parsing */</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  <a class="code" href="../../db/db2/structCIP__Instance.html">S_CIP_Instance</a> *pstInstance = NULL;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <a class="code" href="../../d9/db7/structCIP__ConnectionObject.html">S_CIP_ConnectionObject</a> *pstIOConnObj = <a class="code" href="../../d1/dbc/appcontype_8c.html#a0022a3503684e42baf0820a85d2d67e4">getIOConnectionForConnectionData</a>(</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;      pa_pstConnObjData, pa_pnExtendedError);</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <span class="keywordflow">if</span> (NULL == pstIOConnObj)</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    {</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d6/d52/ciperror_8h.html#a4295b59f4098d9d45991b5cc0f2c6787">CIP_ERROR_CONNECTION_FAILURE</a>;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    }</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <span class="comment">//TODO add check for transport type trigger</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d2/da3/cipconnectionmanager_8h.html#a5868f1efb530265287d500beb2eff1a8">CIP_CONN_CYCLIC_CONNECTION</a></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;      != (pstIOConnObj-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#ac097ff6b38fea770e9838bc10a5338b6">TransportTypeClassTrigger</a></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;          &amp; <a class="code" href="../../d2/da3/cipconnectionmanager_8h.html#a96db92dd25483d5093f8494f249ce90e">CIP_CONN_PRODUCTION_TRIGGER_MASK</a>))</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    {</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;      <span class="keywordflow">if</span> (256 == pstIOConnObj-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a98c35ff88b613a54bbf58b15f20c435a">m_unProductionInhibitTime</a>)</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        {</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;          <span class="comment">/* there was no PIT segment in the connection path set PIT to one fourth of RPI */</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;          pstIOConnObj-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a98c35ff88b613a54bbf58b15f20c435a">m_unProductionInhibitTime</a> = ((<a class="code" href="../../d7/d69/typedefs_8h.html#a72b3e7231681538d97279aa001872297">EIP_UINT16</a>)(</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;              pstIOConnObj-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a57701730fe99c60a762996e52ea184b2">T_to_O_RPI</a>) / 4000);</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        }</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        {</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;          <span class="comment">/* if production inhibit time has been provided it needs to be smaller than the RPI */</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;          <span class="keywordflow">if</span> (pstIOConnObj-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a98c35ff88b613a54bbf58b15f20c435a">m_unProductionInhibitTime</a></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;              &gt; ((<a class="code" href="../../d7/d69/typedefs_8h.html#a72b3e7231681538d97279aa001872297">EIP_UINT16</a>)((pstIOConnObj-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a57701730fe99c60a762996e52ea184b2">T_to_O_RPI</a>) / 1000)))</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;            {</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;              <span class="comment">/* see section C-1.4.3.3 */</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;              *pa_pnExtendedError = 0x111;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;              <span class="keywordflow">return</span> 0x01;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;            }</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        }</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    }</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  <span class="comment">/* set the connection call backs */</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  pstIOConnObj-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a47205cc202e3206af76d2c8928151083">m_pfCloseFunc</a> = <a class="code" href="../../df/d03/cipioconnection_8c.html#a2b592280d464553c451f653c1a45a052">closeIOConnection</a>;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  pstIOConnObj-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a50bc2fe3601aac1722fc9971b02b10c1">m_pfTimeOutFunc</a> = <a class="code" href="../../df/d03/cipioconnection_8c.html#aca969065c50443a0e464dbe318de06d4">handleIOConnectionTimeOut</a>;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  pstIOConnObj-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a0615b54e87b0d5c1f39f9564b28bbb8e">m_pfSendDataFunc</a> = <a class="code" href="../../df/d03/cipioconnection_8c.html#a93b2d7ce5fd9c7bf5583f738e09bd914">sendConnectedData</a>;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  pstIOConnObj-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a49fc2f2e6538b00035d5a9325984c449">m_pfReceiveDataFunc</a> = <a class="code" href="../../df/d03/cipioconnection_8c.html#a0a63c015bc216d71e9cb1781472ce8df">handleReceivedIOConnData</a>;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <a class="code" href="../../d5/d35/cipconnectionmanager_8c.html#a74fd2281ed30366f9cab9bec24ce30fd">generalConnectionConfiguration</a>(pstIOConnObj);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  O2TConnectionType = (pstIOConnObj-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#afd5ab4965b04f8ae1198cb6aa89de99c">O_to_T_NetworkConnectionParameter</a> &amp; 0x6000)</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;      &gt;&gt; 13;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  T2OConnectionType = (pstIOConnObj-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#ace277030c34e65ce16258b37e2420ea9">T_to_O_NetworkConnectionParameter</a> &amp; 0x6000)</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;      &gt;&gt; 13;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  <span class="keywordflow">if</span> ((O2TConnectionType == 0) &amp;&amp; (T2OConnectionType == 0))</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    { <span class="comment">/* this indicates an re-configuration of the connection currently not supported and we should not come here as this is handled in the forwardopen function*/</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    }</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    {</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;      <span class="keywordtype">int</span> nProducingIndex = 0;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;      <span class="keywordtype">int</span> nDataSize;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;      <span class="keywordtype">int</span> nDiffSize;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;      <span class="keywordtype">int</span> nIsHeartbeat;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;      <span class="keywordflow">if</span> ((O2TConnectionType != 0) &amp;&amp; (T2OConnectionType != 0))</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        { <span class="comment">/* we have a producing and consuming connection*/</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;          nProducingIndex = 1;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        }</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;      pstIOConnObj-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#ad72e27b79af2051388b99f672b0ed79f">p_stConsumingInstance</a> = 0;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;      pstIOConnObj-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a618519669b983873ce454934c210b164">ConsumedConnectionPathLength</a> = 0;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;      pstIOConnObj-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#add228c9f3a98587ab9ce3e7f27d7ab0c">p_stProducingInstance</a> = 0;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      pstIOConnObj-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a07efec4e8e4d2663c603ef9ff9d80fa3">ProducedConnectionPathLength</a> = 0;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;      <span class="keywordflow">if</span> (O2TConnectionType != 0)</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        { <span class="comment">/*setup consumer side*/</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;          <span class="keywordflow">if</span> (0</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;              != (pstInstance = <a class="code" href="../../d2/dc9/group__CIP__API.html#ga9919da1c597955301da602a23a470801">getCIPInstance</a>(pstAssemblyClass,</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                  pstIOConnObj-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#af5773a8cf15183ed7ae09160813452a6">ConnectionPath</a>.<a class="code" href="../../df/dff/structCIPConnectionPath.html#a5d8a3709c9aa5edd081863163c93b8bf">ConnectionPoint</a>[0])))</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;            { <span class="comment">/* consuming Connection Point is present */</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;              pstIOConnObj-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#ad72e27b79af2051388b99f672b0ed79f">p_stConsumingInstance</a> = pstInstance;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;              pstIOConnObj-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a618519669b983873ce454934c210b164">ConsumedConnectionPathLength</a> = 6;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;              pstIOConnObj-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#ab1a13d14d8f735d9815d71bbb1e07ac0">ConsumedConnectionPath</a>.<a class="code" href="../../dd/d36/structCIPEPath.html#ae2a8365173b69a9c79dce52202bccf55">PathSize</a> = 6;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;              pstIOConnObj-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#ab1a13d14d8f735d9815d71bbb1e07ac0">ConsumedConnectionPath</a>.<a class="code" href="../../dd/d36/structCIPEPath.html#a283bb751946332440cfe18ec7d649baa">ClassID</a> =</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                  pstIOConnObj-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#af5773a8cf15183ed7ae09160813452a6">ConnectionPath</a>.<a class="code" href="../../df/dff/structCIPConnectionPath.html#ac13dcf2b5048fee0e4f1aff464efe8c7">ClassID</a>;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;              pstIOConnObj-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#ab1a13d14d8f735d9815d71bbb1e07ac0">ConsumedConnectionPath</a>.<a class="code" href="../../dd/d36/structCIPEPath.html#a3696a7dfb960fc5ecf75712d0e1cdee7">InstanceNr</a> =</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                  pstIOConnObj-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#af5773a8cf15183ed7ae09160813452a6">ConnectionPath</a>.<a class="code" href="../../df/dff/structCIPConnectionPath.html#a5d8a3709c9aa5edd081863163c93b8bf">ConnectionPoint</a>[0];</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;              pstIOConnObj-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#ab1a13d14d8f735d9815d71bbb1e07ac0">ConsumedConnectionPath</a>.<a class="code" href="../../dd/d36/structCIPEPath.html#aa8e2ce7e76a7fbaf88b7c31c98a380b8">AttributNr</a> = 3;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;              pstAttribute = <a class="code" href="../../d2/dc9/group__CIP__API.html#ga33fda1920669c922471cb6218c8b22b8">getAttribute</a>(pstInstance, 3);</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;              <a class="code" href="../../dc/d75/LM3S8962_2sample__application_2opener__user__conf_8h.html#a7b5e7d71f666ba97788b35be1617c40a">OPENER_ASSERT</a>(pstAttribute != NULL);</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;              <span class="comment">/* an assembly object should always have an attribute 3 */</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;              nDataSize = pstIOConnObj-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a87fbd6d4b13419ce86e0f40d37a2bdf9">ConsumedConnectionSize</a>;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;              nDiffSize = 0;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;              nIsHeartbeat = (((<a class="code" href="../../d7/d0b/structCIPByteArray.html">S_CIP_Byte_Array</a> *) pstAttribute-&gt;<a class="code" href="../../d9/d11/structCIPAttributeStruct.html#a19855fbf02dc9275a76a9b9b6e2ca36f">pt2data</a>)-&gt;Length == 0);</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;              <span class="keywordflow">if</span> ((pstIOConnObj-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#ac097ff6b38fea770e9838bc10a5338b6">TransportTypeClassTrigger</a> &amp; 0x0F) == 1)</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                {</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;                  <span class="comment">/* class 1 connection */</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                  nDataSize -= 2; <span class="comment">/* remove 16-bit sequence count length */</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                  nDiffSize += 2;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                }</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;              <span class="keywordflow">if</span> ((<a class="code" href="../../dc/d75/LM3S8962_2sample__application_2opener__user__conf_8h.html#a84bdbf10caa9e750b3746d5f20e1845f">OPENER_CONSUMED_DATA_HAS_RUN_IDLE_HEADER</a>) &amp;&amp; (nDataSize &gt; 0) &amp;&amp; (!nIsHeartbeat))</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                { <span class="comment">/* we only have an run idle header if it is not an heartbeat connection */</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                  nDataSize -= 4; <span class="comment">/* remove the 4 bytes needed for run/idle header */</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                  nDiffSize += 4;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                }</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;              <span class="keywordflow">if</span> (((<a class="code" href="../../d7/d0b/structCIPByteArray.html">S_CIP_Byte_Array</a> *) pstAttribute-&gt;<a class="code" href="../../d9/d11/structCIPAttributeStruct.html#a19855fbf02dc9275a76a9b9b6e2ca36f">pt2data</a>)-&gt;Length</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                  != nDataSize)</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                {</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                  <span class="comment">/*wrong connection size */</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                  pa_pstConnObjData-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a584fbd0d043ac2fc7a126a7965b449ad">CorrectOTSize</a> = ((<a class="code" href="../../d7/d0b/structCIPByteArray.html">S_CIP_Byte_Array</a> *) pstAttribute-&gt;<a class="code" href="../../d9/d11/structCIPAttributeStruct.html#a19855fbf02dc9275a76a9b9b6e2ca36f">pt2data</a>)-&gt;Length + nDiffSize;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                  *pa_pnExtendedError = <a class="code" href="../../d2/da3/cipconnectionmanager_8h.html#ac619ee9c89d89550faf4c94db94b78d3">CIP_CON_MGR_ERROR_INVALID_O_TO_T_CONNECTION_SIZE</a>;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                  <span class="keywordflow">return</span> <a class="code" href="../../d6/d52/ciperror_8h.html#a4295b59f4098d9d45991b5cc0f2c6787">CIP_ERROR_CONNECTION_FAILURE</a>;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                }</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;            }</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;            {</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;              *pa_pnExtendedError =</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                  <a class="code" href="../../d2/da3/cipconnectionmanager_8h.html#a8e858ac9b6a0aa7dfc7db2077795e44f">CIP_CON_MGR_INVALID_CONSUMING_APPLICATION_PATH</a>;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;              <span class="keywordflow">return</span> <a class="code" href="../../d6/d52/ciperror_8h.html#a4295b59f4098d9d45991b5cc0f2c6787">CIP_ERROR_CONNECTION_FAILURE</a>;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;            }</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        }</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;      <span class="keywordflow">if</span> (T2OConnectionType != 0)</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        { <span class="comment">/*setup producer side*/</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;          <span class="keywordflow">if</span> (0</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;              != (pstInstance = <a class="code" href="../../d2/dc9/group__CIP__API.html#ga9919da1c597955301da602a23a470801">getCIPInstance</a>(pstAssemblyClass,</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                  pstIOConnObj-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#af5773a8cf15183ed7ae09160813452a6">ConnectionPath</a>.<a class="code" href="../../df/dff/structCIPConnectionPath.html#a5d8a3709c9aa5edd081863163c93b8bf">ConnectionPoint</a>[nProducingIndex])))</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;            {</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;              pstIOConnObj-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#add228c9f3a98587ab9ce3e7f27d7ab0c">p_stProducingInstance</a> = pstInstance;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;              pstIOConnObj-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a07efec4e8e4d2663c603ef9ff9d80fa3">ProducedConnectionPathLength</a> = 6;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;              pstIOConnObj-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a048405cb4a539cf9d353b84f4e7925c2">ProducedConnectionPath</a>.<a class="code" href="../../dd/d36/structCIPEPath.html#ae2a8365173b69a9c79dce52202bccf55">PathSize</a> = 6;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;              pstIOConnObj-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a048405cb4a539cf9d353b84f4e7925c2">ProducedConnectionPath</a>.<a class="code" href="../../dd/d36/structCIPEPath.html#a283bb751946332440cfe18ec7d649baa">ClassID</a> =</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                  pstIOConnObj-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#af5773a8cf15183ed7ae09160813452a6">ConnectionPath</a>.<a class="code" href="../../df/dff/structCIPConnectionPath.html#ac13dcf2b5048fee0e4f1aff464efe8c7">ClassID</a>;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;              pstIOConnObj-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a048405cb4a539cf9d353b84f4e7925c2">ProducedConnectionPath</a>.<a class="code" href="../../dd/d36/structCIPEPath.html#a3696a7dfb960fc5ecf75712d0e1cdee7">InstanceNr</a> =</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;                  pstIOConnObj-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#af5773a8cf15183ed7ae09160813452a6">ConnectionPath</a>.<a class="code" href="../../df/dff/structCIPConnectionPath.html#a5d8a3709c9aa5edd081863163c93b8bf">ConnectionPoint</a>[nProducingIndex];</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;              pstIOConnObj-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a048405cb4a539cf9d353b84f4e7925c2">ProducedConnectionPath</a>.<a class="code" href="../../dd/d36/structCIPEPath.html#aa8e2ce7e76a7fbaf88b7c31c98a380b8">AttributNr</a> = 3;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;              pstAttribute = <a class="code" href="../../d2/dc9/group__CIP__API.html#ga33fda1920669c922471cb6218c8b22b8">getAttribute</a>(pstInstance, 3);</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;              <a class="code" href="../../dc/d75/LM3S8962_2sample__application_2opener__user__conf_8h.html#a7b5e7d71f666ba97788b35be1617c40a">OPENER_ASSERT</a>(pstAttribute != NULL);</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;              <span class="comment">/* an assembly object should always have an attribute 3 */</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;              nDataSize = pstIOConnObj-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a5d5cd00e7b6be785b5c41cf3027aaf90">ProducedConnectionSize</a>;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;              nDiffSize = 0;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;              nIsHeartbeat = (((<a class="code" href="../../d7/d0b/structCIPByteArray.html">S_CIP_Byte_Array</a> *) pstAttribute-&gt;<a class="code" href="../../d9/d11/structCIPAttributeStruct.html#a19855fbf02dc9275a76a9b9b6e2ca36f">pt2data</a>)-&gt;Length == 0);</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;              <span class="keywordflow">if</span> ((pstIOConnObj-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#ac097ff6b38fea770e9838bc10a5338b6">TransportTypeClassTrigger</a> &amp; 0x0F) == 1)</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                {</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;                  <span class="comment">/* class 1 connection */</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                  nDataSize -= 2; <span class="comment">/* remove 16-bit sequence count length */</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                  nDiffSize += 2;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                }</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;              <span class="keywordflow">if</span> ((<a class="code" href="../../dc/d75/LM3S8962_2sample__application_2opener__user__conf_8h.html#aee16f150a7d925445e763ff326b610e8">OPENER_PRODUCED_DATA_HAS_RUN_IDLE_HEADER</a>) &amp;&amp; (nDataSize &gt; 0) &amp;&amp; (!nIsHeartbeat))</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                { <span class="comment">/* we only have an run idle header if it is not an heartbeat connection */</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                  nDataSize -= 4; <span class="comment">/* remove the 4 bytes needed for run/idle header */</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                  nDiffSize += 4;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                }</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;              <span class="keywordflow">if</span> (((<a class="code" href="../../d7/d0b/structCIPByteArray.html">S_CIP_Byte_Array</a> *) pstAttribute-&gt;<a class="code" href="../../d9/d11/structCIPAttributeStruct.html#a19855fbf02dc9275a76a9b9b6e2ca36f">pt2data</a>)-&gt;Length</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;                  != nDataSize)</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                {</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                  <span class="comment">/*wrong connection size*/</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                  pa_pstConnObjData-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a6d253a3d8827b5eb14ea86311dd86bd3">CorrectTOSize</a> = ((<a class="code" href="../../d7/d0b/structCIPByteArray.html">S_CIP_Byte_Array</a> *) pstAttribute-&gt;<a class="code" href="../../d9/d11/structCIPAttributeStruct.html#a19855fbf02dc9275a76a9b9b6e2ca36f">pt2data</a>)-&gt;Length + nDiffSize;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                  *pa_pnExtendedError = <a class="code" href="../../d2/da3/cipconnectionmanager_8h.html#aaf0e63587791cb51f4c8642a527f41ed">CIP_CON_MGR_ERROR_INVALID_T_TO_O_CONNECTION_SIZE</a>;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                  <span class="keywordflow">return</span> <a class="code" href="../../d6/d52/ciperror_8h.html#a4295b59f4098d9d45991b5cc0f2c6787">CIP_ERROR_CONNECTION_FAILURE</a>;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                }</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;            }</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;            {</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;              *pa_pnExtendedError =</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;                  <a class="code" href="../../d2/da3/cipconnectionmanager_8h.html#ae84b7346453b866e3b9f98a2feb9c17c">CIP_CON_MGR_INVALID_PRODUCING_APPLICATION_PATH</a>;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;              <span class="keywordflow">return</span> <a class="code" href="../../d6/d52/ciperror_8h.html#a4295b59f4098d9d45991b5cc0f2c6787">CIP_ERROR_CONNECTION_FAILURE</a>;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;            }</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        }</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;      <span class="keywordflow">if</span> (NULL != <a class="code" href="../../df/d03/cipioconnection_8c.html#a8160f1516e9aa813509d35f4e9ba8971">g_pnConfigDataBuffer</a>)</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        { <span class="comment">/* config data has been sent with this forward open request */</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;          *pa_pnExtendedError = <a class="code" href="../../df/d03/cipioconnection_8c.html#a9243c246dc6021572d661b9b923a6b7a">handleConfigData</a>(pstAssemblyClass,</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;              pstIOConnObj);</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;          <span class="keywordflow">if</span> (0 != *pa_pnExtendedError)</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;            {</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;              <span class="keywordflow">return</span> <a class="code" href="../../d6/d52/ciperror_8h.html#a4295b59f4098d9d45991b5cc0f2c6787">CIP_ERROR_CONNECTION_FAILURE</a>;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;            }</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        }</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;      nRetVal = <a class="code" href="../../df/d03/cipioconnection_8c.html#a667690c04e476a38fa3b8e555a812e44">openCommunicationChannels</a>(pstIOConnObj);</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d7/d69/typedefs_8h.html#adf0533b554c6a20e73928f231e5286d9ac471acf92535c32126cd4d318f8175ef">EIP_OK</a> != nRetVal)</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        {</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;          *pa_pnExtendedError = 0; <span class="comment">/*TODO find out the correct extended error code*/</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;          <span class="keywordflow">return</span> nRetVal;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        }</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    }</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  <a class="code" href="../../d5/d35/cipconnectionmanager_8c.html#a37726ad0c33ff6afe7339fb0986fc3b7">addNewActiveConnection</a>(pstIOConnObj);</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  <a class="code" href="../../d5/dc5/group__CIP__CALLBACK__API.html#ga69b8c5aa40b203bd08a0545402142216">IApp_IOConnectionEvent</a>(pstIOConnObj-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#af5773a8cf15183ed7ae09160813452a6">ConnectionPath</a>.<a class="code" href="../../df/dff/structCIPConnectionPath.html#a5d8a3709c9aa5edd081863163c93b8bf">ConnectionPoint</a>[0],</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;      pstIOConnObj-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#af5773a8cf15183ed7ae09160813452a6">ConnectionPath</a>.<a class="code" href="../../df/dff/structCIPConnectionPath.html#a5d8a3709c9aa5edd081863163c93b8bf">ConnectionPoint</a>[1], <a class="code" href="../../df/d28/ciptypes_8h.html#a47e9326e14025a4fc4287c3f233d23ddaae58453f8aa7f2ba68deec87eb5a270f">enOpened</a>);</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  <span class="keywordflow">return</span> nRetVal;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;}</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="comment">/*   EIP_STATUS OpenPointToPointConnection(S_CIP_CPF_Data *pa_CPF_data, S_CIP_CM_Object *pa_pstCMObject, INT8 pa_direction, int pa_index)</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="comment"> *   open a Point2Point connection dependent on pa_direction.</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="comment"> *      pa_pstCMObject  pointer to registered Object in ConnectionManager.</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="comment"> *      pa_index        index of the connection object</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="comment"> *  return status</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="comment"> *               0 .. success</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="comment"> *              -1 .. error</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<a class="code" href="../../d7/d69/typedefs_8h.html#adf0533b554c6a20e73928f231e5286d9">EIP_STATUS</a></div>
<div class="line"><a name="l00285"></a><span class="lineno"><a class="line" href="../../df/d03/cipioconnection_8c.html#a5528cb41b78cd5f5641a3666dcc1177d">  285</a></span>&#160;<a class="code" href="../../df/d03/cipioconnection_8c.html#a5528cb41b78cd5f5641a3666dcc1177d">OpenConsumingPointToPointConnection</a>(<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html">S_CIP_ConnectionObject</a> *pa_pstConnObj,</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <a class="code" href="../../de/d1c/structS__CIP__CPF__Data.html">S_CIP_CPF_Data</a> *pa_CPF_data)</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;{</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  <span class="comment">/*static EIP_UINT16 nUDPPort = 2222; TODO think on improving the udp port assigment for point to point connections */</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;  <span class="keywordtype">int</span> j;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  <span class="keyword">struct </span><a class="code" href="../../de/d38/structsockaddr__in.html">sockaddr_in</a> addr;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../d0/d87/basiccip_8c.html#ae4b6440ca3750e54ba1fdd848fcaa59b">newfd</a>;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  j = 0;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  <span class="keywordflow">if</span> (pa_CPF_data-&gt;<a class="code" href="../../de/d1c/structS__CIP__CPF__Data.html#ae6feb1e1526c8c85d08b2c62b343f636">AddrInfo</a>[0].<a class="code" href="../../d5/d70/structS__SockAddrInfo__Item.html#a0279a8b3f02630e8c20bc60952ef78a9">TypeID</a> == 0)</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    { <span class="comment">/* it is not used yet */</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;      j = 0;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    }</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pa_CPF_data-&gt;<a class="code" href="../../de/d1c/structS__CIP__CPF__Data.html#ae6feb1e1526c8c85d08b2c62b343f636">AddrInfo</a>[1].<a class="code" href="../../d5/d70/structS__SockAddrInfo__Item.html#a0279a8b3f02630e8c20bc60952ef78a9">TypeID</a> == 0)</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    {</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;      j = 1;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    }</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  addr.<a class="code" href="../../de/d38/structsockaddr__in.html#a55e7794e0d51c51e0249aaa146b6575f">sin_family</a> = <a class="code" href="../../df/d24/archnw_8h.html#a9930604d0e32588eae76f43ca38e7826">AF_INET</a>;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  addr.<a class="code" href="../../de/d38/structsockaddr__in.html#a4ea5f2f1138e5c8597097db255a9ec6c">sin_addr</a>.s_addr = <a class="code" href="../../df/d24/archnw_8h.html#a5d1940045dc2e7de552f3d4ff13a74ab">INADDR_ANY</a>;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  <span class="comment">/*addr.in_port = htons(nUDPPort++);*/</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  addr.<a class="code" href="../../de/d38/structsockaddr__in.html#ad8774bdd0b8c65cbd01c03f07381ba03">sin_port</a> = htons(<a class="code" href="../../df/d03/cipioconnection_8c.html#a190a0e08c9d8f31cf09442fdb3c3671b">OPENER_EIP_IO_UDP_PORT</a>);</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  newfd = <a class="code" href="../../d5/dc5/group__CIP__CALLBACK__API.html#ga9d7f3bd3280b10ad3cc4ed2f5dc9c339">IApp_CreateUDPSocket</a>(<a class="code" href="../../d2/da3/cipconnectionmanager_8h.html#abe63966094bb9839304a78cf35a86e8f">CONSUMING</a>, &amp;addr); <span class="comment">/* the address is only needed for bind used if consuming */</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  <span class="keywordflow">if</span> (newfd == <a class="code" href="../../d7/d69/typedefs_8h.html#ace23313ab660889d73718853b644405e">EIP_INVALID_SOCKET</a>)</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    {</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;      <a class="code" href="../../d1/d1b/trace_8h.html#a48f0d8056c030015f14cf5907315e6bb">OPENER_TRACE_ERR</a>(</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;          <span class="stringliteral">&quot;cannot create UDP socket in OpenPointToPointConnection\n&quot;</span>);</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d7/d69/typedefs_8h.html#adf0533b554c6a20e73928f231e5286d9aa2593a8a4cbf4566ee6f68f16e5115a6">EIP_ERROR</a>;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    }</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  pa_pstConnObj-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a1bb389bba849da33147b9ea58eb1a8dc">m_stOriginatorAddr</a> = addr; <span class="comment">/* store the address of the originator for packet scanning */</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  addr.<a class="code" href="../../de/d38/structsockaddr__in.html#a4ea5f2f1138e5c8597097db255a9ec6c">sin_addr</a>.s_addr = <a class="code" href="../../df/d24/archnw_8h.html#a5d1940045dc2e7de552f3d4ff13a74ab">INADDR_ANY</a>; <span class="comment">/* restore the address */</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  pa_pstConnObj-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a2ba9996aabd1d8fa2a7b21d63e8df9c3">sockfd</a>[<a class="code" href="../../d2/da3/cipconnectionmanager_8h.html#abe63966094bb9839304a78cf35a86e8f">CONSUMING</a>] = <a class="code" href="../../d0/d87/basiccip_8c.html#ae4b6440ca3750e54ba1fdd848fcaa59b">newfd</a>;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  pa_CPF_data-&gt;<a class="code" href="../../de/d1c/structS__CIP__CPF__Data.html#ae6feb1e1526c8c85d08b2c62b343f636">AddrInfo</a>[j].<a class="code" href="../../d5/d70/structS__SockAddrInfo__Item.html#acd1402b222a3f1a56abc479b8ea0135f">Length</a> = 16;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  pa_CPF_data-&gt;<a class="code" href="../../de/d1c/structS__CIP__CPF__Data.html#ae6feb1e1526c8c85d08b2c62b343f636">AddrInfo</a>[j].<a class="code" href="../../d5/d70/structS__SockAddrInfo__Item.html#a0279a8b3f02630e8c20bc60952ef78a9">TypeID</a> = <a class="code" href="../../d0/dff/cpf_8h.html#a7250c30ae63ae05258f8bb0239aad93e">CIP_ITEM_ID_SOCKADDRINFO_O_TO_T</a>;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  pa_CPF_data-&gt;<a class="code" href="../../de/d1c/structS__CIP__CPF__Data.html#ae6feb1e1526c8c85d08b2c62b343f636">AddrInfo</a>[j].<a class="code" href="../../d5/d70/structS__SockAddrInfo__Item.html#a4f280b2fb88b011e3d9f14bcaa0ff8f9">nsin_port</a> = addr.<a class="code" href="../../de/d38/structsockaddr__in.html#ad8774bdd0b8c65cbd01c03f07381ba03">sin_port</a>;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  <span class="comment">/*TODO should we add our own address here? */</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  pa_CPF_data-&gt;<a class="code" href="../../de/d1c/structS__CIP__CPF__Data.html#ae6feb1e1526c8c85d08b2c62b343f636">AddrInfo</a>[j].<a class="code" href="../../d5/d70/structS__SockAddrInfo__Item.html#a0ce9f9cb0d8d5114e5ce6954e4b04c7d">nsin_addr</a> = addr.<a class="code" href="../../de/d38/structsockaddr__in.html#a4ea5f2f1138e5c8597097db255a9ec6c">sin_addr</a>.s_addr;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  memset(pa_CPF_data-&gt;<a class="code" href="../../de/d1c/structS__CIP__CPF__Data.html#ae6feb1e1526c8c85d08b2c62b343f636">AddrInfo</a>[j].<a class="code" href="../../d5/d70/structS__SockAddrInfo__Item.html#a1641cc03aac9893021a96de78744a4c1">nasin_zero</a>, 0, 8);</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  pa_CPF_data-&gt;<a class="code" href="../../de/d1c/structS__CIP__CPF__Data.html#ae6feb1e1526c8c85d08b2c62b343f636">AddrInfo</a>[j].<a class="code" href="../../d5/d70/structS__SockAddrInfo__Item.html#a9806035f5fd2ec15324f4bb31e07434c">nsin_family</a> = htons(<a class="code" href="../../df/d24/archnw_8h.html#a9930604d0e32588eae76f43ca38e7826">AF_INET</a>);</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d7/d69/typedefs_8h.html#adf0533b554c6a20e73928f231e5286d9ac471acf92535c32126cd4d318f8175ef">EIP_OK</a>;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;}</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="keywordtype">int</span></div>
<div class="line"><a name="l00333"></a><span class="lineno"><a class="line" href="../../df/d03/cipioconnection_8c.html#a309b521bf439ca702ce2895e0a4390c5">  333</a></span>&#160;<a class="code" href="../../df/d03/cipioconnection_8c.html#a309b521bf439ca702ce2895e0a4390c5">OpenProducingPointToPointConnection</a>(<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html">S_CIP_ConnectionObject</a> *pa_pstConnObj,</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <a class="code" href="../../de/d1c/structS__CIP__CPF__Data.html">S_CIP_CPF_Data</a> *pa_CPF_data)</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;{</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../d0/d87/basiccip_8c.html#ae4b6440ca3750e54ba1fdd848fcaa59b">newfd</a>;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  <a class="code" href="../../df/d24/archnw_8h.html#a8a249909ca23ddaabc98f21e07d96d2f">in_port_t</a> nPort = htons(<a class="code" href="../../df/d03/cipioconnection_8c.html#a190a0e08c9d8f31cf09442fdb3c3671b">OPENER_EIP_IO_UDP_PORT</a>); <span class="comment">/* the default port to be used if no port information is part of the forward open request */</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d0/dff/cpf_8h.html#afda749dea00e51310eb9748c22f70f67">CIP_ITEM_ID_SOCKADDRINFO_T_TO_O</a> == pa_CPF_data-&gt;<a class="code" href="../../de/d1c/structS__CIP__CPF__Data.html#ae6feb1e1526c8c85d08b2c62b343f636">AddrInfo</a>[0].<a class="code" href="../../d5/d70/structS__SockAddrInfo__Item.html#a0279a8b3f02630e8c20bc60952ef78a9">TypeID</a>)</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    {</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;      nPort = pa_CPF_data-&gt;<a class="code" href="../../de/d1c/structS__CIP__CPF__Data.html#ae6feb1e1526c8c85d08b2c62b343f636">AddrInfo</a>[0].<a class="code" href="../../d5/d70/structS__SockAddrInfo__Item.html#a4f280b2fb88b011e3d9f14bcaa0ff8f9">nsin_port</a>;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    }</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    {</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d0/dff/cpf_8h.html#afda749dea00e51310eb9748c22f70f67">CIP_ITEM_ID_SOCKADDRINFO_T_TO_O</a> == pa_CPF_data-&gt;<a class="code" href="../../de/d1c/structS__CIP__CPF__Data.html#ae6feb1e1526c8c85d08b2c62b343f636">AddrInfo</a>[1].<a class="code" href="../../d5/d70/structS__SockAddrInfo__Item.html#a0279a8b3f02630e8c20bc60952ef78a9">TypeID</a>)</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        {</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;          nPort = pa_CPF_data-&gt;<a class="code" href="../../de/d1c/structS__CIP__CPF__Data.html#ae6feb1e1526c8c85d08b2c62b343f636">AddrInfo</a>[1].<a class="code" href="../../d5/d70/structS__SockAddrInfo__Item.html#a4f280b2fb88b011e3d9f14bcaa0ff8f9">nsin_port</a>;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        }</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    }</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  pa_pstConnObj-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a57854a4a37db4f762ce9bd58831f0063">remote_addr</a>.<a class="code" href="../../de/d38/structsockaddr__in.html#a55e7794e0d51c51e0249aaa146b6575f">sin_family</a> = <a class="code" href="../../df/d24/archnw_8h.html#a9930604d0e32588eae76f43ca38e7826">AF_INET</a>;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  pa_pstConnObj-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a57854a4a37db4f762ce9bd58831f0063">remote_addr</a>.<a class="code" href="../../de/d38/structsockaddr__in.html#a4ea5f2f1138e5c8597097db255a9ec6c">sin_addr</a>.s_addr = 0; <span class="comment">/* we don&#39;t know the address of the originate will be set in the IApp_CreateUDPSocket */</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  pa_pstConnObj-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a57854a4a37db4f762ce9bd58831f0063">remote_addr</a>.<a class="code" href="../../de/d38/structsockaddr__in.html#ad8774bdd0b8c65cbd01c03f07381ba03">sin_port</a> = nPort;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  newfd = <a class="code" href="../../d5/dc5/group__CIP__CALLBACK__API.html#ga9d7f3bd3280b10ad3cc4ed2f5dc9c339">IApp_CreateUDPSocket</a>(<a class="code" href="../../d2/da3/cipconnectionmanager_8h.html#a607c47622da3d77e7bf799a6125f4ef5">PRODUCING</a>, &amp;pa_pstConnObj-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a57854a4a37db4f762ce9bd58831f0063">remote_addr</a>); <span class="comment">/* the address is only needed for bind used if consuming */</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  <span class="keywordflow">if</span> (newfd == <a class="code" href="../../d7/d69/typedefs_8h.html#ace23313ab660889d73718853b644405e">EIP_INVALID_SOCKET</a>)</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    {</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;      <a class="code" href="../../d1/d1b/trace_8h.html#a48f0d8056c030015f14cf5907315e6bb">OPENER_TRACE_ERR</a>(</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;          <span class="stringliteral">&quot;cannot create UDP socket in OpenPointToPointConnection\n&quot;</span>);</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;      <span class="comment">//*pa_pnExtendedError = 0x0315; /* miscellaneous*/</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d6/d52/ciperror_8h.html#a4295b59f4098d9d45991b5cc0f2c6787">CIP_ERROR_CONNECTION_FAILURE</a>;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    }</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  pa_pstConnObj-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a2ba9996aabd1d8fa2a7b21d63e8df9c3">sockfd</a>[<a class="code" href="../../d2/da3/cipconnectionmanager_8h.html#a607c47622da3d77e7bf799a6125f4ef5">PRODUCING</a>] = <a class="code" href="../../d0/d87/basiccip_8c.html#ae4b6440ca3750e54ba1fdd848fcaa59b">newfd</a>;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d7/d69/typedefs_8h.html#adf0533b554c6a20e73928f231e5286d9ac471acf92535c32126cd4d318f8175ef">EIP_OK</a>;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;}</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<a class="code" href="../../d7/d69/typedefs_8h.html#adf0533b554c6a20e73928f231e5286d9">EIP_STATUS</a></div>
<div class="line"><a name="l00369"></a><span class="lineno"><a class="line" href="../../df/d03/cipioconnection_8c.html#a7e4d255d4b152b39dc1e9678094685f9">  369</a></span>&#160;<a class="code" href="../../df/d03/cipioconnection_8c.html#a7e4d255d4b152b39dc1e9678094685f9">openProducingMulticastConnection</a>(<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html">S_CIP_ConnectionObject</a> *pa_pstConnObj,</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <a class="code" href="../../de/d1c/structS__CIP__CPF__Data.html">S_CIP_CPF_Data</a> *pa_CPF_data)</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;{</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  <a class="code" href="../../d9/db7/structCIP__ConnectionObject.html">S_CIP_ConnectionObject</a> *pstExistingConn = <a class="code" href="../../d1/dbc/appcontype_8c.html#a5f464e718f08677877ddadf7326f4546">getExistingProdMulticastConnection</a>(</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;      pa_pstConnObj-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#af5773a8cf15183ed7ae09160813452a6">ConnectionPath</a>.<a class="code" href="../../df/dff/structCIPConnectionPath.html#a5d8a3709c9aa5edd081863163c93b8bf">ConnectionPoint</a>[1]);</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  <span class="keywordtype">int</span> j;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  <span class="keywordflow">if</span> (NULL == pstExistingConn)</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    { <span class="comment">/* we are the first connection producing for the given Input Assembly */</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../df/d03/cipioconnection_8c.html#a082f6fee564e932e77a812908de1c3ce">OpenMulticastConnection</a>(<a class="code" href="../../d2/da3/cipconnectionmanager_8h.html#a607c47622da3d77e7bf799a6125f4ef5">PRODUCING</a>, pa_pstConnObj, pa_CPF_data);</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    }</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    {</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;      <span class="comment">/* we need to infrom our originator on the correct connection id */</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;      pa_pstConnObj-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#ab27250efaf96f6a8833c732da52c50c1">CIPProducedConnectionID</a> =</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;          pstExistingConn-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#ab27250efaf96f6a8833c732da52c50c1">CIPProducedConnectionID</a>;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    }</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;  <span class="comment">/* we have a connection reuse the data and the socket */</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  j = 0; <span class="comment">/* allocate an unused sockaddr struct to use */</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d4/d91/group__ENCAP.html#ga00e4db57a2684c23db31f0eef084b26b">g_stCPFDataItem</a>.<a class="code" href="../../de/d1c/structS__CIP__CPF__Data.html#ae6feb1e1526c8c85d08b2c62b343f636">AddrInfo</a>[0].<a class="code" href="../../d5/d70/structS__SockAddrInfo__Item.html#a0279a8b3f02630e8c20bc60952ef78a9">TypeID</a> == 0)</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    { <span class="comment">/* it is not used yet */</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;      j = 0;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    }</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d4/d91/group__ENCAP.html#ga00e4db57a2684c23db31f0eef084b26b">g_stCPFDataItem</a>.<a class="code" href="../../de/d1c/structS__CIP__CPF__Data.html#ae6feb1e1526c8c85d08b2c62b343f636">AddrInfo</a>[1].<a class="code" href="../../d5/d70/structS__SockAddrInfo__Item.html#a0279a8b3f02630e8c20bc60952ef78a9">TypeID</a> == 0)</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    {</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;      j = 1;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    }</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d2/da3/cipconnectionmanager_8h.html#a992bfcf8c75709fe6a7be2ee4fa72605adbebb7cdb0f8e9fae922c6b11b6d790d">enConnTypeIOExclusiveOwner</a> == pa_pstConnObj-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a5681ccd51b35afff155313b02754a0a7">m_eInstanceType</a>)</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    {</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;      <span class="comment">/* eclusive owners take the socket and further manage the connection</span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;<span class="comment">       * especially in the case of time outs.</span></div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;<span class="comment">       */</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;      pa_pstConnObj-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a2ba9996aabd1d8fa2a7b21d63e8df9c3">sockfd</a>[<a class="code" href="../../d2/da3/cipconnectionmanager_8h.html#a607c47622da3d77e7bf799a6125f4ef5">PRODUCING</a>] = pstExistingConn-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a2ba9996aabd1d8fa2a7b21d63e8df9c3">sockfd</a>[<a class="code" href="../../d2/da3/cipconnectionmanager_8h.html#a607c47622da3d77e7bf799a6125f4ef5">PRODUCING</a>];</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;      pstExistingConn-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a2ba9996aabd1d8fa2a7b21d63e8df9c3">sockfd</a>[<a class="code" href="../../d2/da3/cipconnectionmanager_8h.html#a607c47622da3d77e7bf799a6125f4ef5">PRODUCING</a>] = <a class="code" href="../../d7/d69/typedefs_8h.html#ace23313ab660889d73718853b644405e">EIP_INVALID_SOCKET</a>;</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    }</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    { <span class="comment">/* this connection will not produce the data */</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;      pa_pstConnObj-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a2ba9996aabd1d8fa2a7b21d63e8df9c3">sockfd</a>[<a class="code" href="../../d2/da3/cipconnectionmanager_8h.html#a607c47622da3d77e7bf799a6125f4ef5">PRODUCING</a>] = <a class="code" href="../../d7/d69/typedefs_8h.html#ace23313ab660889d73718853b644405e">EIP_INVALID_SOCKET</a>;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    }</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  pa_CPF_data-&gt;<a class="code" href="../../de/d1c/structS__CIP__CPF__Data.html#ae6feb1e1526c8c85d08b2c62b343f636">AddrInfo</a>[j].<a class="code" href="../../d5/d70/structS__SockAddrInfo__Item.html#acd1402b222a3f1a56abc479b8ea0135f">Length</a> = 16;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  pa_CPF_data-&gt;<a class="code" href="../../de/d1c/structS__CIP__CPF__Data.html#ae6feb1e1526c8c85d08b2c62b343f636">AddrInfo</a>[j].<a class="code" href="../../d5/d70/structS__SockAddrInfo__Item.html#a0279a8b3f02630e8c20bc60952ef78a9">TypeID</a> = <a class="code" href="../../d0/dff/cpf_8h.html#afda749dea00e51310eb9748c22f70f67">CIP_ITEM_ID_SOCKADDRINFO_T_TO_O</a>;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  pa_pstConnObj-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a57854a4a37db4f762ce9bd58831f0063">remote_addr</a>.<a class="code" href="../../de/d38/structsockaddr__in.html#a55e7794e0d51c51e0249aaa146b6575f">sin_family</a> = <a class="code" href="../../df/d24/archnw_8h.html#a9930604d0e32588eae76f43ca38e7826">AF_INET</a>;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  pa_pstConnObj-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a57854a4a37db4f762ce9bd58831f0063">remote_addr</a>.<a class="code" href="../../de/d38/structsockaddr__in.html#ad8774bdd0b8c65cbd01c03f07381ba03">sin_port</a> = pa_CPF_data-&gt;<a class="code" href="../../de/d1c/structS__CIP__CPF__Data.html#ae6feb1e1526c8c85d08b2c62b343f636">AddrInfo</a>[j].<a class="code" href="../../d5/d70/structS__SockAddrInfo__Item.html#a4f280b2fb88b011e3d9f14bcaa0ff8f9">nsin_port</a> =</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;      htons(<a class="code" href="../../df/d03/cipioconnection_8c.html#a190a0e08c9d8f31cf09442fdb3c3671b">OPENER_EIP_IO_UDP_PORT</a>);</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  pa_pstConnObj-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a57854a4a37db4f762ce9bd58831f0063">remote_addr</a>.<a class="code" href="../../de/d38/structsockaddr__in.html#a4ea5f2f1138e5c8597097db255a9ec6c">sin_addr</a>.s_addr =</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;      pa_CPF_data-&gt;<a class="code" href="../../de/d1c/structS__CIP__CPF__Data.html#ae6feb1e1526c8c85d08b2c62b343f636">AddrInfo</a>[j].<a class="code" href="../../d5/d70/structS__SockAddrInfo__Item.html#a0ce9f9cb0d8d5114e5ce6954e4b04c7d">nsin_addr</a> =</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;          <a class="code" href="../../dd/d20/ciptcpipinterface_8c.html#a5ee5da7a701530920d8c84651bde8f49">g_stMultiCastconfig</a>.<a class="code" href="../../dc/d48/structSMcastConfig.html#ad6ff572692d8576278441b9f04b841b3">m_unMcastStartAddr</a>;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  memset(pa_CPF_data-&gt;<a class="code" href="../../de/d1c/structS__CIP__CPF__Data.html#ae6feb1e1526c8c85d08b2c62b343f636">AddrInfo</a>[j].<a class="code" href="../../d5/d70/structS__SockAddrInfo__Item.html#a1641cc03aac9893021a96de78744a4c1">nasin_zero</a>, 0, 8);</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;  pa_CPF_data-&gt;<a class="code" href="../../de/d1c/structS__CIP__CPF__Data.html#ae6feb1e1526c8c85d08b2c62b343f636">AddrInfo</a>[j].<a class="code" href="../../d5/d70/structS__SockAddrInfo__Item.html#a9806035f5fd2ec15324f4bb31e07434c">nsin_family</a> = htons(<a class="code" href="../../df/d24/archnw_8h.html#a9930604d0e32588eae76f43ca38e7826">AF_INET</a>);</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d7/d69/typedefs_8h.html#adf0533b554c6a20e73928f231e5286d9ac471acf92535c32126cd4d318f8175ef">EIP_OK</a>;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;}</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="comment">/*   INT8 OpenMulticastConnection(S_CIP_CPF_Data *pa_CPF_data, S_CIP_CM_Object *pa_pstCMObject, INT8 pa_direction, int pa_index)</span></div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<span class="comment"> *   open a Multicast connection dependent on pa_direction.</span></div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="comment"> *      pa_CPF_data     received CPF Data Item.</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="comment"> *      pa_pstCMObject  pointer to registered Object in ConnectionManager.</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="comment"> *      pa_direction    flag to indicate if consuming or producing.</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;<span class="comment"> *      pa_index        index of the connection object</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="comment"> *  return status</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="comment"> *               0 .. success</span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;<span class="comment"> *              -1 .. error</span></div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<a class="code" href="../../d7/d69/typedefs_8h.html#adf0533b554c6a20e73928f231e5286d9">EIP_STATUS</a></div>
<div class="line"><a name="l00437"></a><span class="lineno"><a class="line" href="../../df/d03/cipioconnection_8c.html#a082f6fee564e932e77a812908de1c3ce">  437</a></span>&#160;<a class="code" href="../../df/d03/cipioconnection_8c.html#a082f6fee564e932e77a812908de1c3ce">OpenMulticastConnection</a>(<span class="keywordtype">int</span> pa_direction, <a class="code" href="../../d9/db7/structCIP__ConnectionObject.html">S_CIP_ConnectionObject</a> *pa_pstConnObj,</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <a class="code" href="../../de/d1c/structS__CIP__CPF__Data.html">S_CIP_CPF_Data</a> *pa_CPF_data)</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;{</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;  <span class="keywordtype">int</span> j;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;  <span class="keyword">struct </span><a class="code" href="../../de/d38/structsockaddr__in.html">sockaddr_in</a> addr;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../d0/d87/basiccip_8c.html#ae4b6440ca3750e54ba1fdd848fcaa59b">newfd</a>;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;  j = 0; <span class="comment">/* allocate an unused sockaddr struct to use */</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;  <span class="keywordflow">if</span> (0 != <a class="code" href="../../d4/d91/group__ENCAP.html#ga00e4db57a2684c23db31f0eef084b26b">g_stCPFDataItem</a>.<a class="code" href="../../de/d1c/structS__CIP__CPF__Data.html#ae6feb1e1526c8c85d08b2c62b343f636">AddrInfo</a>[0].<a class="code" href="../../d5/d70/structS__SockAddrInfo__Item.html#a0279a8b3f02630e8c20bc60952ef78a9">TypeID</a>)</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    {</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;      <span class="keywordflow">if</span> ((<a class="code" href="../../d2/da3/cipconnectionmanager_8h.html#abe63966094bb9839304a78cf35a86e8f">CONSUMING</a> == pa_direction)</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;          &amp;&amp; (<a class="code" href="../../d0/dff/cpf_8h.html#a7250c30ae63ae05258f8bb0239aad93e">CIP_ITEM_ID_SOCKADDRINFO_O_TO_T</a> == pa_CPF_data-&gt;<a class="code" href="../../de/d1c/structS__CIP__CPF__Data.html#ae6feb1e1526c8c85d08b2c62b343f636">AddrInfo</a>[0].<a class="code" href="../../d5/d70/structS__SockAddrInfo__Item.html#a0279a8b3f02630e8c20bc60952ef78a9">TypeID</a>))</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        {</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;          <span class="comment">/* for consuming connection points the originator can choos the multicast address to use</span></div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="comment">           * we have a given address type so use it */</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        }</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        {</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;          j = 1;</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;          <span class="comment">/* if the type is not zero (not used) or if a given tpye it has to be the correct one */</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;          <span class="keywordflow">if</span> ((0 != <a class="code" href="../../d4/d91/group__ENCAP.html#ga00e4db57a2684c23db31f0eef084b26b">g_stCPFDataItem</a>.<a class="code" href="../../de/d1c/structS__CIP__CPF__Data.html#ae6feb1e1526c8c85d08b2c62b343f636">AddrInfo</a>[1].<a class="code" href="../../d5/d70/structS__SockAddrInfo__Item.html#a0279a8b3f02630e8c20bc60952ef78a9">TypeID</a>)</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;              &amp;&amp; (!((<a class="code" href="../../d2/da3/cipconnectionmanager_8h.html#abe63966094bb9839304a78cf35a86e8f">CONSUMING</a> == pa_direction)</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;                  &amp;&amp; (<a class="code" href="../../d0/dff/cpf_8h.html#a7250c30ae63ae05258f8bb0239aad93e">CIP_ITEM_ID_SOCKADDRINFO_O_TO_T</a></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;                      == pa_CPF_data-&gt;<a class="code" href="../../de/d1c/structS__CIP__CPF__Data.html#ae6feb1e1526c8c85d08b2c62b343f636">AddrInfo</a>[0].<a class="code" href="../../d5/d70/structS__SockAddrInfo__Item.html#a0279a8b3f02630e8c20bc60952ef78a9">TypeID</a>))))</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;            {</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;              <a class="code" href="../../d1/d1b/trace_8h.html#a48f0d8056c030015f14cf5907315e6bb">OPENER_TRACE_ERR</a>(<span class="stringliteral">&quot;no suitable addr info item available\n&quot;</span>);</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;              <span class="keywordflow">return</span> <a class="code" href="../../d7/d69/typedefs_8h.html#adf0533b554c6a20e73928f231e5286d9aa2593a8a4cbf4566ee6f68f16e5115a6">EIP_ERROR</a>;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;            }</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        }</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    }</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;  <span class="keywordflow">if</span> (0 == pa_CPF_data-&gt;<a class="code" href="../../de/d1c/structS__CIP__CPF__Data.html#ae6feb1e1526c8c85d08b2c62b343f636">AddrInfo</a>[j].<a class="code" href="../../d5/d70/structS__SockAddrInfo__Item.html#a0279a8b3f02630e8c20bc60952ef78a9">TypeID</a>)</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    { <span class="comment">/* we are using an unused item initialize it with the default multicast address */</span></div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;      pa_CPF_data-&gt;<a class="code" href="../../de/d1c/structS__CIP__CPF__Data.html#ae6feb1e1526c8c85d08b2c62b343f636">AddrInfo</a>[j].<a class="code" href="../../d5/d70/structS__SockAddrInfo__Item.html#a9806035f5fd2ec15324f4bb31e07434c">nsin_family</a> = htons(<a class="code" href="../../df/d24/archnw_8h.html#a9930604d0e32588eae76f43ca38e7826">AF_INET</a>);</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;      pa_CPF_data-&gt;<a class="code" href="../../de/d1c/structS__CIP__CPF__Data.html#ae6feb1e1526c8c85d08b2c62b343f636">AddrInfo</a>[j].<a class="code" href="../../d5/d70/structS__SockAddrInfo__Item.html#a4f280b2fb88b011e3d9f14bcaa0ff8f9">nsin_port</a> = htons(<a class="code" href="../../df/d03/cipioconnection_8c.html#a190a0e08c9d8f31cf09442fdb3c3671b">OPENER_EIP_IO_UDP_PORT</a>);</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;      pa_CPF_data-&gt;<a class="code" href="../../de/d1c/structS__CIP__CPF__Data.html#ae6feb1e1526c8c85d08b2c62b343f636">AddrInfo</a>[j].<a class="code" href="../../d5/d70/structS__SockAddrInfo__Item.html#a0ce9f9cb0d8d5114e5ce6954e4b04c7d">nsin_addr</a> =</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;          <a class="code" href="../../dd/d20/ciptcpipinterface_8c.html#a5ee5da7a701530920d8c84651bde8f49">g_stMultiCastconfig</a>.<a class="code" href="../../dc/d48/structSMcastConfig.html#ad6ff572692d8576278441b9f04b841b3">m_unMcastStartAddr</a>;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;      memset(pa_CPF_data-&gt;<a class="code" href="../../de/d1c/structS__CIP__CPF__Data.html#ae6feb1e1526c8c85d08b2c62b343f636">AddrInfo</a>[j].<a class="code" href="../../d5/d70/structS__SockAddrInfo__Item.html#a1641cc03aac9893021a96de78744a4c1">nasin_zero</a>, 0, 8);</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;      pa_CPF_data-&gt;<a class="code" href="../../de/d1c/structS__CIP__CPF__Data.html#ae6feb1e1526c8c85d08b2c62b343f636">AddrInfo</a>[j].<a class="code" href="../../d5/d70/structS__SockAddrInfo__Item.html#acd1402b222a3f1a56abc479b8ea0135f">Length</a> = 16;</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    }</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  <span class="keywordflow">if</span> (htons(<a class="code" href="../../df/d24/archnw_8h.html#a9930604d0e32588eae76f43ca38e7826">AF_INET</a>) != pa_CPF_data-&gt;<a class="code" href="../../de/d1c/structS__CIP__CPF__Data.html#ae6feb1e1526c8c85d08b2c62b343f636">AddrInfo</a>[j].<a class="code" href="../../d5/d70/structS__SockAddrInfo__Item.html#a9806035f5fd2ec15324f4bb31e07434c">nsin_family</a>)</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    {</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;      <a class="code" href="../../d1/d1b/trace_8h.html#a48f0d8056c030015f14cf5907315e6bb">OPENER_TRACE_ERR</a>(<span class="stringliteral">&quot;Sockaddr Info Item with wrong sin family value recieved\n&quot;</span>);</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d7/d69/typedefs_8h.html#adf0533b554c6a20e73928f231e5286d9aa2593a8a4cbf4566ee6f68f16e5115a6">EIP_ERROR</a>;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    }</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;  addr.<a class="code" href="../../de/d38/structsockaddr__in.html#a55e7794e0d51c51e0249aaa146b6575f">sin_family</a> = ntohs(pa_CPF_data-&gt;<a class="code" href="../../de/d1c/structS__CIP__CPF__Data.html#ae6feb1e1526c8c85d08b2c62b343f636">AddrInfo</a>[j].<a class="code" href="../../d5/d70/structS__SockAddrInfo__Item.html#a9806035f5fd2ec15324f4bb31e07434c">nsin_family</a>);</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;  addr.<a class="code" href="../../de/d38/structsockaddr__in.html#a4ea5f2f1138e5c8597097db255a9ec6c">sin_addr</a>.s_addr = pa_CPF_data-&gt;<a class="code" href="../../de/d1c/structS__CIP__CPF__Data.html#ae6feb1e1526c8c85d08b2c62b343f636">AddrInfo</a>[j].<a class="code" href="../../d5/d70/structS__SockAddrInfo__Item.html#a0ce9f9cb0d8d5114e5ce6954e4b04c7d">nsin_addr</a>;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;  addr.<a class="code" href="../../de/d38/structsockaddr__in.html#ad8774bdd0b8c65cbd01c03f07381ba03">sin_port</a> = pa_CPF_data-&gt;<a class="code" href="../../de/d1c/structS__CIP__CPF__Data.html#ae6feb1e1526c8c85d08b2c62b343f636">AddrInfo</a>[j].<a class="code" href="../../d5/d70/structS__SockAddrInfo__Item.html#a4f280b2fb88b011e3d9f14bcaa0ff8f9">nsin_port</a>;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;  newfd = <a class="code" href="../../d5/dc5/group__CIP__CALLBACK__API.html#ga9d7f3bd3280b10ad3cc4ed2f5dc9c339">IApp_CreateUDPSocket</a>(pa_direction, &amp;addr); <span class="comment">/* the address is only needed for bind used if consuming */</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;  <span class="keywordflow">if</span> (newfd == <a class="code" href="../../d7/d69/typedefs_8h.html#ace23313ab660889d73718853b644405e">EIP_INVALID_SOCKET</a>)</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    {</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;      <a class="code" href="../../d1/d1b/trace_8h.html#a48f0d8056c030015f14cf5907315e6bb">OPENER_TRACE_ERR</a>(<span class="stringliteral">&quot;cannot create UDP socket in OpenMulticastConnection\n&quot;</span>);</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d7/d69/typedefs_8h.html#adf0533b554c6a20e73928f231e5286d9aa2593a8a4cbf4566ee6f68f16e5115a6">EIP_ERROR</a>;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    }</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;  pa_pstConnObj-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a2ba9996aabd1d8fa2a7b21d63e8df9c3">sockfd</a>[pa_direction] = <a class="code" href="../../d0/d87/basiccip_8c.html#ae4b6440ca3750e54ba1fdd848fcaa59b">newfd</a>;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;  <span class="keywordflow">if</span> (pa_direction == <a class="code" href="../../d2/da3/cipconnectionmanager_8h.html#abe63966094bb9839304a78cf35a86e8f">CONSUMING</a>)</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    {</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;      pa_CPF_data-&gt;<a class="code" href="../../de/d1c/structS__CIP__CPF__Data.html#ae6feb1e1526c8c85d08b2c62b343f636">AddrInfo</a>[j].<a class="code" href="../../d5/d70/structS__SockAddrInfo__Item.html#a0279a8b3f02630e8c20bc60952ef78a9">TypeID</a> = <a class="code" href="../../d0/dff/cpf_8h.html#a7250c30ae63ae05258f8bb0239aad93e">CIP_ITEM_ID_SOCKADDRINFO_O_TO_T</a>;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;      pa_pstConnObj-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a1bb389bba849da33147b9ea58eb1a8dc">m_stOriginatorAddr</a> = addr;</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    }</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    {</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;      pa_CPF_data-&gt;<a class="code" href="../../de/d1c/structS__CIP__CPF__Data.html#ae6feb1e1526c8c85d08b2c62b343f636">AddrInfo</a>[j].<a class="code" href="../../d5/d70/structS__SockAddrInfo__Item.html#a0279a8b3f02630e8c20bc60952ef78a9">TypeID</a> = <a class="code" href="../../d0/dff/cpf_8h.html#afda749dea00e51310eb9748c22f70f67">CIP_ITEM_ID_SOCKADDRINFO_T_TO_O</a>;</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;      pa_pstConnObj-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a57854a4a37db4f762ce9bd58831f0063">remote_addr</a> = addr;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    }</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d7/d69/typedefs_8h.html#adf0533b554c6a20e73928f231e5286d9ac471acf92535c32126cd4d318f8175ef">EIP_OK</a>;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;}</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;<a class="code" href="../../d7/d69/typedefs_8h.html#a72b3e7231681538d97279aa001872297">EIP_UINT16</a></div>
<div class="line"><a name="l00511"></a><span class="lineno"><a class="line" href="../../df/d03/cipioconnection_8c.html#a9243c246dc6021572d661b9b923a6b7a">  511</a></span>&#160;<a class="code" href="../../df/d03/cipioconnection_8c.html#a9243c246dc6021572d661b9b923a6b7a">handleConfigData</a>(<a class="code" href="../../d5/de9/structCIP__Class.html">S_CIP_Class</a> *pa_pstAssemblyClass,</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    <a class="code" href="../../d9/db7/structCIP__ConnectionObject.html">S_CIP_ConnectionObject</a> *pa_pstIOConnObj)</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;{</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  <a class="code" href="../../d7/d69/typedefs_8h.html#a72b3e7231681538d97279aa001872297">EIP_UINT16</a> unRetVal = 0;</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  <a class="code" href="../../db/db2/structCIP__Instance.html">S_CIP_Instance</a> *pstConfigInstance = <a class="code" href="../../d2/dc9/group__CIP__API.html#ga9919da1c597955301da602a23a470801">getCIPInstance</a>(pa_pstAssemblyClass,</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;      pa_pstIOConnObj-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#af5773a8cf15183ed7ae09160813452a6">ConnectionPath</a>.<a class="code" href="../../df/dff/structCIPConnectionPath.html#a5d8a3709c9aa5edd081863163c93b8bf">ConnectionPoint</a>[2]);</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;  <span class="keywordflow">if</span> (0 != <a class="code" href="../../df/d03/cipioconnection_8c.html#a5c06aee6a78fae0cf97177e187dac727">g_unConfigDataLen</a>)</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    {</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d1/dbc/appcontype_8c.html#a557a4b1f4d98b88a3d147068e67567d8">connectionWithSameConfigPointExists</a>(</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;          pa_pstIOConnObj-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#af5773a8cf15183ed7ae09160813452a6">ConnectionPath</a>.<a class="code" href="../../df/dff/structCIPConnectionPath.html#a5d8a3709c9aa5edd081863163c93b8bf">ConnectionPoint</a>[2]))</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        { <span class="comment">/* there is a connected connection with the same config point</span></div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;<span class="comment">         * we have to have the same data as already present in the config point*/</span></div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;          <a class="code" href="../../d7/d0b/structCIPByteArray.html">S_CIP_Byte_Array</a> *p = (<a class="code" href="../../d7/d0b/structCIPByteArray.html">S_CIP_Byte_Array</a> *) <a class="code" href="../../d2/dc9/group__CIP__API.html#ga33fda1920669c922471cb6218c8b22b8">getAttribute</a>(</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;              pstConfigInstance, 3)-&gt;<a class="code" href="../../d9/d11/structCIPAttributeStruct.html#a19855fbf02dc9275a76a9b9b6e2ca36f">pt2data</a>;</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;          <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../d7/d0b/structCIPByteArray.html#a74d4bc9418608e446d4e7f6b7e5bfc8c">Length</a> != <a class="code" href="../../df/d03/cipioconnection_8c.html#a5c06aee6a78fae0cf97177e187dac727">g_unConfigDataLen</a>)</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;            {</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;              unRetVal = <a class="code" href="../../d2/da3/cipconnectionmanager_8h.html#af89280d5d1c081ec35f644a9289185c7">CIP_CON_MGR_ERROR_OWNERSHIP_CONFLICT</a>;</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;            }</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;            {</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;              <span class="comment">/*FIXME check if this is correct */</span></div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;              <span class="keywordflow">if</span> (memcmp(p-&gt;<a class="code" href="../../d7/d0b/structCIPByteArray.html#a657afd7f5d6eec8e9ad5fd84fac4c437">Data</a>, <a class="code" href="../../df/d03/cipioconnection_8c.html#a8160f1516e9aa813509d35f4e9ba8971">g_pnConfigDataBuffer</a>, <a class="code" href="../../df/d03/cipioconnection_8c.html#a5c06aee6a78fae0cf97177e187dac727">g_unConfigDataLen</a>))</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;                {</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;                  unRetVal = <a class="code" href="../../d2/da3/cipconnectionmanager_8h.html#af89280d5d1c081ec35f644a9289185c7">CIP_CON_MGR_ERROR_OWNERSHIP_CONFLICT</a>;</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;                }</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;            }</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;        }</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;        {</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;          <span class="comment">/*put the data on the configuration assembly object with the current</span></div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;<span class="comment">           design this can be done rather efficiently */</span></div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="../../d7/d69/typedefs_8h.html#adf0533b554c6a20e73928f231e5286d9ac471acf92535c32126cd4d318f8175ef">EIP_OK</a></div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;              != <a class="code" href="../../df/d2e/cipassembly_8c.html#aa7b96f3548d06cc3e293f8fb26a9cb0a">notifyAssemblyConnectedDataReceived</a>(pstConfigInstance,</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;                  <a class="code" href="../../df/d03/cipioconnection_8c.html#a8160f1516e9aa813509d35f4e9ba8971">g_pnConfigDataBuffer</a>, <a class="code" href="../../df/d03/cipioconnection_8c.html#a5c06aee6a78fae0cf97177e187dac727">g_unConfigDataLen</a>))</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;            {</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;              <a class="code" href="../../d1/d1b/trace_8h.html#aa1b39db9477c48695273170aff3c3a7a">OPENER_TRACE_WARN</a>(<span class="stringliteral">&quot;Configuration data was invalid\n&quot;</span>);</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;              unRetVal = <a class="code" href="../../d2/da3/cipconnectionmanager_8h.html#a40b7424c1403d086ac7aedf7bfb24e38">CIP_CON_MGR_INVALID_CONFIGURATION_APP_PATH</a>;</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;            }</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;        }</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    }</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;  <span class="keywordflow">return</span> unRetVal;</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;}</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;<span class="keywordtype">void</span></div>
<div class="line"><a name="l00556"></a><span class="lineno"><a class="line" href="../../df/d03/cipioconnection_8c.html#a2b592280d464553c451f653c1a45a052">  556</a></span>&#160;<a class="code" href="../../df/d03/cipioconnection_8c.html#a2b592280d464553c451f653c1a45a052">closeIOConnection</a>(<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html">S_CIP_ConnectionObject</a> *pa_pstConnObjData)</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;{</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;  <a class="code" href="../../d9/db7/structCIP__ConnectionObject.html">S_CIP_ConnectionObject</a> *pstNextNonCtrlMasterCon;</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;  <a class="code" href="../../d5/dc5/group__CIP__CALLBACK__API.html#ga69b8c5aa40b203bd08a0545402142216">IApp_IOConnectionEvent</a>(pa_pstConnObjData-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#af5773a8cf15183ed7ae09160813452a6">ConnectionPath</a>.<a class="code" href="../../df/dff/structCIPConnectionPath.html#a5d8a3709c9aa5edd081863163c93b8bf">ConnectionPoint</a>[0],</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;      pa_pstConnObjData-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#af5773a8cf15183ed7ae09160813452a6">ConnectionPath</a>.<a class="code" href="../../df/dff/structCIPConnectionPath.html#a5d8a3709c9aa5edd081863163c93b8bf">ConnectionPoint</a>[1], <a class="code" href="../../df/d28/ciptypes_8h.html#a47e9326e14025a4fc4287c3f233d23dda3b48d9d5c14f59727645ae9e89a384d2">enClosed</a>);</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;  <span class="keywordflow">if</span> ((<a class="code" href="../../d2/da3/cipconnectionmanager_8h.html#a992bfcf8c75709fe6a7be2ee4fa72605adbebb7cdb0f8e9fae922c6b11b6d790d">enConnTypeIOExclusiveOwner</a> == pa_pstConnObjData-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a5681ccd51b35afff155313b02754a0a7">m_eInstanceType</a>)</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;      || (<a class="code" href="../../d2/da3/cipconnectionmanager_8h.html#a992bfcf8c75709fe6a7be2ee4fa72605a130678dfca44ca6ffad76905f396ca19">enConnTypeIOInputOnly</a> == pa_pstConnObjData-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a5681ccd51b35afff155313b02754a0a7">m_eInstanceType</a>))</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    {</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;      <span class="keywordflow">if</span> ((<a class="code" href="../../d2/da3/cipconnectionmanager_8h.html#a0699386e1a578395d0d581890ba892e6">CIP_MULTICAST_CONNECTION</a></div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;          == (pa_pstConnObjData-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#ace277030c34e65ce16258b37e2420ea9">T_to_O_NetworkConnectionParameter</a></div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;              &amp; <a class="code" href="../../d2/da3/cipconnectionmanager_8h.html#a0699386e1a578395d0d581890ba892e6">CIP_MULTICAST_CONNECTION</a>))</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;          &amp;&amp; (<a class="code" href="../../d7/d69/typedefs_8h.html#ace23313ab660889d73718853b644405e">EIP_INVALID_SOCKET</a> != pa_pstConnObjData-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a2ba9996aabd1d8fa2a7b21d63e8df9c3">sockfd</a>[<a class="code" href="../../d2/da3/cipconnectionmanager_8h.html#a607c47622da3d77e7bf799a6125f4ef5">PRODUCING</a>]))</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        {</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;          pstNextNonCtrlMasterCon = <a class="code" href="../../d1/dbc/appcontype_8c.html#aeeda244766a510093c5c31e49710edb2">getNextNonCtrlMasterCon</a>(</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;              pa_pstConnObjData-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#af5773a8cf15183ed7ae09160813452a6">ConnectionPath</a>.<a class="code" href="../../df/dff/structCIPConnectionPath.html#a5d8a3709c9aa5edd081863163c93b8bf">ConnectionPoint</a>[1]);</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;          <span class="keywordflow">if</span> (NULL != pstNextNonCtrlMasterCon)</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;            {</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;              pstNextNonCtrlMasterCon-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a2ba9996aabd1d8fa2a7b21d63e8df9c3">sockfd</a>[<a class="code" href="../../d2/da3/cipconnectionmanager_8h.html#a607c47622da3d77e7bf799a6125f4ef5">PRODUCING</a>] =</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;                  pa_pstConnObjData-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a2ba9996aabd1d8fa2a7b21d63e8df9c3">sockfd</a>[<a class="code" href="../../d2/da3/cipconnectionmanager_8h.html#a607c47622da3d77e7bf799a6125f4ef5">PRODUCING</a>];</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;              memcpy(&amp;(pstNextNonCtrlMasterCon-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a57854a4a37db4f762ce9bd58831f0063">remote_addr</a>),</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;                  &amp;(pa_pstConnObjData-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a57854a4a37db4f762ce9bd58831f0063">remote_addr</a>),</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;                  <span class="keyword">sizeof</span>(pstNextNonCtrlMasterCon-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a57854a4a37db4f762ce9bd58831f0063">remote_addr</a>));</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;              pstNextNonCtrlMasterCon-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a3c85bd5d08fe2dcbff1cfa51a597ca26">EIPSequenceCountProducing</a> =</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;                  pa_pstConnObjData-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a3c85bd5d08fe2dcbff1cfa51a597ca26">EIPSequenceCountProducing</a>;</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;              pstNextNonCtrlMasterCon-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a51154981425c11b5facaac4a7e7e8f02">SequenceCountProducing</a> =</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;                  pa_pstConnObjData-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a51154981425c11b5facaac4a7e7e8f02">SequenceCountProducing</a>;</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;              pa_pstConnObjData-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a2ba9996aabd1d8fa2a7b21d63e8df9c3">sockfd</a>[<a class="code" href="../../d2/da3/cipconnectionmanager_8h.html#a607c47622da3d77e7bf799a6125f4ef5">PRODUCING</a>] = <a class="code" href="../../d7/d69/typedefs_8h.html#ace23313ab660889d73718853b644405e">EIP_INVALID_SOCKET</a>;</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;              pstNextNonCtrlMasterCon-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#aefd6577bc5bc4b1da833675af80b8420">TransmissionTriggerTimer</a> =</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;                  pa_pstConnObjData-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#aefd6577bc5bc4b1da833675af80b8420">TransmissionTriggerTimer</a>;</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;            }</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;            { <span class="comment">/* this was the last master connection close all listen only connections listening on the port */</span></div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;              <a class="code" href="../../d1/dbc/appcontype_8c.html#a55477541835f20888759b441419c1ea4">closeAllConnsForInputWithSameType</a>(</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;                  pa_pstConnObjData-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#af5773a8cf15183ed7ae09160813452a6">ConnectionPath</a>.<a class="code" href="../../df/dff/structCIPConnectionPath.html#a5d8a3709c9aa5edd081863163c93b8bf">ConnectionPoint</a>[1],</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;                  <a class="code" href="../../d2/da3/cipconnectionmanager_8h.html#a992bfcf8c75709fe6a7be2ee4fa72605ad20b557288c19f4396c3b92ba3af678b">enConnTypeIOListenOnly</a>);</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;            }</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        }</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    }</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;  <a class="code" href="../../df/d03/cipioconnection_8c.html#a3aa0de23bee41939b97836678ee48e39">closeCommChannelsAndRemoveFromActiveConnsList</a>(pa_pstConnObjData);</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;}</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;<span class="keywordtype">void</span></div>
<div class="line"><a name="l00601"></a><span class="lineno"><a class="line" href="../../df/d03/cipioconnection_8c.html#aca969065c50443a0e464dbe318de06d4">  601</a></span>&#160;<a class="code" href="../../df/d03/cipioconnection_8c.html#aca969065c50443a0e464dbe318de06d4">handleIOConnectionTimeOut</a>(<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html">S_CIP_ConnectionObject</a> *pa_pstConn)</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;{</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;  <a class="code" href="../../d9/db7/structCIP__ConnectionObject.html">S_CIP_ConnectionObject</a> *pstNextNonCtrlMasterCon;</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;  <a class="code" href="../../d5/dc5/group__CIP__CALLBACK__API.html#ga69b8c5aa40b203bd08a0545402142216">IApp_IOConnectionEvent</a>(pa_pstConn-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#af5773a8cf15183ed7ae09160813452a6">ConnectionPath</a>.<a class="code" href="../../df/dff/structCIPConnectionPath.html#a5d8a3709c9aa5edd081863163c93b8bf">ConnectionPoint</a>[0],</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;      pa_pstConn-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#af5773a8cf15183ed7ae09160813452a6">ConnectionPath</a>.<a class="code" href="../../df/dff/structCIPConnectionPath.html#a5d8a3709c9aa5edd081863163c93b8bf">ConnectionPoint</a>[1], <a class="code" href="../../df/d28/ciptypes_8h.html#a47e9326e14025a4fc4287c3f233d23dda75bfb3635ff4ac5b218a07d87f8b2185">enTimedOut</a>);</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d2/da3/cipconnectionmanager_8h.html#a0699386e1a578395d0d581890ba892e6">CIP_MULTICAST_CONNECTION</a></div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;      == (pa_pstConn-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#ace277030c34e65ce16258b37e2420ea9">T_to_O_NetworkConnectionParameter</a></div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;          &amp; <a class="code" href="../../d2/da3/cipconnectionmanager_8h.html#a0699386e1a578395d0d581890ba892e6">CIP_MULTICAST_CONNECTION</a>))</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    {</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;      <span class="keywordflow">switch</span> (pa_pstConn-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a5681ccd51b35afff155313b02754a0a7">m_eInstanceType</a>)</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;        {</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d2/da3/cipconnectionmanager_8h.html#a992bfcf8c75709fe6a7be2ee4fa72605adbebb7cdb0f8e9fae922c6b11b6d790d">enConnTypeIOExclusiveOwner</a>:</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;        <a class="code" href="../../d1/dbc/appcontype_8c.html#a55477541835f20888759b441419c1ea4">closeAllConnsForInputWithSameType</a>(</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;            pa_pstConn-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#af5773a8cf15183ed7ae09160813452a6">ConnectionPath</a>.<a class="code" href="../../df/dff/structCIPConnectionPath.html#a5d8a3709c9aa5edd081863163c93b8bf">ConnectionPoint</a>[1],</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;            <a class="code" href="../../d2/da3/cipconnectionmanager_8h.html#a992bfcf8c75709fe6a7be2ee4fa72605a130678dfca44ca6ffad76905f396ca19">enConnTypeIOInputOnly</a>);</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;        <a class="code" href="../../d1/dbc/appcontype_8c.html#a55477541835f20888759b441419c1ea4">closeAllConnsForInputWithSameType</a>(</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;            pa_pstConn-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#af5773a8cf15183ed7ae09160813452a6">ConnectionPath</a>.<a class="code" href="../../df/dff/structCIPConnectionPath.html#a5d8a3709c9aa5edd081863163c93b8bf">ConnectionPoint</a>[1],</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;            <a class="code" href="../../d2/da3/cipconnectionmanager_8h.html#a992bfcf8c75709fe6a7be2ee4fa72605ad20b557288c19f4396c3b92ba3af678b">enConnTypeIOListenOnly</a>);</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d2/da3/cipconnectionmanager_8h.html#a992bfcf8c75709fe6a7be2ee4fa72605a130678dfca44ca6ffad76905f396ca19">enConnTypeIOInputOnly</a>:</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d7/d69/typedefs_8h.html#ace23313ab660889d73718853b644405e">EIP_INVALID_SOCKET</a> != pa_pstConn-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a2ba9996aabd1d8fa2a7b21d63e8df9c3">sockfd</a>[<a class="code" href="../../d2/da3/cipconnectionmanager_8h.html#a607c47622da3d77e7bf799a6125f4ef5">PRODUCING</a>])</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;          { <span class="comment">/* we are the controlling input only connection find a new controller*/</span></div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;            pstNextNonCtrlMasterCon = <a class="code" href="../../d1/dbc/appcontype_8c.html#aeeda244766a510093c5c31e49710edb2">getNextNonCtrlMasterCon</a>(</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;                pa_pstConn-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#af5773a8cf15183ed7ae09160813452a6">ConnectionPath</a>.<a class="code" href="../../df/dff/structCIPConnectionPath.html#a5d8a3709c9aa5edd081863163c93b8bf">ConnectionPoint</a>[1]);</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;            <span class="keywordflow">if</span> (NULL != pstNextNonCtrlMasterCon)</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;              {</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;                pstNextNonCtrlMasterCon-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a2ba9996aabd1d8fa2a7b21d63e8df9c3">sockfd</a>[<a class="code" href="../../d2/da3/cipconnectionmanager_8h.html#a607c47622da3d77e7bf799a6125f4ef5">PRODUCING</a>] =</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;                    pa_pstConn-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a2ba9996aabd1d8fa2a7b21d63e8df9c3">sockfd</a>[<a class="code" href="../../d2/da3/cipconnectionmanager_8h.html#a607c47622da3d77e7bf799a6125f4ef5">PRODUCING</a>];</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;                pa_pstConn-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a2ba9996aabd1d8fa2a7b21d63e8df9c3">sockfd</a>[<a class="code" href="../../d2/da3/cipconnectionmanager_8h.html#a607c47622da3d77e7bf799a6125f4ef5">PRODUCING</a>] = <a class="code" href="../../d7/d69/typedefs_8h.html#ace23313ab660889d73718853b644405e">EIP_INVALID_SOCKET</a>;</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;                pstNextNonCtrlMasterCon-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#aefd6577bc5bc4b1da833675af80b8420">TransmissionTriggerTimer</a> =</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;                    pa_pstConn-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#aefd6577bc5bc4b1da833675af80b8420">TransmissionTriggerTimer</a>;</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;              }</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;              { <span class="comment">/* this was the last master connection close all listen only connections listening on the port */</span></div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;                <a class="code" href="../../d1/dbc/appcontype_8c.html#a55477541835f20888759b441419c1ea4">closeAllConnsForInputWithSameType</a>(</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;                    pa_pstConn-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#af5773a8cf15183ed7ae09160813452a6">ConnectionPath</a>.<a class="code" href="../../df/dff/structCIPConnectionPath.html#a5d8a3709c9aa5edd081863163c93b8bf">ConnectionPoint</a>[1],</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;                    <a class="code" href="../../d2/da3/cipconnectionmanager_8h.html#a992bfcf8c75709fe6a7be2ee4fa72605ad20b557288c19f4396c3b92ba3af678b">enConnTypeIOListenOnly</a>);</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;              }</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;          }</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;      <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;        }</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    }</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;  <a class="code" href="../../dc/d75/LM3S8962_2sample__application_2opener__user__conf_8h.html#a7b5e7d71f666ba97788b35be1617c40a">OPENER_ASSERT</a>(NULL != pa_pstConn-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a47205cc202e3206af76d2c8928151083">m_pfCloseFunc</a>);</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;  pa_pstConn-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a47205cc202e3206af76d2c8928151083">m_pfCloseFunc</a>(pa_pstConn);</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;}</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;<a class="code" href="../../d7/d69/typedefs_8h.html#adf0533b554c6a20e73928f231e5286d9">EIP_STATUS</a></div>
<div class="line"><a name="l00652"></a><span class="lineno"><a class="line" href="../../df/d03/cipioconnection_8c.html#a93b2d7ce5fd9c7bf5583f738e09bd914">  652</a></span>&#160;<a class="code" href="../../df/d03/cipioconnection_8c.html#a93b2d7ce5fd9c7bf5583f738e09bd914">sendConnectedData</a>(<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html">S_CIP_ConnectionObject</a> *pa_pstConnection)</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;{</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;  <a class="code" href="../../de/d1c/structS__CIP__CPF__Data.html">S_CIP_CPF_Data</a> *pCPFDataItem;</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;  <a class="code" href="../../d7/d0b/structCIPByteArray.html">S_CIP_Byte_Array</a> *p;</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;  <a class="code" href="../../d7/d69/typedefs_8h.html#a72b3e7231681538d97279aa001872297">EIP_UINT16</a> replylength;</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;  <a class="code" href="../../d7/d69/typedefs_8h.html#a811fdad4b361d09293f3bd0b814b8e18">EIP_UINT8</a> *pnBuf;</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;  <span class="comment">/* TODO think of adding an own send buffer to each connection object in order to preset up the whole message on connection opening and just change the variable data items e.g., sequence number */</span></div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;  pCPFDataItem = &amp;<a class="code" href="../../d4/d91/group__ENCAP.html#ga00e4db57a2684c23db31f0eef084b26b">g_stCPFDataItem</a>; <span class="comment">/* TODO think on adding a CPF data item to the S_CIP_ConnectionObject in order to remove the code here or even better allocate memory in the connection object for storing the message to send and just change the application data*/</span></div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;  pa_pstConnection-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a3c85bd5d08fe2dcbff1cfa51a597ca26">EIPSequenceCountProducing</a>++;</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;  <span class="comment">/* assembleCPFData */</span></div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;  pCPFDataItem-&gt;<a class="code" href="../../de/d1c/structS__CIP__CPF__Data.html#aa7a5f0b68ad6b89cbbd6b060325961a8">ItemCount</a> = 2;</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;  <span class="keywordflow">if</span> ((pa_pstConnection-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#ac097ff6b38fea770e9838bc10a5338b6">TransportTypeClassTrigger</a> &amp; 0x0F) != 0)</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    { <span class="comment">/* use Sequenced Address Items if not Connection Class 0 */</span></div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;      pCPFDataItem-&gt;<a class="code" href="../../de/d1c/structS__CIP__CPF__Data.html#a1a3546f45ba4f7add7434efc38162881">stAddr_Item</a>.<a class="code" href="../../dc/dad/structS__Address__Item.html#a0c191818b22226b96076f7312caf2f7e">TypeID</a> = <a class="code" href="../../d0/dff/cpf_8h.html#af10c60dd89c3a1abad693b8d70da0d8d">CIP_ITEM_ID_SEQUENCEDADDRESS</a>;</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;      pCPFDataItem-&gt;<a class="code" href="../../de/d1c/structS__CIP__CPF__Data.html#a1a3546f45ba4f7add7434efc38162881">stAddr_Item</a>.<a class="code" href="../../dc/dad/structS__Address__Item.html#a173a58ddc7e5e438adece99cb14417dc">Length</a> = 8;</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;      pCPFDataItem-&gt;<a class="code" href="../../de/d1c/structS__CIP__CPF__Data.html#a1a3546f45ba4f7add7434efc38162881">stAddr_Item</a>.<a class="code" href="../../dc/dad/structS__Address__Item.html#a13d25cc3a23f78e9f0f1bb6a90515257">Data</a>.<a class="code" href="../../d7/d91/structS__Address__Data.html#adf2ac27b108d257bf3428fd6b5c58ef0">SequenceNumber</a> =</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;          pa_pstConnection-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a3c85bd5d08fe2dcbff1cfa51a597ca26">EIPSequenceCountProducing</a>;</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    }</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    {</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;      pCPFDataItem-&gt;<a class="code" href="../../de/d1c/structS__CIP__CPF__Data.html#a1a3546f45ba4f7add7434efc38162881">stAddr_Item</a>.<a class="code" href="../../dc/dad/structS__Address__Item.html#a0c191818b22226b96076f7312caf2f7e">TypeID</a> = <a class="code" href="../../d0/dff/cpf_8h.html#a52f19583aa97847eb170d3aca964ab70">CIP_ITEM_ID_CONNECTIONBASED</a>;</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;      pCPFDataItem-&gt;<a class="code" href="../../de/d1c/structS__CIP__CPF__Data.html#a1a3546f45ba4f7add7434efc38162881">stAddr_Item</a>.<a class="code" href="../../dc/dad/structS__Address__Item.html#a173a58ddc7e5e438adece99cb14417dc">Length</a> = 4;</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    }</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;  pCPFDataItem-&gt;<a class="code" href="../../de/d1c/structS__CIP__CPF__Data.html#a1a3546f45ba4f7add7434efc38162881">stAddr_Item</a>.<a class="code" href="../../dc/dad/structS__Address__Item.html#a13d25cc3a23f78e9f0f1bb6a90515257">Data</a>.<a class="code" href="../../d7/d91/structS__Address__Data.html#a95f0e883c0c8f54f90a7bec1f7dd8adf">ConnectionIdentifier</a> =</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;      pa_pstConnection-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#ab27250efaf96f6a8833c732da52c50c1">CIPProducedConnectionID</a>;</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;  pCPFDataItem-&gt;<a class="code" href="../../de/d1c/structS__CIP__CPF__Data.html#a6f8e906a9d6209d20c50d1ea81fe5b12">stDataI_Item</a>.<a class="code" href="../../d6/d2b/structS__Data__Item.html#a1e4cab0b636544096d2ab066a8e8ffd7">TypeID</a> = <a class="code" href="../../d0/dff/cpf_8h.html#ad598c330f224680744ab8e184d0506a1">CIP_ITEM_ID_CONNECTIONTRANSPORTPACKET</a>;</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;  p =</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;      (<a class="code" href="../../d7/d0b/structCIPByteArray.html">S_CIP_Byte_Array</a> *) pa_pstConnection-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#add228c9f3a98587ab9ce3e7f27d7ab0c">p_stProducingInstance</a>-&gt;<a class="code" href="../../db/db2/structCIP__Instance.html#a4cdbccd22523fc98961d4c92e6838c4a">pstAttributes</a>-&gt;<a class="code" href="../../d9/d11/structCIPAttributeStruct.html#a19855fbf02dc9275a76a9b9b6e2ca36f">pt2data</a>;</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;  pCPFDataItem-&gt;<a class="code" href="../../de/d1c/structS__CIP__CPF__Data.html#a6f8e906a9d6209d20c50d1ea81fe5b12">stDataI_Item</a>.<a class="code" href="../../d6/d2b/structS__Data__Item.html#a5716491ec21612a7714e6d26afbca1f8">Length</a> = 0;</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;  <span class="comment">/* notify the application that data will be sent immediately after the call */</span></div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;  if (<a class="code" href="../../d5/dc5/group__CIP__CALLBACK__API.html#ga88bb762476768e89925e4d8b3e27fdc4">IApp_BeforeAssemblyDataSend</a>(pa_pstConnection-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#add228c9f3a98587ab9ce3e7f27d7ab0c">p_stProducingInstance</a>))</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    {</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;      <span class="comment">/* the data has changed increase sequence counter */</span></div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;      pa_pstConnection-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a51154981425c11b5facaac4a7e7e8f02">SequenceCountProducing</a>++;</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    }</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;  <span class="comment">/* set AddressInfo Items to invalid Type */</span></div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;  pCPFDataItem-&gt;<a class="code" href="../../de/d1c/structS__CIP__CPF__Data.html#ae6feb1e1526c8c85d08b2c62b343f636">AddrInfo</a>[0].<a class="code" href="../../d5/d70/structS__SockAddrInfo__Item.html#a0279a8b3f02630e8c20bc60952ef78a9">TypeID</a> = 0;</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;  pCPFDataItem-&gt;<a class="code" href="../../de/d1c/structS__CIP__CPF__Data.html#ae6feb1e1526c8c85d08b2c62b343f636">AddrInfo</a>[1].<a class="code" href="../../d5/d70/structS__SockAddrInfo__Item.html#a0279a8b3f02630e8c20bc60952ef78a9">TypeID</a> = 0;</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;  replylength = <a class="code" href="../../d4/d91/group__ENCAP.html#ga2336d8a977ed1fc7cf4704823cb3039e">assembleLinearMsg</a>(0, pCPFDataItem,</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;      &amp;<a class="code" href="../../d2/d3d/cipcommon_8c.html#a32a1fbeeeb95c6253767bcf100af01ce">g_acMessageDataReplyBuffer</a>[0]);</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;  pnBuf = &amp;<a class="code" href="../../d2/d3d/cipcommon_8c.html#a32a1fbeeeb95c6253767bcf100af01ce">g_acMessageDataReplyBuffer</a>[replylength - 2];</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;  pCPFDataItem-&gt;<a class="code" href="../../de/d1c/structS__CIP__CPF__Data.html#a6f8e906a9d6209d20c50d1ea81fe5b12">stDataI_Item</a>.<a class="code" href="../../d6/d2b/structS__Data__Item.html#a5716491ec21612a7714e6d26afbca1f8">Length</a> = p-&gt;<a class="code" href="../../d7/d0b/structCIPByteArray.html#a74d4bc9418608e446d4e7f6b7e5bfc8c">Length</a>;</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../dc/d75/LM3S8962_2sample__application_2opener__user__conf_8h.html#aee16f150a7d925445e763ff326b610e8">OPENER_PRODUCED_DATA_HAS_RUN_IDLE_HEADER</a>)</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    {</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;      pCPFDataItem-&gt;<a class="code" href="../../de/d1c/structS__CIP__CPF__Data.html#a6f8e906a9d6209d20c50d1ea81fe5b12">stDataI_Item</a>.<a class="code" href="../../d6/d2b/structS__Data__Item.html#a5716491ec21612a7714e6d26afbca1f8">Length</a> += 4;</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    }</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;  <span class="keywordflow">if</span> ((pa_pstConnection-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#ac097ff6b38fea770e9838bc10a5338b6">TransportTypeClassTrigger</a> &amp; 0x0F) == 1)</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    {</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;      pCPFDataItem-&gt;<a class="code" href="../../de/d1c/structS__CIP__CPF__Data.html#a6f8e906a9d6209d20c50d1ea81fe5b12">stDataI_Item</a>.<a class="code" href="../../d6/d2b/structS__Data__Item.html#a5716491ec21612a7714e6d26afbca1f8">Length</a> += 2;</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;      <a class="code" href="../../d4/d91/group__ENCAP.html#ga738d386bb3919d75bb14dcb40ca5389f">htols</a>(pCPFDataItem-&gt;<a class="code" href="../../de/d1c/structS__CIP__CPF__Data.html#a6f8e906a9d6209d20c50d1ea81fe5b12">stDataI_Item</a>.<a class="code" href="../../d6/d2b/structS__Data__Item.html#a5716491ec21612a7714e6d26afbca1f8">Length</a>, &amp;pnBuf);</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;      <a class="code" href="../../d4/d91/group__ENCAP.html#ga738d386bb3919d75bb14dcb40ca5389f">htols</a>(pa_pstConnection-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a51154981425c11b5facaac4a7e7e8f02">SequenceCountProducing</a>, &amp;pnBuf);</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    }</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    {</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;      <a class="code" href="../../d4/d91/group__ENCAP.html#ga738d386bb3919d75bb14dcb40ca5389f">htols</a>(pCPFDataItem-&gt;<a class="code" href="../../de/d1c/structS__CIP__CPF__Data.html#a6f8e906a9d6209d20c50d1ea81fe5b12">stDataI_Item</a>.<a class="code" href="../../d6/d2b/structS__Data__Item.html#a5716491ec21612a7714e6d26afbca1f8">Length</a>, &amp;pnBuf);</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    }</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../dc/d75/LM3S8962_2sample__application_2opener__user__conf_8h.html#aee16f150a7d925445e763ff326b610e8">OPENER_PRODUCED_DATA_HAS_RUN_IDLE_HEADER</a>)</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    {</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;      <a class="code" href="../../d4/d91/group__ENCAP.html#gaa00e394da5cd80135cdab7d4f3d88819">htoll</a>(<a class="code" href="../../df/d03/cipioconnection_8c.html#a48ed327ec7ab3a482159eaa61b8d0a1b">g_nRunIdleState</a>, &amp;(pnBuf));</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    }</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;  memcpy(pnBuf, p-&gt;<a class="code" href="../../d7/d0b/structCIPByteArray.html#a657afd7f5d6eec8e9ad5fd84fac4c437">Data</a>, p-&gt;<a class="code" href="../../d7/d0b/structCIPByteArray.html#a74d4bc9418608e446d4e7f6b7e5bfc8c">Length</a>);</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;  replylength += pCPFDataItem-&gt;<a class="code" href="../../de/d1c/structS__CIP__CPF__Data.html#a6f8e906a9d6209d20c50d1ea81fe5b12">stDataI_Item</a>.<a class="code" href="../../d6/d2b/structS__Data__Item.html#a5716491ec21612a7714e6d26afbca1f8">Length</a>;</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d5/dc5/group__CIP__CALLBACK__API.html#gabe8a4c7e971381f2ee46db5148aecf47">IApp_SendUDPData</a>(&amp;pa_pstConnection-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a57854a4a37db4f762ce9bd58831f0063">remote_addr</a>,</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;      pa_pstConnection-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a2ba9996aabd1d8fa2a7b21d63e8df9c3">sockfd</a>[<a class="code" href="../../d2/da3/cipconnectionmanager_8h.html#a607c47622da3d77e7bf799a6125f4ef5">PRODUCING</a>], &amp;<a class="code" href="../../d2/d3d/cipcommon_8c.html#a32a1fbeeeb95c6253767bcf100af01ce">g_acMessageDataReplyBuffer</a>[0],</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;      replylength);</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;}</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;<a class="code" href="../../d7/d69/typedefs_8h.html#adf0533b554c6a20e73928f231e5286d9">EIP_STATUS</a></div>
<div class="line"><a name="l00736"></a><span class="lineno"><a class="line" href="../../df/d03/cipioconnection_8c.html#a0a63c015bc216d71e9cb1781472ce8df">  736</a></span>&#160;<a class="code" href="../../df/d03/cipioconnection_8c.html#a0a63c015bc216d71e9cb1781472ce8df">handleReceivedIOConnData</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/db7/structCIP__ConnectionObject.html">CIP_ConnectionObject</a> *pa_pstConnection,</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    <a class="code" href="../../d7/d69/typedefs_8h.html#a811fdad4b361d09293f3bd0b814b8e18">EIP_UINT8</a> * pa_pnData, <a class="code" href="../../d7/d69/typedefs_8h.html#a72b3e7231681538d97279aa001872297">EIP_UINT16</a> pa_nDataLength)</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;{</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;  <span class="comment">/* check class 1 sequence number*/</span></div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;  <span class="keywordflow">if</span> ((pa_pstConnection-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#ac097ff6b38fea770e9838bc10a5338b6">TransportTypeClassTrigger</a> &amp; 0x0F) == 1)</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    {</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;      <a class="code" href="../../d7/d69/typedefs_8h.html#a72b3e7231681538d97279aa001872297">EIP_UINT16</a> nSequenceBuf = <a class="code" href="../../d4/d91/group__ENCAP.html#ga6ce01de4023c01608d2bdfdb584d59d3">ltohs</a>(&amp;(pa_pnData));</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d2/da3/cipconnectionmanager_8h.html#aa90301ce80009301ef74637f50a79e69">SEQ_LEQ16</a>(nSequenceBuf, pa_pstConnection-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#af8c9922ed43814f27e0f42d0635c59d0">SequenceCountConsuming</a>))</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;        {</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="../../d7/d69/typedefs_8h.html#adf0533b554c6a20e73928f231e5286d9ac471acf92535c32126cd4d318f8175ef">EIP_OK</a>; <span class="comment">/* no new data for the assembly */</span></div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;        }</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;      pa_pstConnection-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#af8c9922ed43814f27e0f42d0635c59d0">SequenceCountConsuming</a> = nSequenceBuf;</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;      pa_nDataLength -= 2;</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    }</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;  <span class="keywordflow">if</span> (pa_nDataLength &gt; 0)</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    {</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;      <span class="comment">/* we have no heartbeat connection */</span></div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dc/d75/LM3S8962_2sample__application_2opener__user__conf_8h.html#a84bdbf10caa9e750b3746d5f20e1845f">OPENER_CONSUMED_DATA_HAS_RUN_IDLE_HEADER</a>)</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;        {</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;          <a class="code" href="../../d7/d69/typedefs_8h.html#a4f1d71ddb23827c1af144276d0dd1947">EIP_UINT32</a> nRunIdleBuf = <a class="code" href="../../d4/d91/group__ENCAP.html#ga4ac7387e49002d26462d7cdd094d238a">ltohl</a>(&amp;(pa_pnData));</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="../../df/d03/cipioconnection_8c.html#a48ed327ec7ab3a482159eaa61b8d0a1b">g_nRunIdleState</a> != nRunIdleBuf)</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;            {</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;              <a class="code" href="../../d5/dc5/group__CIP__CALLBACK__API.html#ga53222a07ad77b3f69a032ce81b66e659">IApp_RunIdleChanged</a>(nRunIdleBuf);</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;            }</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;          <a class="code" href="../../df/d03/cipioconnection_8c.html#a48ed327ec7ab3a482159eaa61b8d0a1b">g_nRunIdleState</a> = nRunIdleBuf;</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;          pa_nDataLength -= 4;</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;        }</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d2e/cipassembly_8c.html#aa7b96f3548d06cc3e293f8fb26a9cb0a">notifyAssemblyConnectedDataReceived</a>(</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;          pa_pstConnection-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#ad72e27b79af2051388b99f672b0ed79f">p_stConsumingInstance</a>, pa_pnData, pa_nDataLength)</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;          != 0)</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;        {</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="../../d7/d69/typedefs_8h.html#adf0533b554c6a20e73928f231e5286d9aa2593a8a4cbf4566ee6f68f16e5115a6">EIP_ERROR</a>;</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;        }</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    }</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d7/d69/typedefs_8h.html#adf0533b554c6a20e73928f231e5286d9ac471acf92535c32126cd4d318f8175ef">EIP_OK</a>;</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;}</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;<span class="keywordtype">int</span></div>
<div class="line"><a name="l00777"></a><span class="lineno"><a class="line" href="../../de/d45/cipioconnection_8h.html#a667690c04e476a38fa3b8e555a812e44">  777</a></span>&#160;<a class="code" href="../../df/d03/cipioconnection_8c.html#a667690c04e476a38fa3b8e555a812e44">openCommunicationChannels</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/db7/structCIP__ConnectionObject.html">CIP_ConnectionObject</a> *pa_pstIOConnObj)</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;{</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;  <span class="keywordtype">int</span> O2TConnectionType, T2OConnectionType;</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;  <span class="keywordtype">int</span> nRetVal = <a class="code" href="../../d7/d69/typedefs_8h.html#adf0533b554c6a20e73928f231e5286d9ac471acf92535c32126cd4d318f8175ef">EIP_OK</a>;</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;  <span class="comment">/*get pointer to the cpf data, currently we have just one global instance of the struct. This may change in the future*/</span></div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;  <a class="code" href="../../de/d1c/structS__CIP__CPF__Data.html">S_CIP_CPF_Data</a> *pstCPF_data = &amp;<a class="code" href="../../d4/d91/group__ENCAP.html#ga00e4db57a2684c23db31f0eef084b26b">g_stCPFDataItem</a>;</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;  O2TConnectionType = (pa_pstIOConnObj-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#afd5ab4965b04f8ae1198cb6aa89de99c">O_to_T_NetworkConnectionParameter</a></div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;      &amp; 0x6000) &gt;&gt; 13;</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;  T2OConnectionType = (pa_pstIOConnObj-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#ace277030c34e65ce16258b37e2420ea9">T_to_O_NetworkConnectionParameter</a></div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;      &amp; 0x6000) &gt;&gt; 13;</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;  <span class="comment">/* open a connection &quot;point to point&quot; or &quot;multicast&quot; based on the ConnectionParameter */</span></div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;  <span class="keywordflow">if</span> (O2TConnectionType == 1) <span class="comment">/* Multicast consuming */</span></div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    {</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d03/cipioconnection_8c.html#a082f6fee564e932e77a812908de1c3ce">OpenMulticastConnection</a>(<a class="code" href="../../d2/da3/cipconnectionmanager_8h.html#abe63966094bb9839304a78cf35a86e8f">CONSUMING</a>, pa_pstIOConnObj, pstCPF_data)</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;          == <a class="code" href="../../d7/d69/typedefs_8h.html#adf0533b554c6a20e73928f231e5286d9aa2593a8a4cbf4566ee6f68f16e5115a6">EIP_ERROR</a>)</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;        {</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;          <a class="code" href="../../d1/d1b/trace_8h.html#a48f0d8056c030015f14cf5907315e6bb">OPENER_TRACE_ERR</a>(<span class="stringliteral">&quot;error in OpenMulticast Connection\n&quot;</span>);</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="../../d6/d52/ciperror_8h.html#a4295b59f4098d9d45991b5cc0f2c6787">CIP_ERROR_CONNECTION_FAILURE</a>;</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;        }</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    }</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (O2TConnectionType == 2) <span class="comment">/* Point to Point consuming */</span></div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    {</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d03/cipioconnection_8c.html#a5528cb41b78cd5f5641a3666dcc1177d">OpenConsumingPointToPointConnection</a>(pa_pstIOConnObj, pstCPF_data)</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;          == <a class="code" href="../../d7/d69/typedefs_8h.html#adf0533b554c6a20e73928f231e5286d9aa2593a8a4cbf4566ee6f68f16e5115a6">EIP_ERROR</a>)</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;        {</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;          <a class="code" href="../../d1/d1b/trace_8h.html#a48f0d8056c030015f14cf5907315e6bb">OPENER_TRACE_ERR</a>(<span class="stringliteral">&quot;error in PointToPoint consuming connection\n&quot;</span>);</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="../../d6/d52/ciperror_8h.html#a4295b59f4098d9d45991b5cc0f2c6787">CIP_ERROR_CONNECTION_FAILURE</a>;</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;        }</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    }</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;  <span class="keywordflow">if</span> (T2OConnectionType == 1) <span class="comment">/* Multicast producing */</span></div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    {</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d03/cipioconnection_8c.html#a7e4d255d4b152b39dc1e9678094685f9">openProducingMulticastConnection</a>(pa_pstIOConnObj, pstCPF_data)</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;          == <a class="code" href="../../d7/d69/typedefs_8h.html#adf0533b554c6a20e73928f231e5286d9aa2593a8a4cbf4566ee6f68f16e5115a6">EIP_ERROR</a>)</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;        {</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;          <a class="code" href="../../d1/d1b/trace_8h.html#a48f0d8056c030015f14cf5907315e6bb">OPENER_TRACE_ERR</a>(<span class="stringliteral">&quot;error in OpenMulticast Connection\n&quot;</span>);</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="../../d6/d52/ciperror_8h.html#a4295b59f4098d9d45991b5cc0f2c6787">CIP_ERROR_CONNECTION_FAILURE</a>;</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;        }</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    }</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (T2OConnectionType == 2) <span class="comment">/* Point to Point producing */</span></div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;    {</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d03/cipioconnection_8c.html#a309b521bf439ca702ce2895e0a4390c5">OpenProducingPointToPointConnection</a>(pa_pstIOConnObj, pstCPF_data)</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;          != <a class="code" href="../../d7/d69/typedefs_8h.html#adf0533b554c6a20e73928f231e5286d9ac471acf92535c32126cd4d318f8175ef">EIP_OK</a>)</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;        {</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;          <a class="code" href="../../d1/d1b/trace_8h.html#a48f0d8056c030015f14cf5907315e6bb">OPENER_TRACE_ERR</a>(<span class="stringliteral">&quot;error in PointToPoint producing connection\n&quot;</span>);</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="../../d6/d52/ciperror_8h.html#a4295b59f4098d9d45991b5cc0f2c6787">CIP_ERROR_CONNECTION_FAILURE</a>;</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;        }</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    }</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;  <span class="keywordflow">return</span> nRetVal;</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;}</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;<span class="keywordtype">void</span></div>
<div class="line"><a name="l00833"></a><span class="lineno"><a class="line" href="../../de/d45/cipioconnection_8h.html#a3aa0de23bee41939b97836678ee48e39">  833</a></span>&#160;<a class="code" href="../../df/d03/cipioconnection_8c.html#a3aa0de23bee41939b97836678ee48e39">closeCommChannelsAndRemoveFromActiveConnsList</a>(</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    <span class="keyword">struct</span> <a class="code" href="../../d9/db7/structCIP__ConnectionObject.html">CIP_ConnectionObject</a> *pa_pstConnObjData)</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;{</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;  <a class="code" href="../../d5/d07/LM3S8962_2networkhandler_8c.html#ace50de555ae5f54fef339d9e66a34f80">IApp_CloseSocket_udp</a>(pa_pstConnObjData-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a2ba9996aabd1d8fa2a7b21d63e8df9c3">sockfd</a>[<a class="code" href="../../d2/da3/cipconnectionmanager_8h.html#abe63966094bb9839304a78cf35a86e8f">CONSUMING</a>]);</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;  pa_pstConnObjData-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a2ba9996aabd1d8fa2a7b21d63e8df9c3">sockfd</a>[<a class="code" href="../../d2/da3/cipconnectionmanager_8h.html#abe63966094bb9839304a78cf35a86e8f">CONSUMING</a>] = <a class="code" href="../../d7/d69/typedefs_8h.html#ace23313ab660889d73718853b644405e">EIP_INVALID_SOCKET</a>;</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;  <a class="code" href="../../d5/d07/LM3S8962_2networkhandler_8c.html#ace50de555ae5f54fef339d9e66a34f80">IApp_CloseSocket_udp</a>(pa_pstConnObjData-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a2ba9996aabd1d8fa2a7b21d63e8df9c3">sockfd</a>[<a class="code" href="../../d2/da3/cipconnectionmanager_8h.html#a607c47622da3d77e7bf799a6125f4ef5">PRODUCING</a>]);</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;  pa_pstConnObjData-&gt;<a class="code" href="../../d9/db7/structCIP__ConnectionObject.html#a2ba9996aabd1d8fa2a7b21d63e8df9c3">sockfd</a>[<a class="code" href="../../d2/da3/cipconnectionmanager_8h.html#a607c47622da3d77e7bf799a6125f4ef5">PRODUCING</a>] = <a class="code" href="../../d7/d69/typedefs_8h.html#ace23313ab660889d73718853b644405e">EIP_INVALID_SOCKET</a>;</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;  <a class="code" href="../../d5/d35/cipconnectionmanager_8c.html#a138378e54c06c512366f0c619ae58005">removeFromActiveConnections</a>(pa_pstConnObjData);</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;}</div>
<div class="ttc" id="typedefs_8h_html_adf0533b554c6a20e73928f231e5286d9"><div class="ttname"><a href="../../d7/d69/typedefs_8h.html#adf0533b554c6a20e73928f231e5286d9">EIP_STATUS</a></div><div class="ttdeci">EIP_STATUS</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d69/typedefs_8h_source.html#l00103">typedefs.h:103</a></div></div>
<div class="ttc" id="structCIP__ConnectionObject_html_a57701730fe99c60a762996e52ea184b2"><div class="ttname"><a href="../../d9/db7/structCIP__ConnectionObject.html#a57701730fe99c60a762996e52ea184b2">CIP_ConnectionObject::T_to_O_RPI</a></div><div class="ttdeci">EIP_UINT32 T_to_O_RPI</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da3/cipconnectionmanager_8h_source.html#l00149">cipconnectionmanager.h:149</a></div></div>
<div class="ttc" id="appcontype_8c_html_a0022a3503684e42baf0820a85d2d67e4"><div class="ttname"><a href="../../d1/dbc/appcontype_8c.html#a0022a3503684e42baf0820a85d2d67e4">getIOConnectionForConnectionData</a></div><div class="ttdeci">S_CIP_ConnectionObject * getIOConnectionForConnectionData(S_CIP_ConnectionObject *pa_pstConnData, EIP_UINT16 *pa_pnExtendedError)</div><div class="ttdoc">check if for the given connection data received in a forward_open request a suitable connection is av...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dbc/appcontype_8c_source.html#l00103">appcontype.c:103</a></div></div>
<div class="ttc" id="structCIP__ConnectionObject_html_a3c85bd5d08fe2dcbff1cfa51a597ca26"><div class="ttname"><a href="../../d9/db7/structCIP__ConnectionObject.html#a3c85bd5d08fe2dcbff1cfa51a597ca26">CIP_ConnectionObject::EIPSequenceCountProducing</a></div><div class="ttdeci">EIP_UINT32 EIPSequenceCountProducing</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da3/cipconnectionmanager_8h_source.html#l00163">cipconnectionmanager.h:163</a></div></div>
<div class="ttc" id="cipassembly_8c_html_aa7b96f3548d06cc3e293f8fb26a9cb0a"><div class="ttname"><a href="../../df/d2e/cipassembly_8c.html#aa7b96f3548d06cc3e293f8fb26a9cb0a">notifyAssemblyConnectedDataReceived</a></div><div class="ttdeci">EIP_STATUS notifyAssemblyConnectedDataReceived(S_CIP_Instance *pa_pstInstance, EIP_UINT8 *pa_pnData, EIP_UINT16 pa_nDataLength)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d2e/cipassembly_8c_source.html#l00106">cipassembly.c:106</a></div></div>
<div class="ttc" id="cpf_8h_html_ad598c330f224680744ab8e184d0506a1"><div class="ttname"><a href="../../d0/dff/cpf_8h.html#ad598c330f224680744ab8e184d0506a1">CIP_ITEM_ID_CONNECTIONTRANSPORTPACKET</a></div><div class="ttdeci">#define CIP_ITEM_ID_CONNECTIONTRANSPORTPACKET</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dff/cpf_8h_source.html#l00026">cpf.h:26</a></div></div>
<div class="ttc" id="structS__Address__Item_html_a173a58ddc7e5e438adece99cb14417dc"><div class="ttname"><a href="../../dc/dad/structS__Address__Item.html#a173a58ddc7e5e438adece99cb14417dc">S_Address_Item::Length</a></div><div class="ttdeci">EIP_UINT16 Length</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dff/cpf_8h_source.html#l00042">cpf.h:42</a></div></div>
<div class="ttc" id="cipioconnection_8c_html_a0a63c015bc216d71e9cb1781472ce8df"><div class="ttname"><a href="../../df/d03/cipioconnection_8c.html#a0a63c015bc216d71e9cb1781472ce8df">handleReceivedIOConnData</a></div><div class="ttdeci">EIP_STATUS handleReceivedIOConnData(struct CIP_ConnectionObject *pa_pstConnection, EIP_UINT8 *pa_pnData, EIP_UINT16 pa_nDataLength)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d03/cipioconnection_8c_source.html#l00736">cipioconnection.c:736</a></div></div>
<div class="ttc" id="cipioconnection_8c_html_a7e4d255d4b152b39dc1e9678094685f9"><div class="ttname"><a href="../../df/d03/cipioconnection_8c.html#a7e4d255d4b152b39dc1e9678094685f9">openProducingMulticastConnection</a></div><div class="ttdeci">EIP_STATUS openProducingMulticastConnection(S_CIP_ConnectionObject *pa_pstConnObj, S_CIP_CPF_Data *pa_CPF_data)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d03/cipioconnection_8c_source.html#l00369">cipioconnection.c:369</a></div></div>
<div class="ttc" id="structCIP__ConnectionObject_html_ad72e27b79af2051388b99f672b0ed79f"><div class="ttname"><a href="../../d9/db7/structCIP__ConnectionObject.html#ad72e27b79af2051388b99f672b0ed79f">CIP_ConnectionObject::p_stConsumingInstance</a></div><div class="ttdeci">S_CIP_Instance * p_stConsumingInstance</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da3/cipconnectionmanager_8h_source.html#l00157">cipconnectionmanager.h:157</a></div></div>
<div class="ttc" id="cipconnectionmanager_8c_html_a74fd2281ed30366f9cab9bec24ce30fd"><div class="ttname"><a href="../../d5/d35/cipconnectionmanager_8c.html#a74fd2281ed30366f9cab9bec24ce30fd">generalConnectionConfiguration</a></div><div class="ttdeci">void generalConnectionConfiguration(S_CIP_ConnectionObject *pa_pstConnObj)</div><div class="ttdoc">Generate the ConnectionIDs and set the general configuration parameter in the given connection object...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d35/cipconnectionmanager_8c_source.html#l00417">cipconnectionmanager.c:417</a></div></div>
<div class="ttc" id="typedefs_8h_html_a811fdad4b361d09293f3bd0b814b8e18"><div class="ttname"><a href="../../d7/d69/typedefs_8h.html#a811fdad4b361d09293f3bd0b814b8e18">EIP_UINT8</a></div><div class="ttdeci">#define EIP_UINT8</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d69/typedefs_8h_source.html#l00067">typedefs.h:67</a></div></div>
<div class="ttc" id="structCIP__ConnectionObject_html_a87fbd6d4b13419ce86e0f40d37a2bdf9"><div class="ttname"><a href="../../d9/db7/structCIP__ConnectionObject.html#a87fbd6d4b13419ce86e0f40d37a2bdf9">CIP_ConnectionObject::ConsumedConnectionSize</a></div><div class="ttdeci">EIP_UINT16 ConsumedConnectionSize</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da3/cipconnectionmanager_8h_source.html#l00125">cipconnectionmanager.h:125</a></div></div>
<div class="ttc" id="trace_8h_html"><div class="ttname"><a href="../../d1/d1b/trace_8h.html">trace.h</a></div><div class="ttdoc">Tracing infrastructure for OpENer. </div></div>
<div class="ttc" id="group__CIP__CALLBACK__API_html_ga88bb762476768e89925e4d8b3e27fdc4"><div class="ttname"><a href="../../d5/dc5/group__CIP__CALLBACK__API.html#ga88bb762476768e89925e4d8b3e27fdc4">IApp_BeforeAssemblyDataSend</a></div><div class="ttdeci">EIP_BOOL8 IApp_BeforeAssemblyDataSend(S_CIP_Instance *pa_pstInstance)</div><div class="ttdoc">Inform the application that the data of an assembly object will be sent. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d87/basiccip_8c_source.html#l00095">basiccip.c:95</a></div></div>
<div class="ttc" id="cipcommon_8h_html"><div class="ttname"><a href="../../db/d14/cipcommon_8h.html">cipcommon.h</a></div></div>
<div class="ttc" id="cipioconnection_8c_html_a93b2d7ce5fd9c7bf5583f738e09bd914"><div class="ttname"><a href="../../df/d03/cipioconnection_8c.html#a93b2d7ce5fd9c7bf5583f738e09bd914">sendConnectedData</a></div><div class="ttdeci">EIP_STATUS sendConnectedData(S_CIP_ConnectionObject *pa_pstConnection)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d03/cipioconnection_8c_source.html#l00652">cipioconnection.c:652</a></div></div>
<div class="ttc" id="structCIP__ConnectionObject_html_a98c35ff88b613a54bbf58b15f20c435a"><div class="ttname"><a href="../../d9/db7/structCIP__ConnectionObject.html#a98c35ff88b613a54bbf58b15f20c435a">CIP_ConnectionObject::m_unProductionInhibitTime</a></div><div class="ttdeci">EIP_UINT16 m_unProductionInhibitTime</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da3/cipconnectionmanager_8h_source.html#l00176">cipconnectionmanager.h:176</a></div></div>
<div class="ttc" id="cipioconnection_8c_html_a5c06aee6a78fae0cf97177e187dac727"><div class="ttname"><a href="../../df/d03/cipioconnection_8c.html#a5c06aee6a78fae0cf97177e187dac727">g_unConfigDataLen</a></div><div class="ttdeci">unsigned int g_unConfigDataLen</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d03/cipioconnection_8c_source.html#l00066">cipioconnection.c:66</a></div></div>
<div class="ttc" id="structS__SockAddrInfo__Item_html_a0279a8b3f02630e8c20bc60952ef78a9"><div class="ttname"><a href="../../d5/d70/structS__SockAddrInfo__Item.html#a0279a8b3f02630e8c20bc60952ef78a9">S_SockAddrInfo_Item::TypeID</a></div><div class="ttdeci">EIP_UINT16 TypeID</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dff/cpf_8h_source.html#l00055">cpf.h:55</a></div></div>
<div class="ttc" id="cipioconnection_8c_html_a8160f1516e9aa813509d35f4e9ba8971"><div class="ttname"><a href="../../df/d03/cipioconnection_8c.html#a8160f1516e9aa813509d35f4e9ba8971">g_pnConfigDataBuffer</a></div><div class="ttdeci">EIP_UINT8 * g_pnConfigDataBuffer</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d03/cipioconnection_8c_source.html#l00065">cipioconnection.c:65</a></div></div>
<div class="ttc" id="structCIP__ConnectionObject_html_a6d253a3d8827b5eb14ea86311dd86bd3"><div class="ttname"><a href="../../d9/db7/structCIP__ConnectionObject.html#a6d253a3d8827b5eb14ea86311dd86bd3">CIP_ConnectionObject::CorrectTOSize</a></div><div class="ttdeci">EIP_UINT16 CorrectTOSize</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da3/cipconnectionmanager_8h_source.html#l00197">cipconnectionmanager.h:197</a></div></div>
<div class="ttc" id="structCIP__ConnectionObject_html_afd5ab4965b04f8ae1198cb6aa89de99c"><div class="ttname"><a href="../../d9/db7/structCIP__ConnectionObject.html#afd5ab4965b04f8ae1198cb6aa89de99c">CIP_ConnectionObject::O_to_T_NetworkConnectionParameter</a></div><div class="ttdeci">EIP_UINT16 O_to_T_NetworkConnectionParameter</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da3/cipconnectionmanager_8h_source.html#l00148">cipconnectionmanager.h:148</a></div></div>
<div class="ttc" id="structCIPEPath_html_aa8e2ce7e76a7fbaf88b7c31c98a380b8"><div class="ttname"><a href="../../dd/d36/structCIPEPath.html#aa8e2ce7e76a7fbaf88b7c31c98a380b8">CIPEPath::AttributNr</a></div><div class="ttdeci">EIP_UINT16 AttributNr</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d28/ciptypes_8h_source.html#l00240">ciptypes.h:240</a></div></div>
<div class="ttc" id="structCIP__ConnectionObject_html_a5681ccd51b35afff155313b02754a0a7"><div class="ttname"><a href="../../d9/db7/structCIP__ConnectionObject.html#a5681ccd51b35afff155313b02754a0a7">CIP_ConnectionObject::m_eInstanceType</a></div><div class="ttdeci">EConnType m_eInstanceType</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da3/cipconnectionmanager_8h_source.html#l00117">cipconnectionmanager.h:117</a></div></div>
<div class="ttc" id="cipcommon_8c_html_a32a1fbeeeb95c6253767bcf100af01ce"><div class="ttname"><a href="../../d2/d3d/cipcommon_8c.html#a32a1fbeeeb95c6253767bcf100af01ce">g_acMessageDataReplyBuffer</a></div><div class="ttdeci">EIP_UINT8 g_acMessageDataReplyBuffer[OPENER_MESSAGE_DATA_REPLY_BUFFER]</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d3d/cipcommon_8c_source.html#l00024">cipcommon.c:24</a></div></div>
<div class="ttc" id="structS__SockAddrInfo__Item_html_a1641cc03aac9893021a96de78744a4c1"><div class="ttname"><a href="../../d5/d70/structS__SockAddrInfo__Item.html#a1641cc03aac9893021a96de78744a4c1">S_SockAddrInfo_Item::nasin_zero</a></div><div class="ttdeci">EIP_UINT8 nasin_zero[8]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dff/cpf_8h_source.html#l00060">cpf.h:60</a></div></div>
<div class="ttc" id="structCIP__ConnectionObject_html_ace277030c34e65ce16258b37e2420ea9"><div class="ttname"><a href="../../d9/db7/structCIP__ConnectionObject.html#ace277030c34e65ce16258b37e2420ea9">CIP_ConnectionObject::T_to_O_NetworkConnectionParameter</a></div><div class="ttdeci">EIP_UINT16 T_to_O_NetworkConnectionParameter</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da3/cipconnectionmanager_8h_source.html#l00150">cipconnectionmanager.h:150</a></div></div>
<div class="ttc" id="cipioconnection_8c_html_a2b592280d464553c451f653c1a45a052"><div class="ttname"><a href="../../df/d03/cipioconnection_8c.html#a2b592280d464553c451f653c1a45a052">closeIOConnection</a></div><div class="ttdeci">void closeIOConnection(S_CIP_ConnectionObject *pa_pstConnObjData)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d03/cipioconnection_8c_source.html#l00556">cipioconnection.c:556</a></div></div>
<div class="ttc" id="archnw_8h_html_a9930604d0e32588eae76f43ca38e7826"><div class="ttname"><a href="../../df/d24/archnw_8h.html#a9930604d0e32588eae76f43ca38e7826">AF_INET</a></div><div class="ttdeci">#define AF_INET</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d24/archnw_8h_source.html#l00028">archnw.h:28</a></div></div>
<div class="ttc" id="structS__CIP__CPF__Data_html"><div class="ttname"><a href="../../de/d1c/structS__CIP__CPF__Data.html">S_CIP_CPF_Data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dff/cpf_8h_source.html#l00065">cpf.h:65</a></div></div>
<div class="ttc" id="cipconnectionmanager_8h_html_a96db92dd25483d5093f8494f249ce90e"><div class="ttname"><a href="../../d2/da3/cipconnectionmanager_8h.html#a96db92dd25483d5093f8494f249ce90e">CIP_CONN_PRODUCTION_TRIGGER_MASK</a></div><div class="ttdeci">#define CIP_CONN_PRODUCTION_TRIGGER_MASK</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da3/cipconnectionmanager_8h_source.html#l00044">cipconnectionmanager.h:44</a></div></div>
<div class="ttc" id="structSMcastConfig_html_ad6ff572692d8576278441b9f04b841b3"><div class="ttname"><a href="../../dc/d48/structSMcastConfig.html#ad6ff572692d8576278441b9f04b841b3">SMcastConfig::m_unMcastStartAddr</a></div><div class="ttdeci">EIP_UINT32 m_unMcastStartAddr</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dad/ciptcpipinterface_8h_source.html#l00019">ciptcpipinterface.h:19</a></div></div>
<div class="ttc" id="structCIPConnectionPath_html_ac13dcf2b5048fee0e4f1aff464efe8c7"><div class="ttname"><a href="../../df/dff/structCIPConnectionPath.html#ac13dcf2b5048fee0e4f1aff464efe8c7">CIPConnectionPath::ClassID</a></div><div class="ttdeci">EIP_UINT32 ClassID</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d28/ciptypes_8h_source.html#l00245">ciptypes.h:245</a></div></div>
<div class="ttc" id="cipconnectionmanager_8h_html_ae84b7346453b866e3b9f98a2feb9c17c"><div class="ttname"><a href="../../d2/da3/cipconnectionmanager_8h.html#ae84b7346453b866e3b9f98a2feb9c17c">CIP_CON_MGR_INVALID_PRODUCING_APPLICATION_PATH</a></div><div class="ttdeci">#define CIP_CON_MGR_INVALID_PRODUCING_APPLICATION_PATH</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da3/cipconnectionmanager_8h_source.html#l00037">cipconnectionmanager.h:37</a></div></div>
<div class="ttc" id="cpf_8h_html"><div class="ttname"><a href="../../d0/dff/cpf_8h.html">cpf.h</a></div></div>
<div class="ttc" id="cipconnectionmanager_8h_html_aa90301ce80009301ef74637f50a79e69"><div class="ttname"><a href="../../d2/da3/cipconnectionmanager_8h.html#aa90301ce80009301ef74637f50a79e69">SEQ_LEQ16</a></div><div class="ttdeci">#define SEQ_LEQ16(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da3/cipconnectionmanager_8h_source.html#l00054">cipconnectionmanager.h:54</a></div></div>
<div class="ttc" id="structCIP__ConnectionObject_html_ab27250efaf96f6a8833c732da52c50c1"><div class="ttname"><a href="../../d9/db7/structCIP__ConnectionObject.html#ab27250efaf96f6a8833c732da52c50c1">CIP_ConnectionObject::CIPProducedConnectionID</a></div><div class="ttdeci">EIP_UINT32 CIPProducedConnectionID</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da3/cipconnectionmanager_8h_source.html#l00129">cipconnectionmanager.h:129</a></div></div>
<div class="ttc" id="LM3S8962_2sample__application_2opener__user__conf_8h_html_a84bdbf10caa9e750b3746d5f20e1845f"><div class="ttname"><a href="../../dc/d75/LM3S8962_2sample__application_2opener__user__conf_8h.html#a84bdbf10caa9e750b3746d5f20e1845f">OPENER_CONSUMED_DATA_HAS_RUN_IDLE_HEADER</a></div><div class="ttdeci">#define OPENER_CONSUMED_DATA_HAS_RUN_IDLE_HEADER</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d75/LM3S8962_2sample__application_2opener__user__conf_8h_source.html#l00123">opener_user_conf.h:123</a></div></div>
<div class="ttc" id="cipconnectionmanager_8h_html_a992bfcf8c75709fe6a7be2ee4fa72605a130678dfca44ca6ffad76905f396ca19"><div class="ttname"><a href="../../d2/da3/cipconnectionmanager_8h.html#a992bfcf8c75709fe6a7be2ee4fa72605a130678dfca44ca6ffad76905f396ca19">enConnTypeIOInputOnly</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da3/cipconnectionmanager_8h_source.html#l00075">cipconnectionmanager.h:75</a></div></div>
<div class="ttc" id="structS__Address__Data_html_a95f0e883c0c8f54f90a7bec1f7dd8adf"><div class="ttname"><a href="../../d7/d91/structS__Address__Data.html#a95f0e883c0c8f54f90a7bec1f7dd8adf">S_Address_Data::ConnectionIdentifier</a></div><div class="ttdeci">EIP_UINT32 ConnectionIdentifier</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dff/cpf_8h_source.html#l00035">cpf.h:35</a></div></div>
<div class="ttc" id="structS__CIP__CPF__Data_html_a1a3546f45ba4f7add7434efc38162881"><div class="ttname"><a href="../../de/d1c/structS__CIP__CPF__Data.html#a1a3546f45ba4f7add7434efc38162881">S_CIP_CPF_Data::stAddr_Item</a></div><div class="ttdeci">S_Address_Item stAddr_Item</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dff/cpf_8h_source.html#l00068">cpf.h:68</a></div></div>
<div class="ttc" id="structCIPEPath_html_a283bb751946332440cfe18ec7d649baa"><div class="ttname"><a href="../../dd/d36/structCIPEPath.html#a283bb751946332440cfe18ec7d649baa">CIPEPath::ClassID</a></div><div class="ttdeci">EIP_UINT16 ClassID</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d28/ciptypes_8h_source.html#l00238">ciptypes.h:238</a></div></div>
<div class="ttc" id="structS__Address__Item_html_a13d25cc3a23f78e9f0f1bb6a90515257"><div class="ttname"><a href="../../dc/dad/structS__Address__Item.html#a13d25cc3a23f78e9f0f1bb6a90515257">S_Address_Item::Data</a></div><div class="ttdeci">S_Address_Data Data</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dff/cpf_8h_source.html#l00043">cpf.h:43</a></div></div>
<div class="ttc" id="appcontype_8c_html_a55477541835f20888759b441419c1ea4"><div class="ttname"><a href="../../d1/dbc/appcontype_8c.html#a55477541835f20888759b441419c1ea4">closeAllConnsForInputWithSameType</a></div><div class="ttdeci">void closeAllConnsForInputWithSameType(EIP_UINT32 pa_unInputPoint, EConnType pa_eInstanceType)</div><div class="ttdoc">Close all connection producing the same input and have the same type (i.e., listen only or input only...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dbc/appcontype_8c_source.html#l00345">appcontype.c:345</a></div></div>
<div class="ttc" id="structsockaddr__in_html"><div class="ttname"><a href="../../de/d38/structsockaddr__in.html">sockaddr_in</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d75/LM3S8962_2sample__application_2opener__user__conf_8h_source.html#l00030">opener_user_conf.h:30</a></div></div>
<div class="ttc" id="structCIP__ConnectionObject_html_af5773a8cf15183ed7ae09160813452a6"><div class="ttname"><a href="../../d9/db7/structCIP__ConnectionObject.html#af5773a8cf15183ed7ae09160813452a6">CIP_ConnectionObject::ConnectionPath</a></div><div class="ttdeci">S_CIP_ConnectionPath ConnectionPath</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da3/cipconnectionmanager_8h_source.html#l00154">cipconnectionmanager.h:154</a></div></div>
<div class="ttc" id="structCIPAttributeStruct_html_a19855fbf02dc9275a76a9b9b6e2ca36f"><div class="ttname"><a href="../../d9/d11/structCIPAttributeStruct.html#a19855fbf02dc9275a76a9b9b6e2ca36f">CIPAttributeStruct::pt2data</a></div><div class="ttdeci">void * pt2data</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d28/ciptypes_8h_source.html#l00293">ciptypes.h:293</a></div></div>
<div class="ttc" id="endianconv_8h_html"><div class="ttname"><a href="../../d0/dec/endianconv_8h.html">endianconv.h</a></div></div>
<div class="ttc" id="trace_8h_html_a48f0d8056c030015f14cf5907315e6bb"><div class="ttname"><a href="../../d1/d1b/trace_8h.html#a48f0d8056c030015f14cf5907315e6bb">OPENER_TRACE_ERR</a></div><div class="ttdeci">#define OPENER_TRACE_ERR(...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d1b/trace_8h_source.html#l00072">trace.h:72</a></div></div>
<div class="ttc" id="appcontype_8c_html_a5f464e718f08677877ddadf7326f4546"><div class="ttname"><a href="../../d1/dbc/appcontype_8c.html#a5f464e718f08677877ddadf7326f4546">getExistingProdMulticastConnection</a></div><div class="ttdeci">S_CIP_ConnectionObject * getExistingProdMulticastConnection(EIP_UINT32 pa_unInputPoint)</div><div class="ttdoc">Check if there exists already an exclusive owner or listen only connection which produces the input a...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dbc/appcontype_8c_source.html#l00291">appcontype.c:291</a></div></div>
<div class="ttc" id="structCIPAttributeStruct_html"><div class="ttname"><a href="../../d9/d11/structCIPAttributeStruct.html">CIPAttributeStruct</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d28/ciptypes_8h_source.html#l00289">ciptypes.h:289</a></div></div>
<div class="ttc" id="group__CIP__CALLBACK__API_html_ga9d7f3bd3280b10ad3cc4ed2f5dc9c339"><div class="ttname"><a href="../../d5/dc5/group__CIP__CALLBACK__API.html#ga9d7f3bd3280b10ad3cc4ed2f5dc9c339">IApp_CreateUDPSocket</a></div><div class="ttdeci">int IApp_CreateUDPSocket(int pa_nDirection, struct sockaddr_in *pa_pstAddr)</div><div class="ttdoc">create a producing or consuming UDP socket </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d07/LM3S8962_2networkhandler_8c_source.html#l00369">networkhandler.c:369</a></div></div>
<div class="ttc" id="structCIPByteArray_html"><div class="ttname"><a href="../../d7/d0b/structCIPByteArray.html">CIPByteArray</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d28/ciptypes_8h_source.html#l00221">ciptypes.h:221</a></div></div>
<div class="ttc" id="structS__CIP__CPF__Data_html_a6f8e906a9d6209d20c50d1ea81fe5b12"><div class="ttname"><a href="../../de/d1c/structS__CIP__CPF__Data.html#a6f8e906a9d6209d20c50d1ea81fe5b12">S_CIP_CPF_Data::stDataI_Item</a></div><div class="ttdeci">S_Data_Item stDataI_Item</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dff/cpf_8h_source.html#l00069">cpf.h:69</a></div></div>
<div class="ttc" id="structCIP__ConnectionObject_html_add228c9f3a98587ab9ce3e7f27d7ab0c"><div class="ttname"><a href="../../d9/db7/structCIP__ConnectionObject.html#add228c9f3a98587ab9ce3e7f27d7ab0c">CIP_ConnectionObject::p_stProducingInstance</a></div><div class="ttdeci">S_CIP_Instance * p_stProducingInstance</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da3/cipconnectionmanager_8h_source.html#l00160">cipconnectionmanager.h:160</a></div></div>
<div class="ttc" id="LM3S8962_2networkhandler_8c_html_ace50de555ae5f54fef339d9e66a34f80"><div class="ttname"><a href="../../d5/d07/LM3S8962_2networkhandler_8c.html#ace50de555ae5f54fef339d9e66a34f80">IApp_CloseSocket_udp</a></div><div class="ttdeci">void IApp_CloseSocket_udp(int fd)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d07/LM3S8962_2networkhandler_8c_source.html#l00409">networkhandler.c:409</a></div></div>
<div class="ttc" id="structS__SockAddrInfo__Item_html_a4f280b2fb88b011e3d9f14bcaa0ff8f9"><div class="ttname"><a href="../../d5/d70/structS__SockAddrInfo__Item.html#a4f280b2fb88b011e3d9f14bcaa0ff8f9">S_SockAddrInfo_Item::nsin_port</a></div><div class="ttdeci">EIP_UINT16 nsin_port</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dff/cpf_8h_source.html#l00058">cpf.h:58</a></div></div>
<div class="ttc" id="structCIP__Class_html"><div class="ttname"><a href="../../d5/de9/structCIP__Class.html">CIP_Class</a></div><div class="ttdoc">Class is a subclass of Instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d28/ciptypes_8h_source.html#l00307">ciptypes.h:307</a></div></div>
<div class="ttc" id="typedefs_8h_html_ace23313ab660889d73718853b644405e"><div class="ttname"><a href="../../d7/d69/typedefs_8h.html#ace23313ab660889d73718853b644405e">EIP_INVALID_SOCKET</a></div><div class="ttdeci">#define EIP_INVALID_SOCKET</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d69/typedefs_8h_source.html#l00082">typedefs.h:82</a></div></div>
<div class="ttc" id="group__CIP__API_html_ga33fda1920669c922471cb6218c8b22b8"><div class="ttname"><a href="../../d2/dc9/group__CIP__API.html#ga33fda1920669c922471cb6218c8b22b8">getAttribute</a></div><div class="ttdeci">S_CIP_attribute_struct * getAttribute(S_CIP_Instance *pa_pInstance, EIP_UINT16 pa_nAttributeNr)</div><div class="ttdoc">Get a pointer to an instance&#39;s attribute. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d3d/cipcommon_8c_source.html#l00361">cipcommon.c:361</a></div></div>
<div class="ttc" id="basiccip_8c_html_ae4b6440ca3750e54ba1fdd848fcaa59b"><div class="ttname"><a href="../../d0/d87/basiccip_8c.html#ae4b6440ca3750e54ba1fdd848fcaa59b">newfd</a></div><div class="ttdeci">int newfd</div></div>
<div class="ttc" id="typedefs_8h_html_a72b3e7231681538d97279aa001872297"><div class="ttname"><a href="../../d7/d69/typedefs_8h.html#a72b3e7231681538d97279aa001872297">EIP_UINT16</a></div><div class="ttdeci">#define EIP_UINT16</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d69/typedefs_8h_source.html#l00068">typedefs.h:68</a></div></div>
<div class="ttc" id="group__ENCAP_html_ga2336d8a977ed1fc7cf4704823cb3039e"><div class="ttname"><a href="../../d4/d91/group__ENCAP.html#ga2336d8a977ed1fc7cf4704823cb3039e">assembleLinearMsg</a></div><div class="ttdeci">int assembleLinearMsg(S_CIP_MR_Response *pa_MRResponse, S_CIP_CPF_Data *pa_CPFDataItem, EIP_UINT8 *pa_msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d98/cpf_8c_source.html#l00235">cpf.c:235</a></div></div>
<div class="ttc" id="cipioconnection_8c_html_a190a0e08c9d8f31cf09442fdb3c3671b"><div class="ttname"><a href="../../df/d03/cipioconnection_8c.html#a190a0e08c9d8f31cf09442fdb3c3671b">OPENER_EIP_IO_UDP_PORT</a></div><div class="ttdeci">#define OPENER_EIP_IO_UDP_PORT</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d03/cipioconnection_8c_source.html#l00018">cipioconnection.c:18</a></div></div>
<div class="ttc" id="cipconnectionmanager_8h_html_a992bfcf8c75709fe6a7be2ee4fa72605ad20b557288c19f4396c3b92ba3af678b"><div class="ttname"><a href="../../d2/da3/cipconnectionmanager_8h.html#a992bfcf8c75709fe6a7be2ee4fa72605ad20b557288c19f4396c3b92ba3af678b">enConnTypeIOListenOnly</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da3/cipconnectionmanager_8h_source.html#l00076">cipconnectionmanager.h:76</a></div></div>
<div class="ttc" id="cipconnectionmanager_8c_html_a138378e54c06c512366f0c619ae58005"><div class="ttname"><a href="../../d5/d35/cipconnectionmanager_8c.html#a138378e54c06c512366f0c619ae58005">removeFromActiveConnections</a></div><div class="ttdeci">void removeFromActiveConnections(S_CIP_ConnectionObject *pa_pstConn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d35/cipconnectionmanager_8c_source.html#l01240">cipconnectionmanager.c:1240</a></div></div>
<div class="ttc" id="cpf_8h_html_a52f19583aa97847eb170d3aca964ab70"><div class="ttname"><a href="../../d0/dff/cpf_8h.html#a52f19583aa97847eb170d3aca964ab70">CIP_ITEM_ID_CONNECTIONBASED</a></div><div class="ttdeci">#define CIP_ITEM_ID_CONNECTIONBASED</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dff/cpf_8h_source.html#l00025">cpf.h:25</a></div></div>
<div class="ttc" id="cipconnectionmanager_8h_html_a40b7424c1403d086ac7aedf7bfb24e38"><div class="ttname"><a href="../../d2/da3/cipconnectionmanager_8h.html#a40b7424c1403d086ac7aedf7bfb24e38">CIP_CON_MGR_INVALID_CONFIGURATION_APP_PATH</a></div><div class="ttdeci">#define CIP_CON_MGR_INVALID_CONFIGURATION_APP_PATH</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da3/cipconnectionmanager_8h_source.html#l00035">cipconnectionmanager.h:35</a></div></div>
<div class="ttc" id="structCIP__ConnectionObject_html_af8c9922ed43814f27e0f42d0635c59d0"><div class="ttname"><a href="../../d9/db7/structCIP__ConnectionObject.html#af8c9922ed43814f27e0f42d0635c59d0">CIP_ConnectionObject::SequenceCountConsuming</a></div><div class="ttdeci">EIP_UINT16 SequenceCountConsuming</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da3/cipconnectionmanager_8h_source.html#l00167">cipconnectionmanager.h:167</a></div></div>
<div class="ttc" id="cipioconnection_8c_html_a082f6fee564e932e77a812908de1c3ce"><div class="ttname"><a href="../../df/d03/cipioconnection_8c.html#a082f6fee564e932e77a812908de1c3ce">OpenMulticastConnection</a></div><div class="ttdeci">EIP_STATUS OpenMulticastConnection(int pa_direction, S_CIP_ConnectionObject *pa_pstConnObj, S_CIP_CPF_Data *pa_CPF_data)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d03/cipioconnection_8c_source.html#l00437">cipioconnection.c:437</a></div></div>
<div class="ttc" id="cipioconnection_8c_html_ae83037a608b08d325fc34869395f37a3"><div class="ttname"><a href="../../df/d03/cipioconnection_8c.html#ae83037a608b08d325fc34869395f37a3">establishIOConnction</a></div><div class="ttdeci">int establishIOConnction(struct CIP_ConnectionObject *pa_pstConnObjData, EIP_UINT16 *pa_pnExtendedError)</div><div class="ttdoc">Setup all data in order to establish an IO connection. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d03/cipioconnection_8c_source.html#l00072">cipioconnection.c:72</a></div></div>
<div class="ttc" id="structCIP__ConnectionObject_html"><div class="ttname"><a href="../../d9/db7/structCIP__ConnectionObject.html">CIP_ConnectionObject</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da3/cipconnectionmanager_8h_source.html#l00114">cipconnectionmanager.h:114</a></div></div>
<div class="ttc" id="cipioconnection_8c_html_a48ed327ec7ab3a482159eaa61b8d0a1b"><div class="ttname"><a href="../../df/d03/cipioconnection_8c.html#a48ed327ec7ab3a482159eaa61b8d0a1b">g_nRunIdleState</a></div><div class="ttdeci">EIP_UINT32 g_nRunIdleState</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d03/cipioconnection_8c_source.html#l00067">cipioconnection.c:67</a></div></div>
<div class="ttc" id="structCIP__ConnectionObject_html_a048405cb4a539cf9d353b84f4e7925c2"><div class="ttname"><a href="../../d9/db7/structCIP__ConnectionObject.html#a048405cb4a539cf9d353b84f4e7925c2">CIP_ConnectionObject::ProducedConnectionPath</a></div><div class="ttdeci">S_CIP_EPATH ProducedConnectionPath</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da3/cipconnectionmanager_8h_source.html#l00134">cipconnectionmanager.h:134</a></div></div>
<div class="ttc" id="typedefs_8h_html_a4f1d71ddb23827c1af144276d0dd1947"><div class="ttname"><a href="../../d7/d69/typedefs_8h.html#a4f1d71ddb23827c1af144276d0dd1947">EIP_UINT32</a></div><div class="ttdeci">#define EIP_UINT32</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d69/typedefs_8h_source.html#l00069">typedefs.h:69</a></div></div>
<div class="ttc" id="cipioconnection_8c_html_aca969065c50443a0e464dbe318de06d4"><div class="ttname"><a href="../../df/d03/cipioconnection_8c.html#aca969065c50443a0e464dbe318de06d4">handleIOConnectionTimeOut</a></div><div class="ttdeci">void handleIOConnectionTimeOut(S_CIP_ConnectionObject *pa_pstConn)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d03/cipioconnection_8c_source.html#l00601">cipioconnection.c:601</a></div></div>
<div class="ttc" id="group__ENCAP_html_ga4ac7387e49002d26462d7cdd094d238a"><div class="ttname"><a href="../../d4/d91/group__ENCAP.html#ga4ac7387e49002d26462d7cdd094d238a">ltohl</a></div><div class="ttdeci">EIP_UINT32 ltohl(EIP_UINT8 **pa_buf)</div><div class="ttdoc">Reads EIP_UINT32 from *pa_buf and converts little endian to host. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d73/endianconv_8c_source.html#l00034">endianconv.c:34</a></div></div>
<div class="ttc" id="cpf_8h_html_af10c60dd89c3a1abad693b8d70da0d8d"><div class="ttname"><a href="../../d0/dff/cpf_8h.html#af10c60dd89c3a1abad693b8d70da0d8d">CIP_ITEM_ID_SEQUENCEDADDRESS</a></div><div class="ttdeci">#define CIP_ITEM_ID_SEQUENCEDADDRESS</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dff/cpf_8h_source.html#l00031">cpf.h:31</a></div></div>
<div class="ttc" id="cipioconnection_8h_html"><div class="ttname"><a href="../../de/d45/cipioconnection_8h.html">cipioconnection.h</a></div></div>
<div class="ttc" id="structCIP__Instance_html_a4cdbccd22523fc98961d4c92e6838c4a"><div class="ttname"><a href="../../db/db2/structCIP__Instance.html#a4cdbccd22523fc98961d4c92e6838c4a">CIP_Instance::pstAttributes</a></div><div class="ttdeci">S_CIP_attribute_struct * pstAttributes</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d28/ciptypes_8h_source.html#l00301">ciptypes.h:301</a></div></div>
<div class="ttc" id="structCIP__ConnectionObject_html_a47205cc202e3206af76d2c8928151083"><div class="ttname"><a href="../../d9/db7/structCIP__ConnectionObject.html#a47205cc202e3206af76d2c8928151083">CIP_ConnectionObject::m_pfCloseFunc</a></div><div class="ttdeci">TConnCloseFunc m_pfCloseFunc</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da3/cipconnectionmanager_8h_source.html#l00187">cipconnectionmanager.h:187</a></div></div>
<div class="ttc" id="structCIPByteArray_html_a74d4bc9418608e446d4e7f6b7e5bfc8c"><div class="ttname"><a href="../../d7/d0b/structCIPByteArray.html#a74d4bc9418608e446d4e7f6b7e5bfc8c">CIPByteArray::Length</a></div><div class="ttdeci">EIP_UINT16 Length</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d28/ciptypes_8h_source.html#l00222">ciptypes.h:222</a></div></div>
<div class="ttc" id="appcontype_8h_html"><div class="ttname"><a href="../../d1/dc0/appcontype_8h.html">appcontype.h</a></div></div>
<div class="ttc" id="structS__SockAddrInfo__Item_html_a0ce9f9cb0d8d5114e5ce6954e4b04c7d"><div class="ttname"><a href="../../d5/d70/structS__SockAddrInfo__Item.html#a0ce9f9cb0d8d5114e5ce6954e4b04c7d">S_SockAddrInfo_Item::nsin_addr</a></div><div class="ttdeci">EIP_UINT32 nsin_addr</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dff/cpf_8h_source.html#l00059">cpf.h:59</a></div></div>
<div class="ttc" id="cipconnectionmanager_8h_html_a607c47622da3d77e7bf799a6125f4ef5"><div class="ttname"><a href="../../d2/da3/cipconnectionmanager_8h.html#a607c47622da3d77e7bf799a6125f4ef5">PRODUCING</a></div><div class="ttdeci">#define PRODUCING</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da3/cipconnectionmanager_8h_source.html#l00015">cipconnectionmanager.h:15</a></div></div>
<div class="ttc" id="structsockaddr__in_html_ad8774bdd0b8c65cbd01c03f07381ba03"><div class="ttname"><a href="../../de/d38/structsockaddr__in.html#ad8774bdd0b8c65cbd01c03f07381ba03">sockaddr_in::sin_port</a></div><div class="ttdeci">u16_t sin_port</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d75/LM3S8962_2sample__application_2opener__user__conf_8h_source.html#l00033">opener_user_conf.h:33</a></div></div>
<div class="ttc" id="structCIP__ConnectionObject_html_ab1a13d14d8f735d9815d71bbb1e07ac0"><div class="ttname"><a href="../../d9/db7/structCIP__ConnectionObject.html#ab1a13d14d8f735d9815d71bbb1e07ac0">CIP_ConnectionObject::ConsumedConnectionPath</a></div><div class="ttdeci">S_CIP_EPATH ConsumedConnectionPath</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da3/cipconnectionmanager_8h_source.html#l00136">cipconnectionmanager.h:136</a></div></div>
<div class="ttc" id="cipassembly_8h_html_aee29cb8987fb0ce48a7b616c796cec1e"><div class="ttname"><a href="../../de/df4/cipassembly_8h.html#aee29cb8987fb0ce48a7b616c796cec1e">CIP_ASSEMBLY_CLASS_CODE</a></div><div class="ttdeci">#define CIP_ASSEMBLY_CLASS_CODE</div><div class="ttdef"><b>Definition:</b> <a href="../../de/df4/cipassembly_8h_source.html#l00012">cipassembly.h:12</a></div></div>
<div class="ttc" id="archnw_8h_html_a5d1940045dc2e7de552f3d4ff13a74ab"><div class="ttname"><a href="../../df/d24/archnw_8h.html#a5d1940045dc2e7de552f3d4ff13a74ab">INADDR_ANY</a></div><div class="ttdeci">#define INADDR_ANY</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d24/archnw_8h_source.html#l00031">archnw.h:31</a></div></div>
<div class="ttc" id="appcontype_8c_html_aeeda244766a510093c5c31e49710edb2"><div class="ttname"><a href="../../d1/dbc/appcontype_8c.html#aeeda244766a510093c5c31e49710edb2">getNextNonCtrlMasterCon</a></div><div class="ttdeci">S_CIP_ConnectionObject * getNextNonCtrlMasterCon(EIP_UINT32 pa_unInputPoint)</div><div class="ttdoc">check if there exists an producing multicast exclusive owner or listen only connection that should pr...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dbc/appcontype_8c_source.html#l00318">appcontype.c:318</a></div></div>
<div class="ttc" id="structS__CIP__CPF__Data_html_aa7a5f0b68ad6b89cbbd6b060325961a8"><div class="ttname"><a href="../../de/d1c/structS__CIP__CPF__Data.html#aa7a5f0b68ad6b89cbbd6b060325961a8">S_CIP_CPF_Data::ItemCount</a></div><div class="ttdeci">EIP_UINT16 ItemCount</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dff/cpf_8h_source.html#l00067">cpf.h:67</a></div></div>
<div class="ttc" id="cipconnectionmanager_8h_html_a0699386e1a578395d0d581890ba892e6"><div class="ttname"><a href="../../d2/da3/cipconnectionmanager_8h.html#a0699386e1a578395d0d581890ba892e6">CIP_MULTICAST_CONNECTION</a></div><div class="ttdeci">#define CIP_MULTICAST_CONNECTION</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da3/cipconnectionmanager_8h_source.html#l00018">cipconnectionmanager.h:18</a></div></div>
<div class="ttc" id="cipioconnection_8c_html_a5528cb41b78cd5f5641a3666dcc1177d"><div class="ttname"><a href="../../df/d03/cipioconnection_8c.html#a5528cb41b78cd5f5641a3666dcc1177d">OpenConsumingPointToPointConnection</a></div><div class="ttdeci">EIP_STATUS OpenConsumingPointToPointConnection(S_CIP_ConnectionObject *pa_pstConnObj, S_CIP_CPF_Data *pa_CPF_data)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d03/cipioconnection_8c_source.html#l00285">cipioconnection.c:285</a></div></div>
<div class="ttc" id="group__CIP__API_html_ga1db1e5dc1fc04ac40a02f4f4ca550aa1"><div class="ttname"><a href="../../d2/dc9/group__CIP__API.html#ga1db1e5dc1fc04ac40a02f4f4ca550aa1">getCIPClass</a></div><div class="ttdeci">S_CIP_Class * getCIPClass(EIP_UINT32 pa_nClassID)</div><div class="ttdoc">Get a pointer to a CIP object with given class code. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7d/cipmessagerouter_8c_source.html#l00098">cipmessagerouter.c:98</a></div></div>
<div class="ttc" id="structS__Address__Data_html_adf2ac27b108d257bf3428fd6b5c58ef0"><div class="ttname"><a href="../../d7/d91/structS__Address__Data.html#adf2ac27b108d257bf3428fd6b5c58ef0">S_Address_Data::SequenceNumber</a></div><div class="ttdeci">EIP_UINT32 SequenceNumber</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dff/cpf_8h_source.html#l00036">cpf.h:36</a></div></div>
<div class="ttc" id="structS__Data__Item_html_a5716491ec21612a7714e6d26afbca1f8"><div class="ttname"><a href="../../d6/d2b/structS__Data__Item.html#a5716491ec21612a7714e6d26afbca1f8">S_Data_Item::Length</a></div><div class="ttdeci">EIP_UINT16 Length</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dff/cpf_8h_source.html#l00049">cpf.h:49</a></div></div>
<div class="ttc" id="structCIP__ConnectionObject_html_a618519669b983873ce454934c210b164"><div class="ttname"><a href="../../d9/db7/structCIP__ConnectionObject.html#a618519669b983873ce454934c210b164">CIP_ConnectionObject::ConsumedConnectionPathLength</a></div><div class="ttdeci">EIP_UINT16 ConsumedConnectionPathLength</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da3/cipconnectionmanager_8h_source.html#l00135">cipconnectionmanager.h:135</a></div></div>
<div class="ttc" id="ciptcpipinterface_8h_html"><div class="ttname"><a href="../../d1/dad/ciptcpipinterface_8h.html">ciptcpipinterface.h</a></div></div>
<div class="ttc" id="structS__SockAddrInfo__Item_html_acd1402b222a3f1a56abc479b8ea0135f"><div class="ttname"><a href="../../d5/d70/structS__SockAddrInfo__Item.html#acd1402b222a3f1a56abc479b8ea0135f">S_SockAddrInfo_Item::Length</a></div><div class="ttdeci">EIP_UINT16 Length</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dff/cpf_8h_source.html#l00056">cpf.h:56</a></div></div>
<div class="ttc" id="typedefs_8h_html_adf0533b554c6a20e73928f231e5286d9aa2593a8a4cbf4566ee6f68f16e5115a6"><div class="ttname"><a href="../../d7/d69/typedefs_8h.html#adf0533b554c6a20e73928f231e5286d9aa2593a8a4cbf4566ee6f68f16e5115a6">EIP_ERROR</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d69/typedefs_8h_source.html#l00107">typedefs.h:107</a></div></div>
<div class="ttc" id="structCIP__ConnectionObject_html_a57854a4a37db4f762ce9bd58831f0063"><div class="ttname"><a href="../../d9/db7/structCIP__ConnectionObject.html#a57854a4a37db4f762ce9bd58831f0063">CIP_ConnectionObject::remote_addr</a></div><div class="ttdeci">struct sockaddr_in remote_addr</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da3/cipconnectionmanager_8h_source.html#l00182">cipconnectionmanager.h:182</a></div></div>
<div class="ttc" id="group__CIP__CALLBACK__API_html_ga53222a07ad77b3f69a032ce81b66e659"><div class="ttname"><a href="../../d5/dc5/group__CIP__CALLBACK__API.html#ga53222a07ad77b3f69a032ce81b66e659">IApp_RunIdleChanged</a></div><div class="ttdeci">void IApp_RunIdleChanged(EIP_UINT32 pa_nRunIdleValue)</div><div class="ttdoc">Inform the application that the Run/Idle State has been changed by the originator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d87/basiccip_8c_source.html#l00138">basiccip.c:138</a></div></div>
<div class="ttc" id="structCIP__ConnectionObject_html_a2ba9996aabd1d8fa2a7b21d63e8df9c3"><div class="ttname"><a href="../../d9/db7/structCIP__ConnectionObject.html#a2ba9996aabd1d8fa2a7b21d63e8df9c3">CIP_ConnectionObject::sockfd</a></div><div class="ttdeci">int sockfd[2]</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da3/cipconnectionmanager_8h_source.html#l00184">cipconnectionmanager.h:184</a></div></div>
<div class="ttc" id="ciperror_8h_html_a4295b59f4098d9d45991b5cc0f2c6787"><div class="ttname"><a href="../../d6/d52/ciperror_8h.html#a4295b59f4098d9d45991b5cc0f2c6787">CIP_ERROR_CONNECTION_FAILURE</a></div><div class="ttdeci">#define CIP_ERROR_CONNECTION_FAILURE</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d52/ciperror_8h_source.html#l00010">ciperror.h:10</a></div></div>
<div class="ttc" id="cipconnectionmanager_8h_html"><div class="ttname"><a href="../../d2/da3/cipconnectionmanager_8h.html">cipconnectionmanager.h</a></div></div>
<div class="ttc" id="archnw_8h_html_a8a249909ca23ddaabc98f21e07d96d2f"><div class="ttname"><a href="../../df/d24/archnw_8h.html#a8a249909ca23ddaabc98f21e07d96d2f">in_port_t</a></div><div class="ttdeci">unsigned short int in_port_t</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d24/archnw_8h_source.html#l00024">archnw.h:24</a></div></div>
<div class="ttc" id="typedefs_8h_html_adf0533b554c6a20e73928f231e5286d9ac471acf92535c32126cd4d318f8175ef"><div class="ttname"><a href="../../d7/d69/typedefs_8h.html#adf0533b554c6a20e73928f231e5286d9ac471acf92535c32126cd4d318f8175ef">EIP_OK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d69/typedefs_8h_source.html#l00105">typedefs.h:105</a></div></div>
<div class="ttc" id="group__ENCAP_html_ga00e4db57a2684c23db31f0eef084b26b"><div class="ttname"><a href="../../d4/d91/group__ENCAP.html#ga00e4db57a2684c23db31f0eef084b26b">g_stCPFDataItem</a></div><div class="ttdeci">S_CIP_CPF_Data g_stCPFDataItem</div><div class="ttdoc">Data storage for the any cpf data Currently we are single threaded and need only one cpf at the time...</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d98/cpf_8c_source.html#l00017">cpf.c:17</a></div></div>
<div class="ttc" id="ciptypes_8h_html_a47e9326e14025a4fc4287c3f233d23ddaae58453f8aa7f2ba68deec87eb5a270f"><div class="ttname"><a href="../../df/d28/ciptypes_8h.html#a47e9326e14025a4fc4287c3f233d23ddaae58453f8aa7f2ba68deec87eb5a270f">enOpened</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d28/ciptypes_8h_source.html#l00218">ciptypes.h:218</a></div></div>
<div class="ttc" id="structS__Address__Item_html_a0c191818b22226b96076f7312caf2f7e"><div class="ttname"><a href="../../dc/dad/structS__Address__Item.html#a0c191818b22226b96076f7312caf2f7e">S_Address_Item::TypeID</a></div><div class="ttdeci">EIP_UINT16 TypeID</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dff/cpf_8h_source.html#l00041">cpf.h:41</a></div></div>
<div class="ttc" id="cipconnectionmanager_8h_html_a992bfcf8c75709fe6a7be2ee4fa72605adbebb7cdb0f8e9fae922c6b11b6d790d"><div class="ttname"><a href="../../d2/da3/cipconnectionmanager_8h.html#a992bfcf8c75709fe6a7be2ee4fa72605adbebb7cdb0f8e9fae922c6b11b6d790d">enConnTypeIOExclusiveOwner</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da3/cipconnectionmanager_8h_source.html#l00074">cipconnectionmanager.h:74</a></div></div>
<div class="ttc" id="cipioconnection_8c_html_a309b521bf439ca702ce2895e0a4390c5"><div class="ttname"><a href="../../df/d03/cipioconnection_8c.html#a309b521bf439ca702ce2895e0a4390c5">OpenProducingPointToPointConnection</a></div><div class="ttdeci">int OpenProducingPointToPointConnection(S_CIP_ConnectionObject *pa_pstConnObj, S_CIP_CPF_Data *pa_CPF_data)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d03/cipioconnection_8c_source.html#l00333">cipioconnection.c:333</a></div></div>
<div class="ttc" id="structsockaddr__in_html_a4ea5f2f1138e5c8597097db255a9ec6c"><div class="ttname"><a href="../../de/d38/structsockaddr__in.html#a4ea5f2f1138e5c8597097db255a9ec6c">sockaddr_in::sin_addr</a></div><div class="ttdeci">struct in_addr sin_addr</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d75/LM3S8962_2sample__application_2opener__user__conf_8h_source.html#l00034">opener_user_conf.h:34</a></div></div>
<div class="ttc" id="trace_8h_html_aa1b39db9477c48695273170aff3c3a7a"><div class="ttname"><a href="../../d1/d1b/trace_8h.html#aa1b39db9477c48695273170aff3c3a7a">OPENER_TRACE_WARN</a></div><div class="ttdeci">#define OPENER_TRACE_WARN(...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d1b/trace_8h_source.html#l00073">trace.h:73</a></div></div>
<div class="ttc" id="structCIP__ConnectionObject_html_a50bc2fe3601aac1722fc9971b02b10c1"><div class="ttname"><a href="../../d9/db7/structCIP__ConnectionObject.html#a50bc2fe3601aac1722fc9971b02b10c1">CIP_ConnectionObject::m_pfTimeOutFunc</a></div><div class="ttdeci">TConnTimeOutFunc m_pfTimeOutFunc</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da3/cipconnectionmanager_8h_source.html#l00188">cipconnectionmanager.h:188</a></div></div>
<div class="ttc" id="structCIP__ConnectionObject_html_a49fc2f2e6538b00035d5a9325984c449"><div class="ttname"><a href="../../d9/db7/structCIP__ConnectionObject.html#a49fc2f2e6538b00035d5a9325984c449">CIP_ConnectionObject::m_pfReceiveDataFunc</a></div><div class="ttdeci">TConnRecvDataFunc m_pfReceiveDataFunc</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da3/cipconnectionmanager_8h_source.html#l00190">cipconnectionmanager.h:190</a></div></div>
<div class="ttc" id="structCIP__ConnectionObject_html_a0615b54e87b0d5c1f39f9564b28bbb8e"><div class="ttname"><a href="../../d9/db7/structCIP__ConnectionObject.html#a0615b54e87b0d5c1f39f9564b28bbb8e">CIP_ConnectionObject::m_pfSendDataFunc</a></div><div class="ttdeci">TConnSendDataFunc m_pfSendDataFunc</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da3/cipconnectionmanager_8h_source.html#l00189">cipconnectionmanager.h:189</a></div></div>
<div class="ttc" id="structCIP__ConnectionObject_html_aefd6577bc5bc4b1da833675af80b8420"><div class="ttname"><a href="../../d9/db7/structCIP__ConnectionObject.html#aefd6577bc5bc4b1da833675af80b8420">CIP_ConnectionObject::TransmissionTriggerTimer</a></div><div class="ttdeci">EIP_INT32 TransmissionTriggerTimer</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da3/cipconnectionmanager_8h_source.html#l00169">cipconnectionmanager.h:169</a></div></div>
<div class="ttc" id="group__CIP__CALLBACK__API_html_ga69b8c5aa40b203bd08a0545402142216"><div class="ttname"><a href="../../d5/dc5/group__CIP__CALLBACK__API.html#ga69b8c5aa40b203bd08a0545402142216">IApp_IOConnectionEvent</a></div><div class="ttdeci">void IApp_IOConnectionEvent(unsigned int pa_unOutputAssembly, unsigned int pa_unInputAssembly, EIOConnectionEvent pa_eIOConnectionEvent)</div><div class="ttdoc">Inform the application on changes occurred for a connection. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d87/basiccip_8c_source.html#l00064">basiccip.c:64</a></div></div>
<div class="ttc" id="group__ENCAP_html_ga738d386bb3919d75bb14dcb40ca5389f"><div class="ttname"><a href="../../d4/d91/group__ENCAP.html#ga738d386bb3919d75bb14dcb40ca5389f">htols</a></div><div class="ttdeci">void htols(EIP_UINT16 data, EIP_UINT8 **pa_buf)</div><div class="ttdoc">converts UINT16 data from host to little endian an writes it to pa_buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d73/endianconv_8c_source.html#l00048">endianconv.c:48</a></div></div>
<div class="ttc" id="structCIPEPath_html_a3696a7dfb960fc5ecf75712d0e1cdee7"><div class="ttname"><a href="../../dd/d36/structCIPEPath.html#a3696a7dfb960fc5ecf75712d0e1cdee7">CIPEPath::InstanceNr</a></div><div class="ttdeci">EIP_UINT16 InstanceNr</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d28/ciptypes_8h_source.html#l00239">ciptypes.h:239</a></div></div>
<div class="ttc" id="cpf_8h_html_afda749dea00e51310eb9748c22f70f67"><div class="ttname"><a href="../../d0/dff/cpf_8h.html#afda749dea00e51310eb9748c22f70f67">CIP_ITEM_ID_SOCKADDRINFO_T_TO_O</a></div><div class="ttdeci">#define CIP_ITEM_ID_SOCKADDRINFO_T_TO_O</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dff/cpf_8h_source.html#l00030">cpf.h:30</a></div></div>
<div class="ttc" id="group__ENCAP_html_ga6ce01de4023c01608d2bdfdb584d59d3"><div class="ttname"><a href="../../d4/d91/group__ENCAP.html#ga6ce01de4023c01608d2bdfdb584d59d3">ltohs</a></div><div class="ttdeci">EIP_UINT16 ltohs(EIP_UINT8 **pa_buf)</div><div class="ttdoc">Reads EIP_UINT16 from *pa_buf and converts little endian to host. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d73/endianconv_8c_source.html#l00020">endianconv.c:20</a></div></div>
<div class="ttc" id="structCIPConnectionPath_html_a5d8a3709c9aa5edd081863163c93b8bf"><div class="ttname"><a href="../../df/dff/structCIPConnectionPath.html#a5d8a3709c9aa5edd081863163c93b8bf">CIPConnectionPath::ConnectionPoint</a></div><div class="ttdeci">EIP_UINT32 ConnectionPoint[3]</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d28/ciptypes_8h_source.html#l00246">ciptypes.h:246</a></div></div>
<div class="ttc" id="cipioconnection_8c_html_a9243c246dc6021572d661b9b923a6b7a"><div class="ttname"><a href="../../df/d03/cipioconnection_8c.html#a9243c246dc6021572d661b9b923a6b7a">handleConfigData</a></div><div class="ttdeci">EIP_UINT16 handleConfigData(S_CIP_Class *pa_pstAssemblyClass, S_CIP_ConnectionObject *pa_pstIOConnObj)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d03/cipioconnection_8c_source.html#l00511">cipioconnection.c:511</a></div></div>
<div class="ttc" id="group__CIP__CALLBACK__API_html_gabe8a4c7e971381f2ee46db5148aecf47"><div class="ttname"><a href="../../d5/dc5/group__CIP__CALLBACK__API.html#gabe8a4c7e971381f2ee46db5148aecf47">IApp_SendUDPData</a></div><div class="ttdeci">EIP_STATUS IApp_SendUDPData(struct sockaddr_in *pa_pstAddr, int pa_nSockFd, EIP_UINT8 *pa_acData, EIP_UINT16 pa_nDataLength)</div><div class="ttdoc">create a producing or consuming UDP socket </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d07/LM3S8962_2networkhandler_8c_source.html#l00345">networkhandler.c:345</a></div></div>
<div class="ttc" id="structCIP__ConnectionObject_html_a1bb389bba849da33147b9ea58eb1a8dc"><div class="ttname"><a href="../../d9/db7/structCIP__ConnectionObject.html#a1bb389bba849da33147b9ea58eb1a8dc">CIP_ConnectionObject::m_stOriginatorAddr</a></div><div class="ttdeci">struct sockaddr_in m_stOriginatorAddr</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da3/cipconnectionmanager_8h_source.html#l00183">cipconnectionmanager.h:183</a></div></div>
<div class="ttc" id="group__CIP__API_html_ga9919da1c597955301da602a23a470801"><div class="ttname"><a href="../../d2/dc9/group__CIP__API.html#ga9919da1c597955301da602a23a470801">getCIPInstance</a></div><div class="ttdeci">S_CIP_Instance * getCIPInstance(S_CIP_Class *pa_pstClass, EIP_UINT32 pa_nInstanceNr)</div><div class="ttdoc">Get a pointer to an instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7d/cipmessagerouter_8c_source.html#l00109">cipmessagerouter.c:109</a></div></div>
<div class="ttc" id="cipconnectionmanager_8h_html_aaf0e63587791cb51f4c8642a527f41ed"><div class="ttname"><a href="../../d2/da3/cipconnectionmanager_8h.html#aaf0e63587791cb51f4c8642a527f41ed">CIP_CON_MGR_ERROR_INVALID_T_TO_O_CONNECTION_SIZE</a></div><div class="ttdeci">#define CIP_CON_MGR_ERROR_INVALID_T_TO_O_CONNECTION_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da3/cipconnectionmanager_8h_source.html#l00030">cipconnectionmanager.h:30</a></div></div>
<div class="ttc" id="structCIP__ConnectionObject_html_a584fbd0d043ac2fc7a126a7965b449ad"><div class="ttname"><a href="../../d9/db7/structCIP__ConnectionObject.html#a584fbd0d043ac2fc7a126a7965b449ad">CIP_ConnectionObject::CorrectOTSize</a></div><div class="ttdeci">EIP_UINT16 CorrectOTSize</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da3/cipconnectionmanager_8h_source.html#l00196">cipconnectionmanager.h:196</a></div></div>
<div class="ttc" id="LM3S8962_2sample__application_2opener__user__conf_8h_html_a7b5e7d71f666ba97788b35be1617c40a"><div class="ttname"><a href="../../dc/d75/LM3S8962_2sample__application_2opener__user__conf_8h.html#a7b5e7d71f666ba97788b35be1617c40a">OPENER_ASSERT</a></div><div class="ttdeci">#define OPENER_ASSERT(assertion)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d75/LM3S8962_2sample__application_2opener__user__conf_8h_source.html#l00159">opener_user_conf.h:159</a></div></div>
<div class="ttc" id="cpf_8h_html_a7250c30ae63ae05258f8bb0239aad93e"><div class="ttname"><a href="../../d0/dff/cpf_8h.html#a7250c30ae63ae05258f8bb0239aad93e">CIP_ITEM_ID_SOCKADDRINFO_O_TO_T</a></div><div class="ttdeci">#define CIP_ITEM_ID_SOCKADDRINFO_O_TO_T</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dff/cpf_8h_source.html#l00029">cpf.h:29</a></div></div>
<div class="ttc" id="cipconnectionmanager_8h_html_a8e858ac9b6a0aa7dfc7db2077795e44f"><div class="ttname"><a href="../../d2/da3/cipconnectionmanager_8h.html#a8e858ac9b6a0aa7dfc7db2077795e44f">CIP_CON_MGR_INVALID_CONSUMING_APPLICATION_PATH</a></div><div class="ttdeci">#define CIP_CON_MGR_INVALID_CONSUMING_APPLICATION_PATH</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da3/cipconnectionmanager_8h_source.html#l00036">cipconnectionmanager.h:36</a></div></div>
<div class="ttc" id="structCIP__Instance_html"><div class="ttname"><a href="../../db/db2/structCIP__Instance.html">CIP_Instance</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d28/ciptypes_8h_source.html#l00299">ciptypes.h:299</a></div></div>
<div class="ttc" id="cipconnectionmanager_8h_html_a5868f1efb530265287d500beb2eff1a8"><div class="ttname"><a href="../../d2/da3/cipconnectionmanager_8h.html#a5868f1efb530265287d500beb2eff1a8">CIP_CONN_CYCLIC_CONNECTION</a></div><div class="ttdeci">#define CIP_CONN_CYCLIC_CONNECTION</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da3/cipconnectionmanager_8h_source.html#l00045">cipconnectionmanager.h:45</a></div></div>
<div class="ttc" id="cipioconnection_8c_html_a3aa0de23bee41939b97836678ee48e39"><div class="ttname"><a href="../../df/d03/cipioconnection_8c.html#a3aa0de23bee41939b97836678ee48e39">closeCommChannelsAndRemoveFromActiveConnsList</a></div><div class="ttdeci">void closeCommChannelsAndRemoveFromActiveConnsList(struct CIP_ConnectionObject *pa_pstConnObjData)</div><div class="ttdoc">close the communication channels of the given connection and remove it from the active connections li...</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d03/cipioconnection_8c_source.html#l00833">cipioconnection.c:833</a></div></div>
<div class="ttc" id="appcontype_8c_html_a557a4b1f4d98b88a3d147068e67567d8"><div class="ttname"><a href="../../d1/dbc/appcontype_8c.html#a557a4b1f4d98b88a3d147068e67567d8">connectionWithSameConfigPointExists</a></div><div class="ttdeci">EIP_BOOL8 connectionWithSameConfigPointExists(EIP_UINT32 pa_unConfigPoint)</div><div class="ttdoc">Check if there is an established connection that uses the same config point. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dbc/appcontype_8c_source.html#l00389">appcontype.c:389</a></div></div>
<div class="ttc" id="structS__CIP__CPF__Data_html_ae6feb1e1526c8c85d08b2c62b343f636"><div class="ttname"><a href="../../de/d1c/structS__CIP__CPF__Data.html#ae6feb1e1526c8c85d08b2c62b343f636">S_CIP_CPF_Data::AddrInfo</a></div><div class="ttdeci">S_SockAddrInfo_Item AddrInfo[2]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dff/cpf_8h_source.html#l00070">cpf.h:70</a></div></div>
<div class="ttc" id="cipioconnection_8c_html_a667690c04e476a38fa3b8e555a812e44"><div class="ttname"><a href="../../df/d03/cipioconnection_8c.html#a667690c04e476a38fa3b8e555a812e44">openCommunicationChannels</a></div><div class="ttdeci">int openCommunicationChannels(struct CIP_ConnectionObject *pa_pstIOConnObj)</div><div class="ttdoc">Take the data given in the connection object structure and open the necessary communication channels...</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d03/cipioconnection_8c_source.html#l00777">cipioconnection.c:777</a></div></div>
<div class="ttc" id="cipconnectionmanager_8h_html_abe63966094bb9839304a78cf35a86e8f"><div class="ttname"><a href="../../d2/da3/cipconnectionmanager_8h.html#abe63966094bb9839304a78cf35a86e8f">CONSUMING</a></div><div class="ttdeci">#define CONSUMING</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da3/cipconnectionmanager_8h_source.html#l00014">cipconnectionmanager.h:14</a></div></div>
<div class="ttc" id="structS__SockAddrInfo__Item_html_a9806035f5fd2ec15324f4bb31e07434c"><div class="ttname"><a href="../../d5/d70/structS__SockAddrInfo__Item.html#a9806035f5fd2ec15324f4bb31e07434c">S_SockAddrInfo_Item::nsin_family</a></div><div class="ttdeci">EIP_INT16 nsin_family</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dff/cpf_8h_source.html#l00057">cpf.h:57</a></div></div>
<div class="ttc" id="structS__Data__Item_html_a1e4cab0b636544096d2ab066a8e8ffd7"><div class="ttname"><a href="../../d6/d2b/structS__Data__Item.html#a1e4cab0b636544096d2ab066a8e8ffd7">S_Data_Item::TypeID</a></div><div class="ttdeci">EIP_UINT16 TypeID</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dff/cpf_8h_source.html#l00048">cpf.h:48</a></div></div>
<div class="ttc" id="structCIPEPath_html_ae2a8365173b69a9c79dce52202bccf55"><div class="ttname"><a href="../../dd/d36/structCIPEPath.html#ae2a8365173b69a9c79dce52202bccf55">CIPEPath::PathSize</a></div><div class="ttdeci">EIP_UINT8 PathSize</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d28/ciptypes_8h_source.html#l00237">ciptypes.h:237</a></div></div>
<div class="ttc" id="cipassembly_8h_html"><div class="ttname"><a href="../../de/df4/cipassembly_8h.html">cipassembly.h</a></div></div>
<div class="ttc" id="structCIP__ConnectionObject_html_ac097ff6b38fea770e9838bc10a5338b6"><div class="ttname"><a href="../../d9/db7/structCIP__ConnectionObject.html#ac097ff6b38fea770e9838bc10a5338b6">CIP_ConnectionObject::TransportTypeClassTrigger</a></div><div class="ttdeci">EIP_BYTE TransportTypeClassTrigger</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da3/cipconnectionmanager_8h_source.html#l00151">cipconnectionmanager.h:151</a></div></div>
<div class="ttc" id="cipconnectionmanager_8h_html_ac619ee9c89d89550faf4c94db94b78d3"><div class="ttname"><a href="../../d2/da3/cipconnectionmanager_8h.html#ac619ee9c89d89550faf4c94db94b78d3">CIP_CON_MGR_ERROR_INVALID_O_TO_T_CONNECTION_SIZE</a></div><div class="ttdeci">#define CIP_CON_MGR_ERROR_INVALID_O_TO_T_CONNECTION_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da3/cipconnectionmanager_8h_source.html#l00029">cipconnectionmanager.h:29</a></div></div>
<div class="ttc" id="LM3S8962_2sample__application_2opener__user__conf_8h_html_aee16f150a7d925445e763ff326b610e8"><div class="ttname"><a href="../../dc/d75/LM3S8962_2sample__application_2opener__user__conf_8h.html#aee16f150a7d925445e763ff326b610e8">OPENER_PRODUCED_DATA_HAS_RUN_IDLE_HEADER</a></div><div class="ttdeci">#define OPENER_PRODUCED_DATA_HAS_RUN_IDLE_HEADER</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d75/LM3S8962_2sample__application_2opener__user__conf_8h_source.html#l00129">opener_user_conf.h:129</a></div></div>
<div class="ttc" id="ciptypes_8h_html_a47e9326e14025a4fc4287c3f233d23dda3b48d9d5c14f59727645ae9e89a384d2"><div class="ttname"><a href="../../df/d28/ciptypes_8h.html#a47e9326e14025a4fc4287c3f233d23dda3b48d9d5c14f59727645ae9e89a384d2">enClosed</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d28/ciptypes_8h_source.html#l00218">ciptypes.h:218</a></div></div>
<div class="ttc" id="cipconnectionmanager_8h_html_af89280d5d1c081ec35f644a9289185c7"><div class="ttname"><a href="../../d2/da3/cipconnectionmanager_8h.html#af89280d5d1c081ec35f644a9289185c7">CIP_CON_MGR_ERROR_OWNERSHIP_CONFLICT</a></div><div class="ttdeci">#define CIP_CON_MGR_ERROR_OWNERSHIP_CONFLICT</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da3/cipconnectionmanager_8h_source.html#l00025">cipconnectionmanager.h:25</a></div></div>
<div class="ttc" id="structCIP__ConnectionObject_html_a51154981425c11b5facaac4a7e7e8f02"><div class="ttname"><a href="../../d9/db7/structCIP__ConnectionObject.html#a51154981425c11b5facaac4a7e7e8f02">CIP_ConnectionObject::SequenceCountProducing</a></div><div class="ttdeci">EIP_UINT16 SequenceCountProducing</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da3/cipconnectionmanager_8h_source.html#l00166">cipconnectionmanager.h:166</a></div></div>
<div class="ttc" id="structsockaddr__in_html_a55e7794e0d51c51e0249aaa146b6575f"><div class="ttname"><a href="../../de/d38/structsockaddr__in.html#a55e7794e0d51c51e0249aaa146b6575f">sockaddr_in::sin_family</a></div><div class="ttdeci">u8_t sin_family</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d75/LM3S8962_2sample__application_2opener__user__conf_8h_source.html#l00032">opener_user_conf.h:32</a></div></div>
<div class="ttc" id="structCIPByteArray_html_a657afd7f5d6eec8e9ad5fd84fac4c437"><div class="ttname"><a href="../../d7/d0b/structCIPByteArray.html#a657afd7f5d6eec8e9ad5fd84fac4c437">CIPByteArray::Data</a></div><div class="ttdeci">EIP_BYTE * Data</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d28/ciptypes_8h_source.html#l00223">ciptypes.h:223</a></div></div>
<div class="ttc" id="structCIP__ConnectionObject_html_a07efec4e8e4d2663c603ef9ff9d80fa3"><div class="ttname"><a href="../../d9/db7/structCIP__ConnectionObject.html#a07efec4e8e4d2663c603ef9ff9d80fa3">CIP_ConnectionObject::ProducedConnectionPathLength</a></div><div class="ttdeci">EIP_UINT16 ProducedConnectionPathLength</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da3/cipconnectionmanager_8h_source.html#l00133">cipconnectionmanager.h:133</a></div></div>
<div class="ttc" id="structCIP__ConnectionObject_html_a5d5cd00e7b6be785b5c41cf3027aaf90"><div class="ttname"><a href="../../d9/db7/structCIP__ConnectionObject.html#a5d5cd00e7b6be785b5c41cf3027aaf90">CIP_ConnectionObject::ProducedConnectionSize</a></div><div class="ttdeci">EIP_UINT16 ProducedConnectionSize</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da3/cipconnectionmanager_8h_source.html#l00124">cipconnectionmanager.h:124</a></div></div>
<div class="ttc" id="cipconnectionmanager_8c_html_a37726ad0c33ff6afe7339fb0986fc3b7"><div class="ttname"><a href="../../d5/d35/cipconnectionmanager_8c.html#a37726ad0c33ff6afe7339fb0986fc3b7">addNewActiveConnection</a></div><div class="ttdeci">void addNewActiveConnection(S_CIP_ConnectionObject *pa_pstConn)</div><div class="ttdoc">Insert the given connection object to the list of currently active and managed connections. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d35/cipconnectionmanager_8c_source.html#l01227">cipconnectionmanager.c:1227</a></div></div>
<div class="ttc" id="group__ENCAP_html_gaa00e394da5cd80135cdab7d4f3d88819"><div class="ttname"><a href="../../d4/d91/group__ENCAP.html#gaa00e394da5cd80135cdab7d4f3d88819">htoll</a></div><div class="ttdeci">void htoll(EIP_UINT32 data, EIP_UINT8 **pa_buf)</div><div class="ttdoc">Converts UINT32 data from host to little endian and writes it to pa_buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d73/endianconv_8c_source.html#l00063">endianconv.c:63</a></div></div>
<div class="ttc" id="ciptcpipinterface_8c_html_a5ee5da7a701530920d8c84651bde8f49"><div class="ttname"><a href="../../dd/d20/ciptcpipinterface_8c.html#a5ee5da7a701530920d8c84651bde8f49">g_stMultiCastconfig</a></div><div class="ttdeci">SMcastConfig g_stMultiCastconfig</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d20/ciptcpipinterface_8c_source.html#l00047">ciptcpipinterface.c:47</a></div></div>
<div class="ttc" id="ciptypes_8h_html_a47e9326e14025a4fc4287c3f233d23dda75bfb3635ff4ac5b218a07d87f8b2185"><div class="ttname"><a href="../../df/d28/ciptypes_8h.html#a47e9326e14025a4fc4287c3f233d23dda75bfb3635ff4ac5b218a07d87f8b2185">enTimedOut</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d28/ciptypes_8h_source.html#l00218">ciptypes.h:218</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="../../dir_527d9ccdfcaa9588043fa6eaabe08755.html">cip</a></li><li class="navelem"><a class="el" href="../../df/d03/cipioconnection_8c.html">cipioconnection.c</a></li>
    <li class="footer">Generated on Tue Oct 20 2015 10:14:15 for OpENer - Open Source EtherNet/IP(TM)  I/O Target Stack by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.9.1 </li>
  </ul>
</div>
</body>
</html>
