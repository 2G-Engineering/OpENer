<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>OpENer - Open Source EtherNet/IP(TM)  I/O Target Stack: src/enet_encap/encap.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">OpENer - Open Source EtherNet/IP(TM)  I/O Target Stack
   &#160;<span id="projectnumber">1.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('encap_8c_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">encap.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="encap_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*******************************************************************************</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Copyright (c) 2009, Rockwell Automation, Inc.</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * All rights reserved. </span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> ******************************************************************************/</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="opener__api_8h.html">opener_api.h</a>&quot;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="cpf_8h.html">cpf.h</a>&quot;</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="encap_8h.html">encap.h</a>&quot;</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="endianconv_8h.html">endianconv.h</a>&quot;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="cipcommon_8h.html">cipcommon.h</a>&quot;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="cipmessagerouter_8h.html">cipmessagerouter.h</a>&quot;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="cipconnectionmanager_8h.html">cipconnectionmanager.h</a>&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="cipidentity_8h.html">cipidentity.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">/*Identity data from cipidentity.c*/</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="keyword">extern</span> <a class="code" href="typedefs_8h.html#a72b3e7231681538d97279aa001872297">EIP_UINT16</a> <a class="code" href="encap_8c.html#ab6e6f153f2d21968b71362a7b0af6240">VendorID</a>;</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="keyword">extern</span> <a class="code" href="typedefs_8h.html#a72b3e7231681538d97279aa001872297">EIP_UINT16</a> <a class="code" href="encap_8c.html#a04f64e9b1e0897958cc336cbf3366d18">DeviceType</a>;</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="keyword">extern</span> <a class="code" href="typedefs_8h.html#a72b3e7231681538d97279aa001872297">EIP_UINT16</a> <a class="code" href="encap_8c.html#a298bf8dd05ad3a16cf15f5b96d8499c7">ProductCode</a>;</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="keyword">extern</span> <a class="code" href="structCIPRevision.html">S_CIP_Revision</a> <a class="code" href="encap_8c.html#a39e9e92bf22bcf3708518f4aeac70132">Revison</a>;</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="keyword">extern</span> <a class="code" href="typedefs_8h.html#a72b3e7231681538d97279aa001872297">EIP_UINT16</a> <a class="code" href="encap_8c.html#aaa8bf1bf94c599bc4db8c2bb2f0531b3">ID_Status</a>;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="keyword">extern</span> <a class="code" href="typedefs_8h.html#a4f1d71ddb23827c1af144276d0dd1947">EIP_UINT32</a> <a class="code" href="encap_8c.html#ad57df5dc2f859a02fc2dab3773c5ceab">SerialNumber</a>;</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="keyword">extern</span> <a class="code" href="structCIPShortString.html">S_CIP_Short_String</a> <a class="code" href="encap_8c.html#abfbc79b89f57d02418c75dbe0961b9cd">ProductName</a>;</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">/*ip address data taken from TCPIPInterfaceObject*/</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="keyword">extern</span> <a class="code" href="structCIPTCPIPNetworkInterfaceConfiguration.html">S_CIP_TCPIPNetworkInterfaceConfiguration</a> <a class="code" href="encap_8c.html#a01aebef0d051005258f6b2dc64ace1c3">Interface_Configuration</a>;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">/*** defines ***/</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div>
<div class="line"><a name="l00031"></a><span class="lineno"><a class="line" href="encap_8c.html#a49f746b3f514de8a1ae8551af75d4e67">   31</a></span>&#160;<span class="preprocessor">#define ITEM_ID_LISTIDENTITY 0x000C</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div>
<div class="line"><a name="l00033"></a><span class="lineno"><a class="line" href="encap_8c.html#a2d38b4e49b5b3ac0c85931d3bcf621b8">   33</a></span>&#160;<span class="preprocessor">#define SUPPORTED_PROTOCOL_VERSION 1</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div>
<div class="line"><a name="l00035"></a><span class="lineno"><a class="line" href="encap_8c.html#a622363b442e7e452daa79ef65dc54499">   35</a></span>&#160;<span class="preprocessor">#define SUPPORTED_OPTIONS_MASK  0x00  </span><span class="comment">/*Mask of which options are supported as of the current CIP specs no other option value as 0 should be supported.*/</span><span class="preprocessor"></span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div>
<div class="line"><a name="l00037"></a><span class="lineno"><a class="line" href="encap_8c.html#ac8f21143d6f4be9ea83079a9e77677d1">   37</a></span>&#160;<span class="preprocessor">#define ENCAPSULATION_HEADER_SESSION_HANDLE_POS 4   </span><span class="comment">/*the position of the session handle within the encapsulation header*/</span><span class="preprocessor"></span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div>
<div class="line"><a name="l00039"></a><span class="lineno"><a class="line" href="encap_8c.html#a12d1ddd538779992a993351fa587b9e0">   39</a></span>&#160;<span class="preprocessor">#define INVALID_SESSION -1</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div>
<div class="line"><a name="l00041"></a><span class="lineno"><a class="line" href="encap_8c.html#a4bdfd59456b03601ed310cae2d4bf733">   41</a></span>&#160;<span class="preprocessor">#define SENDER_CONTEXT_SIZE 8                   </span><span class="comment">/*size of sender context in encapsulation header*/</span><span class="preprocessor"></span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">/* definition of known encapsulation commands */</span></div>
<div class="line"><a name="l00044"></a><span class="lineno"><a class="line" href="encap_8c.html#a1c8ff172e0cba5fcdb26f7b06b86bb8a">   44</a></span>&#160;<span class="preprocessor">#define COMMAND_NOP                     0x0000</span></div>
<div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="encap_8c.html#a052f9fa1f65ae3d212201184a1022129">   45</a></span>&#160;<span class="preprocessor">#define COMMAND_LISTSERVICES            0x0004</span></div>
<div class="line"><a name="l00046"></a><span class="lineno"><a class="line" href="encap_8c.html#a899bf7f0083315953ae5dd3abcc72a69">   46</a></span>&#160;<span class="preprocessor">#define COMMAND_LISTIDENTITY            0x0063</span></div>
<div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="encap_8c.html#a14527c419c89e7d55210374e4cfb78a2">   47</a></span>&#160;<span class="preprocessor">#define COMMAND_LISTINTERFACES          0x0064</span></div>
<div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="encap_8c.html#ae63911b8eb1290e8ded9bea8bb93d2fd">   48</a></span>&#160;<span class="preprocessor">#define COMMAND_REGISTERSESSION         0x0065</span></div>
<div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="encap_8c.html#a36f3d3237aa73cd030e56277b4a042e2">   49</a></span>&#160;<span class="preprocessor">#define COMMAND_UNREGISTERSESSION       0x0066</span></div>
<div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="encap_8c.html#ad2ad634c2eb9f00f8c524ac7a2116cfc">   50</a></span>&#160;<span class="preprocessor">#define COMMAND_SENDRRDATA              0x006F</span></div>
<div class="line"><a name="l00051"></a><span class="lineno"><a class="line" href="encap_8c.html#acee359becef6eab64950b6ba9944cf8b">   51</a></span>&#160;<span class="preprocessor">#define COMMAND_SENDUNITDATA            0x0070</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">/* definition of capability flags */</span></div>
<div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="encap_8c.html#a82911003e9d79444b031ffb8cf1ab1cc">   54</a></span>&#160;<span class="preprocessor">#define SUPPORT_CIP_TCP                 0x0020</span></div>
<div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="encap_8c.html#a1426ca2396959f47ff5474905393e2f3">   55</a></span>&#160;<span class="preprocessor">#define SUPPORT_CIP_UDP_CLASS_0_OR_1    0x0100</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div>
<div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="encap_8c.html#aba848fec29c4e01df56756077e6a777b">   57</a></span>&#160;<span class="preprocessor">#define ENCAP_NUMBER_OF_SUPPORTED_DELAYED_ENCAP_MESSAGES 2 </span><span class="comment">/*According to EIP spec at least 2 delayed message requests should be supported */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div>
<div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="encap_8c.html#a16f520a54eb1c9fb635985bfc123aa8c">   59</a></span>&#160;<span class="preprocessor">#define ENCAP_MAX_DELAYED_ENCAP_MESSAGE_SIZE  (ENCAPSULATION_HEADER_LENGTH + 39 + sizeof(OPENER_DEVICE_NAME)) </span><span class="comment">/* currently we only have the size of an encapsulation message */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">/* Encapsulation layer data  */</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div>
<div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="structSDelayedEncapsulationMessage.html">   63</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structSDelayedEncapsulationMessage.html">SDelayedEncapsulationMessage</a></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;{</div>
<div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="structSDelayedEncapsulationMessage.html#ab9de1ca60a6cceae2286585f1836f0f4">   65</a></span>&#160;  <a class="code" href="typedefs_8h.html#acbe46633947878fe03e883b04984523c">EIP_INT32</a> <a class="code" href="structSDelayedEncapsulationMessage.html#ab9de1ca60a6cceae2286585f1836f0f4">m_unTimeOut</a>;</div>
<div class="line"><a name="l00066"></a><span class="lineno"><a class="line" href="structSDelayedEncapsulationMessage.html#ae5cb0fcf4bb3307b92e5b47894db8a4e">   66</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="structSDelayedEncapsulationMessage.html#ae5cb0fcf4bb3307b92e5b47894db8a4e">m_nSocket</a>;</div>
<div class="line"><a name="l00067"></a><span class="lineno"><a class="line" href="structSDelayedEncapsulationMessage.html#aa2386a00551dc494c30d7fb279d50abd">   67</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structsockaddr__in.html">sockaddr_in</a> <a class="code" href="structSDelayedEncapsulationMessage.html#aa2386a00551dc494c30d7fb279d50abd">m_stSendToAddr</a>;</div>
<div class="line"><a name="l00068"></a><span class="lineno"><a class="line" href="structSDelayedEncapsulationMessage.html#ad14c79ec74a1f98894655955c3717ed0">   68</a></span>&#160;  <a class="code" href="typedefs_8h.html#affeec34c5c7e6af4e283dfe12d4301c9">EIP_BYTE</a> <a class="code" href="structSDelayedEncapsulationMessage.html#ad14c79ec74a1f98894655955c3717ed0">m_anMsg</a>[<a class="code" href="encap_8c.html#a16f520a54eb1c9fb635985bfc123aa8c">ENCAP_MAX_DELAYED_ENCAP_MESSAGE_SIZE</a>];</div>
<div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="structSDelayedEncapsulationMessage.html#a11418dbbd1800dcaa00db887bf1c5cb8">   69</a></span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structSDelayedEncapsulationMessage.html#a11418dbbd1800dcaa00db887bf1c5cb8">m_unMessageSize</a>;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;};</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div>
<div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="encap_8c.html#a25122df9eaa3cb4b33a7d386bec5ed84">   72</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structS__Encapsulation__Interface__Information.html">S_Encapsulation_Interface_Information</a> <a class="code" href="encap_8c.html#a25122df9eaa3cb4b33a7d386bec5ed84">g_stInterfaceInformation</a>;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div>
<div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="encap_8c.html#abb7ffd35682c94bdc937f52890b3b4d3">   74</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="encap_8c.html#abb7ffd35682c94bdc937f52890b3b4d3">anRegisteredSessions</a>[<a class="code" href="LM3S8962_2sample__application_2opener__user__conf_8h.html#a8d73780f7a1f5d9977d7388ebfbe1f93">OPENER_NUMBER_OF_SUPPORTED_SESSIONS</a>];</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div>
<div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="encap_8c.html#a102bf4b6fe8090576444643c487cd78a">   76</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structSDelayedEncapsulationMessage.html">SDelayedEncapsulationMessage</a> <a class="code" href="encap_8c.html#a102bf4b6fe8090576444643c487cd78a">g_stDelayedEncapsulationMessages</a>[<a class="code" href="encap_8c.html#aba848fec29c4e01df56756077e6a777b">ENCAP_NUMBER_OF_SUPPORTED_DELAYED_ENCAP_MESSAGES</a>];</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">/*** private functions ***/</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="keywordtype">void</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<a class="code" href="encap_8c.html#a5b3259751a6bf74cbfdd3fb83a9263e7">handleReceivedListServicesCmd</a>(<span class="keyword">struct</span> <a class="code" href="structS__Encapsulation__Data.html">S_Encapsulation_Data</a> *pa_stReceiveData);</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="keywordtype">void</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<a class="code" href="encap_8c.html#a9eff9d73b7c06fa8e8183ee390306266">handleReceivedListInterfacesCmd</a>(<span class="keyword">struct</span> <a class="code" href="structS__Encapsulation__Data.html">S_Encapsulation_Data</a> *pa_stReceiveData);</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="keywordtype">void</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<a class="code" href="encap_8c.html#aa0c1743405c3991d57da22b83b6394e0">handleReceivedListIdentityCmdTCP</a>(<span class="keyword">struct</span> <a class="code" href="structS__Encapsulation__Data.html">S_Encapsulation_Data</a> *pa_stReceiveData);</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="keywordtype">void</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<a class="code" href="encap_8c.html#a6c6fcdf7201b77d91fcafd3fa1b89b4c">handleReceivedListIdentityCmdUDP</a>(<span class="keywordtype">int</span> pa_nSocket,</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="keyword">struct</span> <a class="code" href="structsockaddr__in.html">sockaddr_in</a> *pa_pstFromAddr,</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keyword">struct</span> <a class="code" href="structS__Encapsulation__Data.html">S_Encapsulation_Data</a> *pa_stReceiveData);</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="keywordtype">void</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<a class="code" href="encap_8c.html#adadf7d46d3b140b2939889e41c76952a">handleReceivedRegisterSessionCmd</a>(<span class="keywordtype">int</span> pa_nSockfd,</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="keyword">struct</span> <a class="code" href="structS__Encapsulation__Data.html">S_Encapsulation_Data</a> *pa_stReceiveData);</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<a class="code" href="typedefs_8h.html#adf0533b554c6a20e73928f231e5286d9">EIP_STATUS</a></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<a class="code" href="encap_8c.html#a210e10925483a76e5828918993d33428">handleReceivedUnregisterSessionCmd</a>(</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="keyword">struct</span> <a class="code" href="structS__Encapsulation__Data.html">S_Encapsulation_Data</a> *pa_stReceiveData);</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<a class="code" href="typedefs_8h.html#adf0533b554c6a20e73928f231e5286d9">EIP_STATUS</a></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<a class="code" href="encap_8c.html#a9dc9ebf33956f4e735c48736ad9f9045">handleReceivedSendUnitDataCmd</a>(<span class="keyword">struct</span> <a class="code" href="structS__Encapsulation__Data.html">S_Encapsulation_Data</a> *pa_stReceiveData);</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<a class="code" href="typedefs_8h.html#adf0533b554c6a20e73928f231e5286d9">EIP_STATUS</a></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<a class="code" href="encap_8c.html#aa2bc1514f02b7d5270201f96f540e412">handleReceivedSendRRDataCmd</a>(<span class="keyword">struct</span> <a class="code" href="structS__Encapsulation__Data.html">S_Encapsulation_Data</a> *pa_stReceiveData);</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="keywordtype">int</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<a class="code" href="encap_8c.html#aab7e6a84250ddb749a082ae4e69c5034">getFreeSessionIndex</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<a class="code" href="typedefs_8h.html#a824c4bdde2e6a43bc9c58b5d2f0c034e">EIP_INT16</a></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<a class="code" href="encap_8c.html#a41a000c4d1d14e4d29855d6fe6dd64cb">createEncapsulationStructure</a>(<a class="code" href="typedefs_8h.html#a811fdad4b361d09293f3bd0b814b8e18">EIP_UINT8</a> * buf, <span class="keywordtype">int</span> length,</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="keyword">struct</span> <a class="code" href="structS__Encapsulation__Data.html">S_Encapsulation_Data</a> *pa_S_ReceiveData);</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<a class="code" href="typedefs_8h.html#adf0533b554c6a20e73928f231e5286d9">EIP_STATUS</a></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<a class="code" href="encap_8c.html#a0099080d916fa573196c16582fec7ecd">checkRegisteredSessions</a>(<span class="keyword">struct</span> <a class="code" href="structS__Encapsulation__Data.html">S_Encapsulation_Data</a> *pa_S_ReceiveData);</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="keywordtype">int</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<a class="code" href="encap_8c.html#ac310f4fd2bad17d663dded4094d041c9">encapsulate_data</a>(<span class="keyword">struct</span> <a class="code" href="structS__Encapsulation__Data.html">S_Encapsulation_Data</a> *pa_S_SendData);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="keywordtype">void</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<a class="code" href="encap_8c.html#a8f6e6fa53ccedfdc82e7a84170421772">determineDelayTime</a>(<a class="code" href="typedefs_8h.html#affeec34c5c7e6af4e283dfe12d4301c9">EIP_BYTE</a> *pa_acBufferStart,</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="keyword">struct</span> <a class="code" href="structSDelayedEncapsulationMessage.html">SDelayedEncapsulationMessage</a> *pa_pstDelayedMessageBuffer);</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="keywordtype">int</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<a class="code" href="encap_8c.html#a687bc1b004e12fd67cc724da086ea1de">encapsulateListIdentyResponseMessage</a>(<a class="code" href="typedefs_8h.html#affeec34c5c7e6af4e283dfe12d4301c9">EIP_BYTE</a> *pa_pacCommBuf);</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment">/*   void encapInit(void)</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment"> *   initialize session list and interface information.</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="keywordtype">void</span></div>
<div class="line"><a name="l00125"></a><span class="lineno"><a class="line" href="group__ENCAP.html#gac99d7cc31b4aec1f7454a5f1b6f56091">  125</a></span>&#160;<a class="code" href="group__ENCAP.html#gac99d7cc31b4aec1f7454a5f1b6f56091">encapInit</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;{</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <a class="code" href="endianconv_8c.html#a225c23a7ed872cd5a5d52c2e90870a83">determineEndianess</a>();</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  <span class="comment">/*initialize random numbers for random delayed response message generation</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment">   * we use the ip address as seed as suggested in the spec */</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  srand(Interface_Configuration.<a class="code" href="structCIPTCPIPNetworkInterfaceConfiguration.html#a4fdee1a1e331e9b170cc517b4334e78b">IPAddress</a>);</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  <span class="comment">/* initialize Sessions to invalid == free session */</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="LM3S8962_2sample__application_2opener__user__conf_8h.html#a8d73780f7a1f5d9977d7388ebfbe1f93">OPENER_NUMBER_OF_SUPPORTED_SESSIONS</a>; i++)</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    {</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;      <a class="code" href="encap_8c.html#abb7ffd35682c94bdc937f52890b3b4d3">anRegisteredSessions</a>[i] = <a class="code" href="typedefs_8h.html#ace23313ab660889d73718853b644405e">EIP_INVALID_SOCKET</a>;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    }</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="encap_8c.html#aba848fec29c4e01df56756077e6a777b">ENCAP_NUMBER_OF_SUPPORTED_DELAYED_ENCAP_MESSAGES</a>; i++)</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    {</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;      <a class="code" href="encap_8c.html#a102bf4b6fe8090576444643c487cd78a">g_stDelayedEncapsulationMessages</a>[i].<a class="code" href="structSDelayedEncapsulationMessage.html#ae5cb0fcf4bb3307b92e5b47894db8a4e">m_nSocket</a> = -1;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    }</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  <span class="comment">/*TODO make the interface information configurable*/</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  <span class="comment">/* initialize interface information */</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <a class="code" href="encap_8c.html#a25122df9eaa3cb4b33a7d386bec5ed84">g_stInterfaceInformation</a>.<a class="code" href="structS__Encapsulation__Interface__Information.html#a6d2dcde21bd1b1d7a14a6a8fad1cc143">TypeCode</a> = <a class="code" href="cpf_8h.html#aea98449f1952e948f55fcec44cc74a80">CIP_ITEM_ID_LISTSERVICE_RESPONSE</a>;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  <a class="code" href="encap_8c.html#a25122df9eaa3cb4b33a7d386bec5ed84">g_stInterfaceInformation</a>.<a class="code" href="structS__Encapsulation__Interface__Information.html#a43d6798b80f07b2b73ed77383de9d3e5">Length</a> = <span class="keyword">sizeof</span>(<a class="code" href="encap_8c.html#a25122df9eaa3cb4b33a7d386bec5ed84">g_stInterfaceInformation</a>);</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  <a class="code" href="encap_8c.html#a25122df9eaa3cb4b33a7d386bec5ed84">g_stInterfaceInformation</a>.<a class="code" href="structS__Encapsulation__Interface__Information.html#aad1250b418aad7ab3da300144dfb1824">EncapsulationProtocolVersion</a> = 1;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  <a class="code" href="encap_8c.html#a25122df9eaa3cb4b33a7d386bec5ed84">g_stInterfaceInformation</a>.<a class="code" href="structS__Encapsulation__Interface__Information.html#a79924fd06ee0dea3b1031baf79c6677f">CapabilityFlags</a> = <a class="code" href="encap_8c.html#a82911003e9d79444b031ffb8cf1ab1cc">SUPPORT_CIP_TCP</a></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;      | <a class="code" href="encap_8c.html#a1426ca2396959f47ff5474905393e2f3">SUPPORT_CIP_UDP_CLASS_0_OR_1</a>;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  strcpy((<span class="keywordtype">char</span> *) <a class="code" href="encap_8c.html#a25122df9eaa3cb4b33a7d386bec5ed84">g_stInterfaceInformation</a>.<a class="code" href="structS__Encapsulation__Interface__Information.html#a48a98a01c5eb96aae35d8f928b8677cd">NameofService</a>, <span class="stringliteral">&quot;Communications&quot;</span>);</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;}</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="keywordtype">int</span></div>
<div class="line"><a name="l00157"></a><span class="lineno"><a class="line" href="group__CIP__API.html#ga500c1fe8838de5ff32f25d8ad6958289">  157</a></span>&#160;<a class="code" href="group__CIP__API.html#ga500c1fe8838de5ff32f25d8ad6958289">handleReceivedExplictTCPData</a>(<span class="keywordtype">int</span> pa_socket, <a class="code" href="typedefs_8h.html#a811fdad4b361d09293f3bd0b814b8e18">EIP_UINT8</a> * pa_buf,</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> pa_length, <span class="keywordtype">int</span> *pa_nRemainingBytes)</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;{</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  <span class="keywordtype">int</span> nRetVal = 0;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  <span class="keyword">struct </span><a class="code" href="structS__Encapsulation__Data.html">S_Encapsulation_Data</a> sEncapData;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <span class="comment">/* eat the encapsulation header*/</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  <span class="comment">/* the structure contains a pointer to the encapsulated data*/</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  <span class="comment">/* returns how many bytes are left after the encapsulated data*/</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  *pa_nRemainingBytes = <a class="code" href="encap_8c.html#a41a000c4d1d14e4d29855d6fe6dd64cb">createEncapsulationStructure</a>(pa_buf, pa_length,</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;      &amp;sEncapData);</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="encap_8c.html#a622363b442e7e452daa79ef65dc54499">SUPPORTED_OPTIONS_MASK</a> == sEncapData.<a class="code" href="structS__Encapsulation__Data.html#a65f59c3cb2abdb15ef78201282080f4c">nOptions</a>) <span class="comment">/*TODO generate appropriate error response*/</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    {</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;      <span class="keywordflow">if</span> (*pa_nRemainingBytes &gt;= 0) <span class="comment">/* check if the message is corrupt: header size + claimed payload size &gt; than what we actually received*/</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        {</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;          <span class="comment">/* full package or more received */</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;          sEncapData.<a class="code" href="structS__Encapsulation__Data.html#a27d6de31606c902e75b7788cc6398605">nStatus</a> = <a class="code" href="encap_8h.html#a53c3c5078f3974109b39e195fc31452d">OPENER_ENCAP_STATUS_SUCCESS</a>;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;          nRetVal = 1;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;          <span class="comment">/* most of these functions need a reply to be send */</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;          <span class="keywordflow">switch</span> (sEncapData.<a class="code" href="structS__Encapsulation__Data.html#ad606ae7f7dc984327de018b3f71b7770">nCommand_code</a>)</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;            {</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;          <span class="keywordflow">case</span> (<a class="code" href="encap_8c.html#a1c8ff172e0cba5fcdb26f7b06b86bb8a">COMMAND_NOP</a>):</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;            <span class="comment">/* NOP needs no reply and does nothing */</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;            nRetVal = 0;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;          <span class="keywordflow">case</span> (<a class="code" href="encap_8c.html#a052f9fa1f65ae3d212201184a1022129">COMMAND_LISTSERVICES</a>):</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;            <a class="code" href="encap_8c.html#a5b3259751a6bf74cbfdd3fb83a9263e7">handleReceivedListServicesCmd</a>(&amp;sEncapData);</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;          <span class="keywordflow">case</span> (<a class="code" href="encap_8c.html#a899bf7f0083315953ae5dd3abcc72a69">COMMAND_LISTIDENTITY</a>):</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;            <a class="code" href="encap_8c.html#aa0c1743405c3991d57da22b83b6394e0">handleReceivedListIdentityCmdTCP</a>(&amp;sEncapData);</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;          <span class="keywordflow">case</span> (<a class="code" href="encap_8c.html#a14527c419c89e7d55210374e4cfb78a2">COMMAND_LISTINTERFACES</a>):</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;            <a class="code" href="encap_8c.html#a9eff9d73b7c06fa8e8183ee390306266">handleReceivedListInterfacesCmd</a>(&amp;sEncapData);</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;          <span class="keywordflow">case</span> (<a class="code" href="encap_8c.html#ae63911b8eb1290e8ded9bea8bb93d2fd">COMMAND_REGISTERSESSION</a>):</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;            <a class="code" href="encap_8c.html#adadf7d46d3b140b2939889e41c76952a">handleReceivedRegisterSessionCmd</a>(pa_socket, &amp;sEncapData);</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;          <span class="keywordflow">case</span> (<a class="code" href="encap_8c.html#a36f3d3237aa73cd030e56277b4a042e2">COMMAND_UNREGISTERSESSION</a>):</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;            nRetVal = <a class="code" href="encap_8c.html#a210e10925483a76e5828918993d33428">handleReceivedUnregisterSessionCmd</a>(&amp;sEncapData);</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;          <span class="keywordflow">case</span> (<a class="code" href="encap_8c.html#ad2ad634c2eb9f00f8c524ac7a2116cfc">COMMAND_SENDRRDATA</a>):</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;            nRetVal = <a class="code" href="encap_8c.html#aa2bc1514f02b7d5270201f96f540e412">handleReceivedSendRRDataCmd</a>(&amp;sEncapData);</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;          <span class="keywordflow">case</span> (<a class="code" href="encap_8c.html#acee359becef6eab64950b6ba9944cf8b">COMMAND_SENDUNITDATA</a>):</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;            nRetVal = <a class="code" href="encap_8c.html#a9dc9ebf33956f4e735c48736ad9f9045">handleReceivedSendUnitDataCmd</a>(&amp;sEncapData);</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;          <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            sEncapData.<a class="code" href="structS__Encapsulation__Data.html#a27d6de31606c902e75b7788cc6398605">nStatus</a> = <a class="code" href="encap_8h.html#a3adaab5278428ee74831f2b3bf6798fb">OPENER_ENCAP_STATUS_INVALID_COMMAND</a>;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;            sEncapData.<a class="code" href="structS__Encapsulation__Data.html#a645337ca30ea006ae396b27c81da8974">nData_length</a> = 0;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;            }</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;          <span class="comment">/* if nRetVal is greater then 0 data has to be sent */</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;          <span class="keywordflow">if</span> (0 &lt; nRetVal)</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;            {</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;              nRetVal = <a class="code" href="encap_8c.html#ac310f4fd2bad17d663dded4094d041c9">encapsulate_data</a>(&amp;sEncapData);</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;            }</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        }</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    }</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  <span class="keywordflow">return</span> nRetVal;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;}</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="keywordtype">int</span></div>
<div class="line"><a name="l00228"></a><span class="lineno"><a class="line" href="group__CIP__API.html#gac85a5ca9d67df6eaa87338ebd9c5c6ca">  228</a></span>&#160;<a class="code" href="group__CIP__API.html#gac85a5ca9d67df6eaa87338ebd9c5c6ca">handleReceivedExplictUDPData</a>(<span class="keywordtype">int</span> pa_socket, <span class="keyword">struct</span> <a class="code" href="structsockaddr__in.html">sockaddr_in</a> *pa_pstFromAddr,</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <a class="code" href="typedefs_8h.html#a811fdad4b361d09293f3bd0b814b8e18">EIP_UINT8</a>* pa_buf, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> pa_length, <span class="keywordtype">int</span> *pa_nRemainingBytes)</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;{</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  <span class="keywordtype">int</span> nRetVal = 0;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  <span class="keyword">struct </span><a class="code" href="structS__Encapsulation__Data.html">S_Encapsulation_Data</a> sEncapData;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  <span class="comment">/* eat the encapsulation header*/</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <span class="comment">/* the structure contains a pointer to the encapsulated data*/</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <span class="comment">/* returns how many bytes are left after the encapsulated data*/</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  *pa_nRemainingBytes = <a class="code" href="encap_8c.html#a41a000c4d1d14e4d29855d6fe6dd64cb">createEncapsulationStructure</a>(pa_buf, pa_length,</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;      &amp;sEncapData);</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="encap_8c.html#a622363b442e7e452daa79ef65dc54499">SUPPORTED_OPTIONS_MASK</a> == sEncapData.<a class="code" href="structS__Encapsulation__Data.html#a65f59c3cb2abdb15ef78201282080f4c">nOptions</a>) <span class="comment">/*TODO generate appropriate error response*/</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    {</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;      <span class="keywordflow">if</span> (*pa_nRemainingBytes &gt;= 0) <span class="comment">/* check if the message is corrupt: header size + claimed payload size &gt; than what we actually received*/</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        {</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;          <span class="comment">/* full package or more received */</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;          sEncapData.<a class="code" href="structS__Encapsulation__Data.html#a27d6de31606c902e75b7788cc6398605">nStatus</a> = <a class="code" href="encap_8h.html#a53c3c5078f3974109b39e195fc31452d">OPENER_ENCAP_STATUS_SUCCESS</a>;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;          nRetVal = 1;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;          <span class="comment">/* most of these functions need a reply to be send */</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;          <span class="keywordflow">switch</span> (sEncapData.<a class="code" href="structS__Encapsulation__Data.html#ad606ae7f7dc984327de018b3f71b7770">nCommand_code</a>)</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;            {</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;          <span class="keywordflow">case</span> (<a class="code" href="encap_8c.html#a052f9fa1f65ae3d212201184a1022129">COMMAND_LISTSERVICES</a>):</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;            <a class="code" href="encap_8c.html#a5b3259751a6bf74cbfdd3fb83a9263e7">handleReceivedListServicesCmd</a>(&amp;sEncapData);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;          <span class="keywordflow">case</span> (<a class="code" href="encap_8c.html#a899bf7f0083315953ae5dd3abcc72a69">COMMAND_LISTIDENTITY</a>):</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;            <a class="code" href="encap_8c.html#a6c6fcdf7201b77d91fcafd3fa1b89b4c">handleReceivedListIdentityCmdUDP</a>(pa_socket, pa_pstFromAddr,</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                &amp;sEncapData);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;            nRetVal = <a class="code" href="typedefs_8h.html#adf0533b554c6a20e73928f231e5286d9ac471acf92535c32126cd4d318f8175ef">EIP_OK</a>; <span class="comment">/* as the response has to be delayed do not send it now */</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;          <span class="keywordflow">case</span> (<a class="code" href="encap_8c.html#a14527c419c89e7d55210374e4cfb78a2">COMMAND_LISTINTERFACES</a>):</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;            <a class="code" href="encap_8c.html#a9eff9d73b7c06fa8e8183ee390306266">handleReceivedListInterfacesCmd</a>(&amp;sEncapData);</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;            <span class="comment">/* The following commands are not to be sent via UDP */</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;          <span class="keywordflow">case</span> (<a class="code" href="encap_8c.html#a1c8ff172e0cba5fcdb26f7b06b86bb8a">COMMAND_NOP</a>):</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;          <span class="keywordflow">case</span> (<a class="code" href="encap_8c.html#ae63911b8eb1290e8ded9bea8bb93d2fd">COMMAND_REGISTERSESSION</a>):</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;          <span class="keywordflow">case</span> (<a class="code" href="encap_8c.html#a36f3d3237aa73cd030e56277b4a042e2">COMMAND_UNREGISTERSESSION</a>):</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;          <span class="keywordflow">case</span> (<a class="code" href="encap_8c.html#ad2ad634c2eb9f00f8c524ac7a2116cfc">COMMAND_SENDRRDATA</a>):</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;          <span class="keywordflow">case</span> (<a class="code" href="encap_8c.html#acee359becef6eab64950b6ba9944cf8b">COMMAND_SENDUNITDATA</a>):</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;          <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;            sEncapData.<a class="code" href="structS__Encapsulation__Data.html#a27d6de31606c902e75b7788cc6398605">nStatus</a> = <a class="code" href="encap_8h.html#a3adaab5278428ee74831f2b3bf6798fb">OPENER_ENCAP_STATUS_INVALID_COMMAND</a>;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;            sEncapData.<a class="code" href="structS__Encapsulation__Data.html#a645337ca30ea006ae396b27c81da8974">nData_length</a> = 0;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;            }</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;          <span class="comment">/* if nRetVal is greater then 0 data has to be sent */</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;          <span class="keywordflow">if</span> (0 &lt; nRetVal)</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;            {</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;              nRetVal = <a class="code" href="encap_8c.html#ac310f4fd2bad17d663dded4094d041c9">encapsulate_data</a>(&amp;sEncapData);</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;            }</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        }</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    }</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  <span class="keywordflow">return</span> nRetVal;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;}</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="keywordtype">int</span></div>
<div class="line"><a name="l00286"></a><span class="lineno"><a class="line" href="encap_8c.html#ac310f4fd2bad17d663dded4094d041c9">  286</a></span>&#160;<a class="code" href="encap_8c.html#ac310f4fd2bad17d663dded4094d041c9">encapsulate_data</a>(<span class="keyword">struct</span> <a class="code" href="structS__Encapsulation__Data.html">S_Encapsulation_Data</a> *pa_stSendData)</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;{</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  <a class="code" href="typedefs_8h.html#a811fdad4b361d09293f3bd0b814b8e18">EIP_UINT8</a> *acCommBuf = &amp;(pa_stSendData-&gt;<a class="code" href="structS__Encapsulation__Data.html#a2513351dd1aebbcbbd2dd24fe27cff5b">m_acCommBufferStart</a>[2]);</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;  <span class="comment">/*htols(pa_stSendData-&gt;nCommand_code, &amp;pa_stSendData-&gt;pEncapsulation_Data);*/</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  <a class="code" href="group__ENCAP.html#ga738d386bb3919d75bb14dcb40ca5389f">htols</a>(pa_stSendData-&gt;<a class="code" href="structS__Encapsulation__Data.html#a645337ca30ea006ae396b27c81da8974">nData_length</a>, &amp;acCommBuf);</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  <span class="comment">/*the CommBuf should already contain the correct session handle*/</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  <span class="comment">/*htoll(pa_stSendData-&gt;nSession_handle, &amp;pa_stSendData-&gt;pEncapsulation_Data); */</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  acCommBuf += 4;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  <a class="code" href="group__ENCAP.html#gaa00e394da5cd80135cdab7d4f3d88819">htoll</a>(pa_stSendData-&gt;<a class="code" href="structS__Encapsulation__Data.html#a27d6de31606c902e75b7788cc6398605">nStatus</a>, &amp;acCommBuf);</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;  <span class="comment">/*the CommBuf should already contain the correct sender context*/</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  <span class="comment">/*memcpy(pa_stSendData-&gt;pEncapsulation_Data, pa_stSendData-&gt;anSender_context, SENDER_CONTEXT_SIZE);*/</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  <span class="comment">/*pa_stSendData-&gt;pEncapsulation_Data += SENDER_CONTEXT_SIZE + 2;*/</span><span class="comment">/* the plus 2 is for the options value*/</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  <span class="comment">/*the CommBuf should already contain the correct  options value*/</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <span class="comment">/*htols((EIP_UINT16)pa_stSendData-&gt;nOptions, &amp;pa_stSendData-&gt;pEncapsulation_Data);*/</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="encap_8h.html#a89dc73a9be3e075d9612ab6f4ab6afe5">ENCAPSULATION_HEADER_LENGTH</a> + pa_stSendData-&gt;<a class="code" href="structS__Encapsulation__Data.html#a645337ca30ea006ae396b27c81da8974">nData_length</a>;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;}</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="comment">/*   INT8 ListServices(struct S_Encapsulation_Data *pa_S_ReceiveData)</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="comment"> *   generate reply with &quot;Communications Services&quot; + compatibility Flags.</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="comment"> *      pa_S_ReceiveData pointer to structure with received data</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="keywordtype">void</span></div>
<div class="line"><a name="l00309"></a><span class="lineno"><a class="line" href="encap_8c.html#a5b3259751a6bf74cbfdd3fb83a9263e7">  309</a></span>&#160;<a class="code" href="encap_8c.html#a5b3259751a6bf74cbfdd3fb83a9263e7">handleReceivedListServicesCmd</a>(<span class="keyword">struct</span> <a class="code" href="structS__Encapsulation__Data.html">S_Encapsulation_Data</a> *pa_stReceiveData)</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;{</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;  <a class="code" href="typedefs_8h.html#a811fdad4b361d09293f3bd0b814b8e18">EIP_UINT8</a> *pacCommBuf = pa_stReceiveData-&gt;<a class="code" href="structS__Encapsulation__Data.html#ab0ab5d550e17157f39ce50755e68183b">m_acCurrentCommBufferPos</a>;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  pa_stReceiveData-&gt;<a class="code" href="structS__Encapsulation__Data.html#a645337ca30ea006ae396b27c81da8974">nData_length</a> = <a class="code" href="encap_8c.html#a25122df9eaa3cb4b33a7d386bec5ed84">g_stInterfaceInformation</a>.<a class="code" href="structS__Encapsulation__Interface__Information.html#a43d6798b80f07b2b73ed77383de9d3e5">Length</a> + 2;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  <span class="comment">/* copy Interface data to nmsg for sending */</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  <a class="code" href="group__ENCAP.html#ga738d386bb3919d75bb14dcb40ca5389f">htols</a>(1, &amp;pacCommBuf);</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  <a class="code" href="group__ENCAP.html#ga738d386bb3919d75bb14dcb40ca5389f">htols</a>(<a class="code" href="encap_8c.html#a25122df9eaa3cb4b33a7d386bec5ed84">g_stInterfaceInformation</a>.<a class="code" href="structS__Encapsulation__Interface__Information.html#a6d2dcde21bd1b1d7a14a6a8fad1cc143">TypeCode</a>, &amp;pacCommBuf);</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  <a class="code" href="group__ENCAP.html#ga738d386bb3919d75bb14dcb40ca5389f">htols</a>((<a class="code" href="typedefs_8h.html#a72b3e7231681538d97279aa001872297">EIP_UINT16</a>) (<a class="code" href="encap_8c.html#a25122df9eaa3cb4b33a7d386bec5ed84">g_stInterfaceInformation</a>.<a class="code" href="structS__Encapsulation__Interface__Information.html#a43d6798b80f07b2b73ed77383de9d3e5">Length</a> - 4), &amp;pacCommBuf);</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  <a class="code" href="group__ENCAP.html#ga738d386bb3919d75bb14dcb40ca5389f">htols</a>(<a class="code" href="encap_8c.html#a25122df9eaa3cb4b33a7d386bec5ed84">g_stInterfaceInformation</a>.<a class="code" href="structS__Encapsulation__Interface__Information.html#aad1250b418aad7ab3da300144dfb1824">EncapsulationProtocolVersion</a>, &amp;pacCommBuf);</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  <a class="code" href="group__ENCAP.html#ga738d386bb3919d75bb14dcb40ca5389f">htols</a>(<a class="code" href="encap_8c.html#a25122df9eaa3cb4b33a7d386bec5ed84">g_stInterfaceInformation</a>.<a class="code" href="structS__Encapsulation__Interface__Information.html#a79924fd06ee0dea3b1031baf79c6677f">CapabilityFlags</a>, &amp;pacCommBuf);</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  memcpy(pacCommBuf, <a class="code" href="encap_8c.html#a25122df9eaa3cb4b33a7d386bec5ed84">g_stInterfaceInformation</a>.<a class="code" href="structS__Encapsulation__Interface__Information.html#a48a98a01c5eb96aae35d8f928b8677cd">NameofService</a>,</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;      <span class="keyword">sizeof</span>(<a class="code" href="encap_8c.html#a25122df9eaa3cb4b33a7d386bec5ed84">g_stInterfaceInformation</a>.<a class="code" href="structS__Encapsulation__Interface__Information.html#a48a98a01c5eb96aae35d8f928b8677cd">NameofService</a>));</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;}</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="keywordtype">void</span></div>
<div class="line"><a name="l00326"></a><span class="lineno"><a class="line" href="encap_8c.html#a9eff9d73b7c06fa8e8183ee390306266">  326</a></span>&#160;<a class="code" href="encap_8c.html#a9eff9d73b7c06fa8e8183ee390306266">handleReceivedListInterfacesCmd</a>(<span class="keyword">struct</span> <a class="code" href="structS__Encapsulation__Data.html">S_Encapsulation_Data</a> *pa_stReceiveData)</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;{</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  <a class="code" href="typedefs_8h.html#a811fdad4b361d09293f3bd0b814b8e18">EIP_UINT8</a> *pacCommBuf = pa_stReceiveData-&gt;<a class="code" href="structS__Encapsulation__Data.html#ab0ab5d550e17157f39ce50755e68183b">m_acCurrentCommBufferPos</a>;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  pa_stReceiveData-&gt;<a class="code" href="structS__Encapsulation__Data.html#a645337ca30ea006ae396b27c81da8974">nData_length</a> = 2;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  <a class="code" href="group__ENCAP.html#ga738d386bb3919d75bb14dcb40ca5389f">htols</a>(0x0000, &amp;pacCommBuf); <span class="comment">/* copy Interface data to nmsg for sending */</span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;}</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="keywordtype">void</span></div>
<div class="line"><a name="l00334"></a><span class="lineno"><a class="line" href="encap_8c.html#aa0c1743405c3991d57da22b83b6394e0">  334</a></span>&#160;<a class="code" href="encap_8c.html#aa0c1743405c3991d57da22b83b6394e0">handleReceivedListIdentityCmdTCP</a>(<span class="keyword">struct</span> <a class="code" href="structS__Encapsulation__Data.html">S_Encapsulation_Data</a> * pa_stReceiveData)</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;{</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  pa_stReceiveData-&gt;<a class="code" href="structS__Encapsulation__Data.html#a645337ca30ea006ae396b27c81da8974">nData_length</a> = <a class="code" href="encap_8c.html#a687bc1b004e12fd67cc724da086ea1de">encapsulateListIdentyResponseMessage</a>(</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;      pa_stReceiveData-&gt;<a class="code" href="structS__Encapsulation__Data.html#ab0ab5d550e17157f39ce50755e68183b">m_acCurrentCommBufferPos</a>);</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;}</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="keywordtype">void</span></div>
<div class="line"><a name="l00341"></a><span class="lineno"><a class="line" href="encap_8c.html#a6c6fcdf7201b77d91fcafd3fa1b89b4c">  341</a></span>&#160;<a class="code" href="encap_8c.html#a6c6fcdf7201b77d91fcafd3fa1b89b4c">handleReceivedListIdentityCmdUDP</a>(<span class="keywordtype">int</span> pa_nSocket,</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="keyword">struct</span> <a class="code" href="structsockaddr__in.html">sockaddr_in</a> *pa_pstFromAddr,</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="keyword">struct</span> <a class="code" href="structS__Encapsulation__Data.html">S_Encapsulation_Data</a> *pa_stReceiveData)</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;{  </div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  <span class="keyword">struct </span><a class="code" href="structSDelayedEncapsulationMessage.html">SDelayedEncapsulationMessage</a> *pstDelayedMessageBuffer = NULL;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  <a class="code" href="typedefs_8h.html#a811fdad4b361d09293f3bd0b814b8e18">EIP_UINT8</a> *pacCommBuf;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="encap_8c.html#aba848fec29c4e01df56756077e6a777b">ENCAP_NUMBER_OF_SUPPORTED_DELAYED_ENCAP_MESSAGES</a>; i++)</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    {</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;      <span class="keywordflow">if</span> (-1 == <a class="code" href="encap_8c.html#a102bf4b6fe8090576444643c487cd78a">g_stDelayedEncapsulationMessages</a>[i].<a class="code" href="structSDelayedEncapsulationMessage.html#ae5cb0fcf4bb3307b92e5b47894db8a4e">m_nSocket</a>)</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        {</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;          pstDelayedMessageBuffer = &amp;(<a class="code" href="encap_8c.html#a102bf4b6fe8090576444643c487cd78a">g_stDelayedEncapsulationMessages</a>[i]);</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        }</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    }</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  <span class="keywordflow">if</span> (NULL != pstDelayedMessageBuffer)</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    {</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;      pstDelayedMessageBuffer-&gt;<a class="code" href="structSDelayedEncapsulationMessage.html#ae5cb0fcf4bb3307b92e5b47894db8a4e">m_nSocket</a> = pa_nSocket;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;      memcpy((&amp;pstDelayedMessageBuffer-&gt;<a class="code" href="structSDelayedEncapsulationMessage.html#aa2386a00551dc494c30d7fb279d50abd">m_stSendToAddr</a>), pa_pstFromAddr,</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;          <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structsockaddr__in.html">sockaddr_in</a>));</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;      <a class="code" href="encap_8c.html#a8f6e6fa53ccedfdc82e7a84170421772">determineDelayTime</a>(pa_stReceiveData-&gt;<a class="code" href="structS__Encapsulation__Data.html#a2513351dd1aebbcbbd2dd24fe27cff5b">m_acCommBufferStart</a>,</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;          pstDelayedMessageBuffer);</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;      memcpy(&amp;(pstDelayedMessageBuffer-&gt;<a class="code" href="structSDelayedEncapsulationMessage.html#ad14c79ec74a1f98894655955c3717ed0">m_anMsg</a>[0]),</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;          pa_stReceiveData-&gt;<a class="code" href="structS__Encapsulation__Data.html#a2513351dd1aebbcbbd2dd24fe27cff5b">m_acCommBufferStart</a>, <a class="code" href="encap_8h.html#a89dc73a9be3e075d9612ab6f4ab6afe5">ENCAPSULATION_HEADER_LENGTH</a>);</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;      pstDelayedMessageBuffer-&gt;<a class="code" href="structSDelayedEncapsulationMessage.html#a11418dbbd1800dcaa00db887bf1c5cb8">m_unMessageSize</a> =</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;          <a class="code" href="encap_8c.html#a687bc1b004e12fd67cc724da086ea1de">encapsulateListIdentyResponseMessage</a>(</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;              &amp;(pstDelayedMessageBuffer-&gt;<a class="code" href="structSDelayedEncapsulationMessage.html#ad14c79ec74a1f98894655955c3717ed0">m_anMsg</a>[<a class="code" href="encap_8h.html#a89dc73a9be3e075d9612ab6f4ab6afe5">ENCAPSULATION_HEADER_LENGTH</a>]));</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;      pacCommBuf = pstDelayedMessageBuffer-&gt;<a class="code" href="structSDelayedEncapsulationMessage.html#ad14c79ec74a1f98894655955c3717ed0">m_anMsg</a> + 2;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;      <a class="code" href="group__ENCAP.html#ga738d386bb3919d75bb14dcb40ca5389f">htols</a>(pstDelayedMessageBuffer-&gt;<a class="code" href="structSDelayedEncapsulationMessage.html#a11418dbbd1800dcaa00db887bf1c5cb8">m_unMessageSize</a>, &amp;pacCommBuf);</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;      pstDelayedMessageBuffer-&gt;<a class="code" href="structSDelayedEncapsulationMessage.html#a11418dbbd1800dcaa00db887bf1c5cb8">m_unMessageSize</a> += <a class="code" href="encap_8h.html#a89dc73a9be3e075d9612ab6f4ab6afe5">ENCAPSULATION_HEADER_LENGTH</a>;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    }</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;}</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;<span class="keywordtype">int</span></div>
<div class="line"><a name="l00381"></a><span class="lineno"><a class="line" href="encap_8c.html#a687bc1b004e12fd67cc724da086ea1de">  381</a></span>&#160;<a class="code" href="encap_8c.html#a687bc1b004e12fd67cc724da086ea1de">encapsulateListIdentyResponseMessage</a>(<a class="code" href="typedefs_8h.html#affeec34c5c7e6af4e283dfe12d4301c9">EIP_BYTE</a> *pa_pacCommBuf)</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;{</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  <a class="code" href="typedefs_8h.html#a811fdad4b361d09293f3bd0b814b8e18">EIP_UINT8</a> *pacCommBufRunner = pa_pacCommBuf;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  <a class="code" href="typedefs_8h.html#affeec34c5c7e6af4e283dfe12d4301c9">EIP_BYTE</a> *acIdLenBuf;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  <a class="code" href="group__ENCAP.html#ga738d386bb3919d75bb14dcb40ca5389f">htols</a>(1, &amp;pacCommBufRunner); <span class="comment">/* one item */</span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;  <a class="code" href="group__ENCAP.html#ga738d386bb3919d75bb14dcb40ca5389f">htols</a>(<a class="code" href="encap_8c.html#a49f746b3f514de8a1ae8551af75d4e67">ITEM_ID_LISTIDENTITY</a>, &amp;pacCommBufRunner);</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  acIdLenBuf = pacCommBufRunner;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  pacCommBufRunner += 2; <span class="comment">/*at this place the real length will be inserted below*/</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  <a class="code" href="group__ENCAP.html#ga738d386bb3919d75bb14dcb40ca5389f">htols</a>(<a class="code" href="encap_8c.html#a2d38b4e49b5b3ac0c85931d3bcf621b8">SUPPORTED_PROTOCOL_VERSION</a>, &amp;pacCommBufRunner);</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  <a class="code" href="endianconv_8c.html#a684d251f2990c861c5ef813d6d1f205b">encapsulateIPAdress</a>(<a class="code" href="encap_8h.html#a0cf1ae244dc06fbeb57c5818e78754b7">OPENER_ETHERNET_PORT</a>, Interface_Configuration.<a class="code" href="structCIPTCPIPNetworkInterfaceConfiguration.html#a4fdee1a1e331e9b170cc517b4334e78b">IPAddress</a>,</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;      pacCommBufRunner);</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  pacCommBufRunner += 8;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;  memset(pacCommBufRunner, 0, 8);</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  pacCommBufRunner += 8;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;  <a class="code" href="group__ENCAP.html#ga738d386bb3919d75bb14dcb40ca5389f">htols</a>(<a class="code" href="encap_8c.html#ab6e6f153f2d21968b71362a7b0af6240">VendorID</a>, &amp;pacCommBufRunner);</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  <a class="code" href="group__ENCAP.html#ga738d386bb3919d75bb14dcb40ca5389f">htols</a>(<a class="code" href="encap_8c.html#a04f64e9b1e0897958cc336cbf3366d18">DeviceType</a>, &amp;pacCommBufRunner);</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  <a class="code" href="group__ENCAP.html#ga738d386bb3919d75bb14dcb40ca5389f">htols</a>(<a class="code" href="encap_8c.html#a298bf8dd05ad3a16cf15f5b96d8499c7">ProductCode</a>, &amp;pacCommBufRunner);</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  *(pacCommBufRunner)++ = Revison.<a class="code" href="structCIPRevision.html#ac5b66e4f3983ce0e1c36723b2e08ec52">MajorRevision</a>;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  *(pacCommBufRunner)++ = Revison.<a class="code" href="structCIPRevision.html#a525ba6c68fed868ac8d047bb16f25dc6">MinorRevision</a>;</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  <a class="code" href="group__ENCAP.html#ga738d386bb3919d75bb14dcb40ca5389f">htols</a>(<a class="code" href="encap_8c.html#aaa8bf1bf94c599bc4db8c2bb2f0531b3">ID_Status</a>, &amp;pacCommBufRunner);</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  <a class="code" href="group__ENCAP.html#gaa00e394da5cd80135cdab7d4f3d88819">htoll</a>(<a class="code" href="encap_8c.html#ad57df5dc2f859a02fc2dab3773c5ceab">SerialNumber</a>, &amp;pacCommBufRunner);</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  *pacCommBufRunner++ = (<span class="keywordtype">unsigned</span> char) ProductName.<a class="code" href="structCIPShortString.html#a116b283686264e1253bbf573eace8ede">Length</a>;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  memcpy(pacCommBufRunner, ProductName.<a class="code" href="structCIPShortString.html#a73c01848ef6ede78f575cbd3e56dfa34">String</a>, ProductName.<a class="code" href="structCIPShortString.html#a116b283686264e1253bbf573eace8ede">Length</a>);</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  pacCommBufRunner += ProductName.<a class="code" href="structCIPShortString.html#a116b283686264e1253bbf573eace8ede">Length</a>;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  *pacCommBufRunner++ = 0xFF;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  <a class="code" href="group__ENCAP.html#ga738d386bb3919d75bb14dcb40ca5389f">htols</a>(pacCommBufRunner - acIdLenBuf - 2, &amp;acIdLenBuf); <span class="comment">/* the -2 is for not counting the length field*/</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  <span class="keywordflow">return</span> pacCommBufRunner - pa_pacCommBuf;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;}</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;<span class="keywordtype">void</span></div>
<div class="line"><a name="l00419"></a><span class="lineno"><a class="line" href="encap_8c.html#a8f6e6fa53ccedfdc82e7a84170421772">  419</a></span>&#160;<a class="code" href="encap_8c.html#a8f6e6fa53ccedfdc82e7a84170421772">determineDelayTime</a>(<a class="code" href="typedefs_8h.html#affeec34c5c7e6af4e283dfe12d4301c9">EIP_BYTE</a> *pa_acBufferStart,</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <span class="keyword">struct</span> <a class="code" href="structSDelayedEncapsulationMessage.html">SDelayedEncapsulationMessage</a> *pa_pstDelayedMessageBuffer)</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;{</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  <a class="code" href="typedefs_8h.html#a72b3e7231681538d97279aa001872297">EIP_UINT16</a> unMaxDelayTime;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  pa_acBufferStart += 12; <span class="comment">/* start of the sender context */</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;  unMaxDelayTime = <a class="code" href="group__ENCAP.html#ga6ce01de4023c01608d2bdfdb584d59d3">ltohs</a>(&amp;pa_acBufferStart);</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;  <span class="keywordflow">if</span> (0 == unMaxDelayTime)</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    {</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;      unMaxDelayTime = 2000;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    }</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (500 &gt; unMaxDelayTime)</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    {</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;      unMaxDelayTime = 500;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    }</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  <span class="comment">/* Limits mayDelayTime to 2000 milliseconds */</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;  <span class="keywordflow">if</span> (unMaxDelayTime &gt; 2000)</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;  {</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;     unMaxDelayTime = 2000;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  }</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;  pa_pstDelayedMessageBuffer-&gt;<a class="code" href="structSDelayedEncapsulationMessage.html#ab9de1ca60a6cceae2286585f1836f0f4">m_unTimeOut</a> = (unMaxDelayTime * rand()) / RAND_MAX</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;      + 1;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;}</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="comment">/*   void RegisterSession(struct S_Encapsulation_Data *pa_S_ReceiveData)</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="comment"> *   Check supported protocol, generate session handle, send replay back to originator.</span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;<span class="comment"> *      pa_nSockfd       socket this request is associated to. Needed for double register check</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="comment"> *      pa_S_ReceiveData pointer to received data with request/response.</span></div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;<span class="keywordtype">void</span></div>
<div class="line"><a name="l00451"></a><span class="lineno"><a class="line" href="encap_8c.html#adadf7d46d3b140b2939889e41c76952a">  451</a></span>&#160;<a class="code" href="encap_8c.html#adadf7d46d3b140b2939889e41c76952a">handleReceivedRegisterSessionCmd</a>(<span class="keywordtype">int</span> pa_nSockfd,</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <span class="keyword">struct</span> <a class="code" href="structS__Encapsulation__Data.html">S_Encapsulation_Data</a> * pa_stReceiveData)</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;{</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;  <span class="keywordtype">int</span> nSessionIndex = 0;</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;  <a class="code" href="typedefs_8h.html#a811fdad4b361d09293f3bd0b814b8e18">EIP_UINT8</a> *pacBuf;</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;  <a class="code" href="typedefs_8h.html#a72b3e7231681538d97279aa001872297">EIP_UINT16</a> nProtocolVersion = <a class="code" href="group__ENCAP.html#ga6ce01de4023c01608d2bdfdb584d59d3">ltohs</a>(</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;      &amp;pa_stReceiveData-&gt;<a class="code" href="structS__Encapsulation__Data.html#ab0ab5d550e17157f39ce50755e68183b">m_acCurrentCommBufferPos</a>);</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  <a class="code" href="typedefs_8h.html#a72b3e7231681538d97279aa001872297">EIP_UINT16</a> nOptionFlag = <a class="code" href="group__ENCAP.html#ga6ce01de4023c01608d2bdfdb584d59d3">ltohs</a>(&amp;pa_stReceiveData-&gt;<a class="code" href="structS__Encapsulation__Data.html#ab0ab5d550e17157f39ce50755e68183b">m_acCurrentCommBufferPos</a>);</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  <span class="comment">/* check if requested protocol version is supported and the register session option flag is zero*/</span></div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;  <span class="keywordflow">if</span> ((0 &lt; nProtocolVersion) &amp;&amp; (nProtocolVersion &lt;= <a class="code" href="encap_8c.html#a2d38b4e49b5b3ac0c85931d3bcf621b8">SUPPORTED_PROTOCOL_VERSION</a>)</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;      &amp;&amp; (0 == nOptionFlag))</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    { <span class="comment">/*Option field should be zero*/</span></div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;      <span class="comment">/* check if the socket has already a session open */</span></div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;      <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="LM3S8962_2sample__application_2opener__user__conf_8h.html#a8d73780f7a1f5d9977d7388ebfbe1f93">OPENER_NUMBER_OF_SUPPORTED_SESSIONS</a>; ++i)</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        {</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="encap_8c.html#abb7ffd35682c94bdc937f52890b3b4d3">anRegisteredSessions</a>[i] == pa_nSockfd)</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;            {</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;              <span class="comment">/* the socket has already registered a session this is not allowed*/</span></div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;              pa_stReceiveData-&gt;<a class="code" href="structS__Encapsulation__Data.html#a45a3e9d89c34f8776e0e25138110a647">nSession_handle</a> = i + 1; <span class="comment">/*return the already assigned session back, the cip spec is not clear about this needs to be tested*/</span></div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;              pa_stReceiveData-&gt;<a class="code" href="structS__Encapsulation__Data.html#a27d6de31606c902e75b7788cc6398605">nStatus</a> =</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;                  <a class="code" href="encap_8h.html#a3adaab5278428ee74831f2b3bf6798fb">OPENER_ENCAP_STATUS_INVALID_COMMAND</a>;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;              nSessionIndex = <a class="code" href="encap_8c.html#a12d1ddd538779992a993351fa587b9e0">INVALID_SESSION</a>;</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;              pacBuf =</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;                  &amp;pa_stReceiveData-&gt;<a class="code" href="structS__Encapsulation__Data.html#a2513351dd1aebbcbbd2dd24fe27cff5b">m_acCommBufferStart</a>[<a class="code" href="encap_8c.html#ac8f21143d6f4be9ea83079a9e77677d1">ENCAPSULATION_HEADER_SESSION_HANDLE_POS</a>];</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;              <a class="code" href="group__ENCAP.html#gaa00e394da5cd80135cdab7d4f3d88819">htoll</a>(pa_stReceiveData-&gt;<a class="code" href="structS__Encapsulation__Data.html#a45a3e9d89c34f8776e0e25138110a647">nSession_handle</a>, &amp;pacBuf); <span class="comment">/*encapsulate_data will not update the session handle so we have to do it here by hand*/</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;            }</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        }</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="encap_8c.html#a12d1ddd538779992a993351fa587b9e0">INVALID_SESSION</a> != nSessionIndex)</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;        {</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;          nSessionIndex = <a class="code" href="encap_8c.html#aab7e6a84250ddb749a082ae4e69c5034">getFreeSessionIndex</a>();</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="encap_8c.html#a12d1ddd538779992a993351fa587b9e0">INVALID_SESSION</a> == nSessionIndex) <span class="comment">/* no more sessions available */</span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;            {</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;              pa_stReceiveData-&gt;<a class="code" href="structS__Encapsulation__Data.html#a27d6de31606c902e75b7788cc6398605">nStatus</a> = <a class="code" href="encap_8h.html#aaa2c07b78bbe683fbe223c16a3cd8581">OPENER_ENCAP_STATUS_INSUFFICIENT_MEM</a>;</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;            }</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;            { <span class="comment">/* successful session registered */</span></div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;              <a class="code" href="encap_8c.html#abb7ffd35682c94bdc937f52890b3b4d3">anRegisteredSessions</a>[nSessionIndex] = pa_nSockfd; <span class="comment">/* store associated socket */</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;              pa_stReceiveData-&gt;<a class="code" href="structS__Encapsulation__Data.html#a45a3e9d89c34f8776e0e25138110a647">nSession_handle</a> = nSessionIndex + 1;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;              pa_stReceiveData-&gt;<a class="code" href="structS__Encapsulation__Data.html#a27d6de31606c902e75b7788cc6398605">nStatus</a> = <a class="code" href="encap_8h.html#a53c3c5078f3974109b39e195fc31452d">OPENER_ENCAP_STATUS_SUCCESS</a>;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;              pacBuf =</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;                  &amp;pa_stReceiveData-&gt;<a class="code" href="structS__Encapsulation__Data.html#a2513351dd1aebbcbbd2dd24fe27cff5b">m_acCommBufferStart</a>[<a class="code" href="encap_8c.html#ac8f21143d6f4be9ea83079a9e77677d1">ENCAPSULATION_HEADER_SESSION_HANDLE_POS</a>];</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;              <a class="code" href="group__ENCAP.html#gaa00e394da5cd80135cdab7d4f3d88819">htoll</a>(pa_stReceiveData-&gt;<a class="code" href="structS__Encapsulation__Data.html#a45a3e9d89c34f8776e0e25138110a647">nSession_handle</a>, &amp;pacBuf); <span class="comment">/*encapsulate_data will not update the session handle so we have to do it here by hand*/</span></div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;            }</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;        }</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    }</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    { <span class="comment">/* protocol not supported */</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;      pa_stReceiveData-&gt;<a class="code" href="structS__Encapsulation__Data.html#a27d6de31606c902e75b7788cc6398605">nStatus</a> = <a class="code" href="encap_8h.html#a6d3b35cb7d1fdb8734e473c146bdd54e">OPENER_ENCAP_STATUS_UNSUPPORTED_PROTOCOL</a>;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    }</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;  pa_stReceiveData-&gt;<a class="code" href="structS__Encapsulation__Data.html#a645337ca30ea006ae396b27c81da8974">nData_length</a> = 4;</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;}</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;<span class="comment">/*   INT8 UnregisterSession(struct S_Encapsulation_Data *pa_S_ReceiveData)</span></div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="comment"> *   close all corresponding TCP connections and delete session handle.</span></div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;<span class="comment"> *      pa_S_ReceiveData pointer to unregister session request with corresponding socket handle.</span></div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;<a class="code" href="typedefs_8h.html#adf0533b554c6a20e73928f231e5286d9">EIP_STATUS</a></div>
<div class="line"><a name="l00513"></a><span class="lineno"><a class="line" href="encap_8c.html#a210e10925483a76e5828918993d33428">  513</a></span>&#160;<a class="code" href="encap_8c.html#a210e10925483a76e5828918993d33428">handleReceivedUnregisterSessionCmd</a>(</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <span class="keyword">struct</span> <a class="code" href="structS__Encapsulation__Data.html">S_Encapsulation_Data</a> * pa_stReceiveData)</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;{</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;  <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;  <span class="keywordflow">if</span> ((0 &lt; pa_stReceiveData-&gt;<a class="code" href="structS__Encapsulation__Data.html#a45a3e9d89c34f8776e0e25138110a647">nSession_handle</a>)</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;      &amp;&amp; (pa_stReceiveData-&gt;<a class="code" href="structS__Encapsulation__Data.html#a45a3e9d89c34f8776e0e25138110a647">nSession_handle</a></div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;          &lt;= <a class="code" href="LM3S8962_2sample__application_2opener__user__conf_8h.html#a8d73780f7a1f5d9977d7388ebfbe1f93">OPENER_NUMBER_OF_SUPPORTED_SESSIONS</a>))</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    {</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;      i = pa_stReceiveData-&gt;<a class="code" href="structS__Encapsulation__Data.html#a45a3e9d89c34f8776e0e25138110a647">nSession_handle</a> - 1;</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="typedefs_8h.html#ace23313ab660889d73718853b644405e">EIP_INVALID_SOCKET</a> != <a class="code" href="encap_8c.html#abb7ffd35682c94bdc937f52890b3b4d3">anRegisteredSessions</a>[i])</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        {</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;          <a class="code" href="LM3S8962_2networkhandler_8c.html#a166202be863ba2e99e6653d010ea4a6a">IApp_CloseSocket_tcp</a>(<a class="code" href="encap_8c.html#abb7ffd35682c94bdc937f52890b3b4d3">anRegisteredSessions</a>[i]);</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;          <a class="code" href="encap_8c.html#abb7ffd35682c94bdc937f52890b3b4d3">anRegisteredSessions</a>[i] = <a class="code" href="typedefs_8h.html#ace23313ab660889d73718853b644405e">EIP_INVALID_SOCKET</a>;</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="typedefs_8h.html#adf0533b554c6a20e73928f231e5286d9ac471acf92535c32126cd4d318f8175ef">EIP_OK</a>;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        }</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    }</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;  <span class="comment">/* no such session registered */</span></div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;  pa_stReceiveData-&gt;<a class="code" href="structS__Encapsulation__Data.html#a645337ca30ea006ae396b27c81da8974">nData_length</a> = 0;</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;  pa_stReceiveData-&gt;<a class="code" href="structS__Encapsulation__Data.html#a27d6de31606c902e75b7788cc6398605">nStatus</a> = <a class="code" href="encap_8h.html#aaf79502425742f6c026a16b48308e545">OPENER_ENCAP_STATUS_INVALID_SESSION_HANDLE</a>;</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="typedefs_8h.html#adf0533b554c6a20e73928f231e5286d9af5f331897ee90f67ca0c2b332ba93a28">EIP_OK_SEND</a>;</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;}</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;<span class="comment">/*   INT8 SendUnitData(struct S_Encapsulation_Data *pa_S_ReceiveData)</span></div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;<span class="comment"> *   Call Connection Manager.</span></div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="comment"> *      pa_S_ReceiveData pointer to structure with data and header information.</span></div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;<a class="code" href="typedefs_8h.html#adf0533b554c6a20e73928f231e5286d9">EIP_STATUS</a></div>
<div class="line"><a name="l00542"></a><span class="lineno"><a class="line" href="encap_8c.html#a9dc9ebf33956f4e735c48736ad9f9045">  542</a></span>&#160;<a class="code" href="encap_8c.html#a9dc9ebf33956f4e735c48736ad9f9045">handleReceivedSendUnitDataCmd</a>(<span class="keyword">struct</span> <a class="code" href="structS__Encapsulation__Data.html">S_Encapsulation_Data</a> * pa_stReceiveData)</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;{</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;  <a class="code" href="typedefs_8h.html#a824c4bdde2e6a43bc9c58b5d2f0c034e">EIP_INT16</a> nSendSize;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;  <a class="code" href="typedefs_8h.html#adf0533b554c6a20e73928f231e5286d9">EIP_STATUS</a> eRetVal = <a class="code" href="typedefs_8h.html#adf0533b554c6a20e73928f231e5286d9af5f331897ee90f67ca0c2b332ba93a28">EIP_OK_SEND</a>;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  <span class="keywordflow">if</span> (pa_stReceiveData-&gt;<a class="code" href="structS__Encapsulation__Data.html#a645337ca30ea006ae396b27c81da8974">nData_length</a> &gt;= 6)</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    {</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;      <span class="comment">/* Command specific data UDINT .. Interface Handle, UINT .. Timeout, CPF packets */</span></div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;      <span class="comment">/* don&#39;t use the data yet */</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;      <a class="code" href="group__ENCAP.html#ga4ac7387e49002d26462d7cdd094d238a">ltohl</a>(&amp;pa_stReceiveData-&gt;<a class="code" href="structS__Encapsulation__Data.html#ab0ab5d550e17157f39ce50755e68183b">m_acCurrentCommBufferPos</a>); <span class="comment">/* skip over null interface handle*/</span></div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;      <a class="code" href="group__ENCAP.html#ga6ce01de4023c01608d2bdfdb584d59d3">ltohs</a>(&amp;pa_stReceiveData-&gt;<a class="code" href="structS__Encapsulation__Data.html#ab0ab5d550e17157f39ce50755e68183b">m_acCurrentCommBufferPos</a>); <span class="comment">/* skip over unused timeout value*/</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;      pa_stReceiveData-&gt;<a class="code" href="structS__Encapsulation__Data.html#a645337ca30ea006ae396b27c81da8974">nData_length</a> -= 6; <span class="comment">/* the rest is in CPF format*/</span></div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="typedefs_8h.html#adf0533b554c6a20e73928f231e5286d9aa2593a8a4cbf4566ee6f68f16e5115a6">EIP_ERROR</a> != <a class="code" href="encap_8c.html#a0099080d916fa573196c16582fec7ecd">checkRegisteredSessions</a>(pa_stReceiveData)) <span class="comment">/* see if the EIP session is registered*/</span></div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;        {</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;          nSendSize =</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;              <a class="code" href="group__ENCAP.html#ga615e04583bae27d4b8590e7f13d95d43">notifyConnectedCPF</a>(pa_stReceiveData,</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;                  &amp;pa_stReceiveData-&gt;<a class="code" href="structS__Encapsulation__Data.html#a2513351dd1aebbcbbd2dd24fe27cff5b">m_acCommBufferStart</a>[<a class="code" href="encap_8h.html#a89dc73a9be3e075d9612ab6f4ab6afe5">ENCAPSULATION_HEADER_LENGTH</a>]);</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;          <span class="keywordflow">if</span> (0 &lt; nSendSize)</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;            { <span class="comment">/* need to send reply */</span></div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;              pa_stReceiveData-&gt;<a class="code" href="structS__Encapsulation__Data.html#a645337ca30ea006ae396b27c81da8974">nData_length</a> = nSendSize;</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;            }</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;            {</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;              eRetVal = <a class="code" href="typedefs_8h.html#adf0533b554c6a20e73928f231e5286d9aa2593a8a4cbf4566ee6f68f16e5115a6">EIP_ERROR</a>;</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;            }</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;        }</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;        { <span class="comment">/* received a package with non registered session handle */</span></div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;          pa_stReceiveData-&gt;<a class="code" href="structS__Encapsulation__Data.html#a645337ca30ea006ae396b27c81da8974">nData_length</a> = 0;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;          pa_stReceiveData-&gt;<a class="code" href="structS__Encapsulation__Data.html#a27d6de31606c902e75b7788cc6398605">nStatus</a> = <a class="code" href="encap_8h.html#aaf79502425742f6c026a16b48308e545">OPENER_ENCAP_STATUS_INVALID_SESSION_HANDLE</a>;</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;        }</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    }</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;  <span class="keywordflow">return</span> eRetVal;</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;}</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;<span class="comment">/*   INT8 SendRRData(struct S_Encapsulation_Data *pa_stReceiveData)</span></div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;<span class="comment"> *   Call UCMM or Message Router if UCMM not implemented.</span></div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;<span class="comment"> *      pa_stReceiveData pointer to structure with data and header information.</span></div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;<span class="comment"> *  return status       0 .. success.</span></div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;<span class="comment"> *                                      -1 .. error</span></div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;<a class="code" href="typedefs_8h.html#adf0533b554c6a20e73928f231e5286d9">EIP_STATUS</a></div>
<div class="line"><a name="l00586"></a><span class="lineno"><a class="line" href="encap_8c.html#aa2bc1514f02b7d5270201f96f540e412">  586</a></span>&#160;<a class="code" href="encap_8c.html#aa2bc1514f02b7d5270201f96f540e412">handleReceivedSendRRDataCmd</a>(<span class="keyword">struct</span> <a class="code" href="structS__Encapsulation__Data.html">S_Encapsulation_Data</a> * pa_stReceiveData)</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;{</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;  <a class="code" href="typedefs_8h.html#a824c4bdde2e6a43bc9c58b5d2f0c034e">EIP_INT16</a> nSendSize;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;  <a class="code" href="typedefs_8h.html#adf0533b554c6a20e73928f231e5286d9">EIP_STATUS</a> eRetVal = <a class="code" href="typedefs_8h.html#adf0533b554c6a20e73928f231e5286d9af5f331897ee90f67ca0c2b332ba93a28">EIP_OK_SEND</a>;</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;  <span class="keywordflow">if</span> (pa_stReceiveData-&gt;<a class="code" href="structS__Encapsulation__Data.html#a645337ca30ea006ae396b27c81da8974">nData_length</a> &gt;= 6)</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    {</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;      <span class="comment">/* Commandspecific data UDINT .. Interface Handle, UINT .. Timeout, CPF packets */</span></div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;      <span class="comment">/* don&#39;t use the data yet */</span></div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;      <a class="code" href="group__ENCAP.html#ga4ac7387e49002d26462d7cdd094d238a">ltohl</a>(&amp;pa_stReceiveData-&gt;<a class="code" href="structS__Encapsulation__Data.html#ab0ab5d550e17157f39ce50755e68183b">m_acCurrentCommBufferPos</a>); <span class="comment">/* skip over null interface handle*/</span></div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;      <a class="code" href="group__ENCAP.html#ga6ce01de4023c01608d2bdfdb584d59d3">ltohs</a>(&amp;pa_stReceiveData-&gt;<a class="code" href="structS__Encapsulation__Data.html#ab0ab5d550e17157f39ce50755e68183b">m_acCurrentCommBufferPos</a>); <span class="comment">/* skip over unused timeout value*/</span></div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;      pa_stReceiveData-&gt;<a class="code" href="structS__Encapsulation__Data.html#a645337ca30ea006ae396b27c81da8974">nData_length</a> -= 6; <span class="comment">/* the rest is in CPF format*/</span></div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="typedefs_8h.html#adf0533b554c6a20e73928f231e5286d9aa2593a8a4cbf4566ee6f68f16e5115a6">EIP_ERROR</a> != <a class="code" href="encap_8c.html#a0099080d916fa573196c16582fec7ecd">checkRegisteredSessions</a>(pa_stReceiveData)) <span class="comment">/* see if the EIP session is registered*/</span></div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;        {</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;          nSendSize =</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;              <a class="code" href="group__ENCAP.html#gaae831feae33de32fc7ea4ba1a1f9cc74">notifyCPF</a>(pa_stReceiveData,</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;                  &amp;pa_stReceiveData-&gt;<a class="code" href="structS__Encapsulation__Data.html#a2513351dd1aebbcbbd2dd24fe27cff5b">m_acCommBufferStart</a>[<a class="code" href="encap_8h.html#a89dc73a9be3e075d9612ab6f4ab6afe5">ENCAPSULATION_HEADER_LENGTH</a>]);</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;          <span class="keywordflow">if</span> (nSendSize &gt;= 0)</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;            { <span class="comment">/* need to send reply */</span></div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;              pa_stReceiveData-&gt;<a class="code" href="structS__Encapsulation__Data.html#a645337ca30ea006ae396b27c81da8974">nData_length</a> = nSendSize;</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;            }</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;            {</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;              eRetVal = <a class="code" href="typedefs_8h.html#adf0533b554c6a20e73928f231e5286d9aa2593a8a4cbf4566ee6f68f16e5115a6">EIP_ERROR</a>;</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;            }</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;        }</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;        { <span class="comment">/* received a package with non registered session handle */</span></div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;          pa_stReceiveData-&gt;<a class="code" href="structS__Encapsulation__Data.html#a645337ca30ea006ae396b27c81da8974">nData_length</a> = 0;</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;          pa_stReceiveData-&gt;<a class="code" href="structS__Encapsulation__Data.html#a27d6de31606c902e75b7788cc6398605">nStatus</a> = <a class="code" href="encap_8h.html#aaf79502425742f6c026a16b48308e545">OPENER_ENCAP_STATUS_INVALID_SESSION_HANDLE</a>;</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;        }</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    }</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;  <span class="keywordflow">return</span> eRetVal;</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;}</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;<span class="comment">/*   INT8 getFreeSessionIndex()</span></div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;<span class="comment"> *   search for available sessions an return index.</span></div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;<span class="comment"> *  return index of free session in anRegisteredSessions.</span></div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;<span class="comment"> *                      -1 .. no free session available</span></div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;<span class="keywordtype">int</span></div>
<div class="line"><a name="l00629"></a><span class="lineno"><a class="line" href="encap_8c.html#aab7e6a84250ddb749a082ae4e69c5034">  629</a></span>&#160;<a class="code" href="encap_8c.html#aab7e6a84250ddb749a082ae4e69c5034">getFreeSessionIndex</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;{</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;  <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;  <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="LM3S8962_2sample__application_2opener__user__conf_8h.html#a8d73780f7a1f5d9977d7388ebfbe1f93">OPENER_NUMBER_OF_SUPPORTED_SESSIONS</a>; i++)</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    {</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="typedefs_8h.html#ace23313ab660889d73718853b644405e">EIP_INVALID_SOCKET</a> == <a class="code" href="encap_8c.html#abb7ffd35682c94bdc937f52890b3b4d3">anRegisteredSessions</a>[i])</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;        {</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;          <span class="keywordflow">return</span> i;</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;        }</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    }</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;  <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;}</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;<span class="comment">/*   INT16 createEncapsulationStructure(INT16 pa_sockfd, INT8 *pa_buf, UINT16 pa_length, struct S_Encapsulation_Data *pa_S_Data)</span></div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;<span class="comment"> *   copy data from pa_buf in little endian to host in structure.</span></div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;<span class="comment"> *      pa_length       length of the data in pa_buf.</span></div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;<span class="comment"> *      pa_S_Data       structure to which data shall be copied</span></div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;<span class="comment"> *  return difference between bytes in pa_buf an data_length</span></div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;<span class="comment"> *              0 .. full package received</span></div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;<span class="comment"> *                      &gt;0 .. more than one packet received</span></div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;<span class="comment"> *                      &lt;0 .. only fragment of data portion received</span></div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;<span class="comment"> */</span><a class="code" href="typedefs_8h.html#a824c4bdde2e6a43bc9c58b5d2f0c034e">EIP_INT16</a></div>
<div class="line"><a name="l00651"></a><span class="lineno"><a class="line" href="encap_8c.html#a41a000c4d1d14e4d29855d6fe6dd64cb">  651</a></span>&#160;<a class="code" href="encap_8c.html#a41a000c4d1d14e4d29855d6fe6dd64cb">createEncapsulationStructure</a>(<a class="code" href="typedefs_8h.html#a811fdad4b361d09293f3bd0b814b8e18">EIP_UINT8</a> * pa_buf, <span class="comment">/* receive buffer*/</span></div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;<span class="keywordtype">int</span> pa_length, <span class="comment">/* size of stuff in  buffer (might be more than one message)*/</span></div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;<span class="keyword">struct</span> <a class="code" href="structS__Encapsulation__Data.html">S_Encapsulation_Data</a> * pa_stData) <span class="comment">/* the struct to be created*/</span></div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;{</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;  pa_stData-&gt;<a class="code" href="structS__Encapsulation__Data.html#a2513351dd1aebbcbbd2dd24fe27cff5b">m_acCommBufferStart</a> = pa_buf;</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;  pa_stData-&gt;<a class="code" href="structS__Encapsulation__Data.html#ad606ae7f7dc984327de018b3f71b7770">nCommand_code</a> = <a class="code" href="group__ENCAP.html#ga6ce01de4023c01608d2bdfdb584d59d3">ltohs</a>(&amp;pa_buf);</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;  pa_stData-&gt;<a class="code" href="structS__Encapsulation__Data.html#a645337ca30ea006ae396b27c81da8974">nData_length</a> = <a class="code" href="group__ENCAP.html#ga6ce01de4023c01608d2bdfdb584d59d3">ltohs</a>(&amp;pa_buf);</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;  pa_stData-&gt;<a class="code" href="structS__Encapsulation__Data.html#a45a3e9d89c34f8776e0e25138110a647">nSession_handle</a> = <a class="code" href="group__ENCAP.html#ga4ac7387e49002d26462d7cdd094d238a">ltohl</a>(&amp;pa_buf);</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;  pa_stData-&gt;<a class="code" href="structS__Encapsulation__Data.html#a27d6de31606c902e75b7788cc6398605">nStatus</a> = <a class="code" href="group__ENCAP.html#ga4ac7387e49002d26462d7cdd094d238a">ltohl</a>(&amp;pa_buf);</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;  <span class="comment">/*memcpy(pa_stData-&gt;anSender_context, pa_buf, SENDER_CONTEXT_SIZE);*/</span></div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;  pa_buf += <a class="code" href="encap_8c.html#a4bdfd59456b03601ed310cae2d4bf733">SENDER_CONTEXT_SIZE</a>;</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;  pa_stData-&gt;<a class="code" href="structS__Encapsulation__Data.html#a65f59c3cb2abdb15ef78201282080f4c">nOptions</a> = <a class="code" href="group__ENCAP.html#ga4ac7387e49002d26462d7cdd094d238a">ltohl</a>(&amp;pa_buf);</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;  pa_stData-&gt;<a class="code" href="structS__Encapsulation__Data.html#ab0ab5d550e17157f39ce50755e68183b">m_acCurrentCommBufferPos</a> = pa_buf;</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;  <span class="keywordflow">return</span> (pa_length - <a class="code" href="encap_8h.html#a89dc73a9be3e075d9612ab6f4ab6afe5">ENCAPSULATION_HEADER_LENGTH</a> - pa_stData-&gt;<a class="code" href="structS__Encapsulation__Data.html#a645337ca30ea006ae396b27c81da8974">nData_length</a>);</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;}</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;<span class="comment">/*   INT8 checkRegisteredSessions(struct S_Encapsulation_Data *pa_S_ReceiveData)</span></div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;<span class="comment"> *   check if received package belongs to registered session.</span></div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;<span class="comment"> *      pa_stReceiveData received data.</span></div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;<span class="comment"> *  return 0 .. Session registered</span></div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;<span class="comment"> *              -1 .. invalid session -&gt; return unsupported command received</span></div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;<a class="code" href="typedefs_8h.html#adf0533b554c6a20e73928f231e5286d9">EIP_STATUS</a></div>
<div class="line"><a name="l00675"></a><span class="lineno"><a class="line" href="encap_8c.html#a0099080d916fa573196c16582fec7ecd">  675</a></span>&#160;<a class="code" href="encap_8c.html#a0099080d916fa573196c16582fec7ecd">checkRegisteredSessions</a>(<span class="keyword">struct</span> <a class="code" href="structS__Encapsulation__Data.html">S_Encapsulation_Data</a> * pa_stReceiveData)</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;{</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;  <span class="keywordflow">if</span> ((0 &lt; pa_stReceiveData-&gt;<a class="code" href="structS__Encapsulation__Data.html#a45a3e9d89c34f8776e0e25138110a647">nSession_handle</a>)</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;      &amp;&amp; (pa_stReceiveData-&gt;<a class="code" href="structS__Encapsulation__Data.html#a45a3e9d89c34f8776e0e25138110a647">nSession_handle</a></div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;          &lt;= <a class="code" href="LM3S8962_2sample__application_2opener__user__conf_8h.html#a8d73780f7a1f5d9977d7388ebfbe1f93">OPENER_NUMBER_OF_SUPPORTED_SESSIONS</a>))</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    {</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="typedefs_8h.html#ace23313ab660889d73718853b644405e">EIP_INVALID_SOCKET</a></div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;          != <a class="code" href="encap_8c.html#abb7ffd35682c94bdc937f52890b3b4d3">anRegisteredSessions</a>[pa_stReceiveData-&gt;<a class="code" href="structS__Encapsulation__Data.html#a45a3e9d89c34f8776e0e25138110a647">nSession_handle</a> - 1])</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;        {</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="typedefs_8h.html#adf0533b554c6a20e73928f231e5286d9ac471acf92535c32126cd4d318f8175ef">EIP_OK</a>;</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;        }</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    }</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="typedefs_8h.html#adf0533b554c6a20e73928f231e5286d9aa2593a8a4cbf4566ee6f68f16e5115a6">EIP_ERROR</a>;</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;}</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;<span class="keywordtype">void</span></div>
<div class="line"><a name="l00693"></a><span class="lineno"><a class="line" href="group__CIP__API.html#gaabf704af111d213b94f459b8a34c7886">  693</a></span>&#160;<a class="code" href="group__CIP__API.html#gaabf704af111d213b94f459b8a34c7886">closeSession</a>(<span class="keywordtype">int</span> pa_nSocket)</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;{</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;  <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;  <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="LM3S8962_2sample__application_2opener__user__conf_8h.html#a8d73780f7a1f5d9977d7388ebfbe1f93">OPENER_NUMBER_OF_SUPPORTED_SESSIONS</a>; ++i)</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    {</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="encap_8c.html#abb7ffd35682c94bdc937f52890b3b4d3">anRegisteredSessions</a>[i] == pa_nSocket)</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;        {</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;          <a class="code" href="LM3S8962_2networkhandler_8c.html#a166202be863ba2e99e6653d010ea4a6a">IApp_CloseSocket_tcp</a>(pa_nSocket);</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;          <a class="code" href="encap_8c.html#abb7ffd35682c94bdc937f52890b3b4d3">anRegisteredSessions</a>[i] = <a class="code" href="typedefs_8h.html#ace23313ab660889d73718853b644405e">EIP_INVALID_SOCKET</a>;</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;        }</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    }</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;}</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;<span class="keywordtype">void</span></div>
<div class="line"><a name="l00708"></a><span class="lineno"><a class="line" href="group__ENCAP.html#ga23b3ee03c1cffe279bbf32f3d1d4a8a3">  708</a></span>&#160;<a class="code" href="group__ENCAP.html#ga23b3ee03c1cffe279bbf32f3d1d4a8a3">encapShutDown</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;{</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;  <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;  <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="LM3S8962_2sample__application_2opener__user__conf_8h.html#a8d73780f7a1f5d9977d7388ebfbe1f93">OPENER_NUMBER_OF_SUPPORTED_SESSIONS</a>; ++i)</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    {</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="typedefs_8h.html#ace23313ab660889d73718853b644405e">EIP_INVALID_SOCKET</a> != <a class="code" href="encap_8c.html#abb7ffd35682c94bdc937f52890b3b4d3">anRegisteredSessions</a>[i])</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;        {</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;          <a class="code" href="LM3S8962_2networkhandler_8c.html#a166202be863ba2e99e6653d010ea4a6a">IApp_CloseSocket_tcp</a>(<a class="code" href="encap_8c.html#abb7ffd35682c94bdc937f52890b3b4d3">anRegisteredSessions</a>[i]);</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;          <a class="code" href="encap_8c.html#abb7ffd35682c94bdc937f52890b3b4d3">anRegisteredSessions</a>[i] = <a class="code" href="typedefs_8h.html#ace23313ab660889d73718853b644405e">EIP_INVALID_SOCKET</a>;</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;        }</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    }</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;}</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;<span class="keywordtype">void</span></div>
<div class="line"><a name="l00722"></a><span class="lineno"><a class="line" href="group__ENCAP.html#ga52899252b48f864da5b3f107a110a785">  722</a></span>&#160;<a class="code" href="group__ENCAP.html#ga52899252b48f864da5b3f107a110a785">manageEncapsulationMessages</a>()</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;{</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;  <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="encap_8c.html#aba848fec29c4e01df56756077e6a777b">ENCAP_NUMBER_OF_SUPPORTED_DELAYED_ENCAP_MESSAGES</a>; i++)</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    {</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;      <span class="keywordflow">if</span> (-1 != <a class="code" href="encap_8c.html#a102bf4b6fe8090576444643c487cd78a">g_stDelayedEncapsulationMessages</a>[i].<a class="code" href="structSDelayedEncapsulationMessage.html#ae5cb0fcf4bb3307b92e5b47894db8a4e">m_nSocket</a>)</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;        {</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;          <a class="code" href="encap_8c.html#a102bf4b6fe8090576444643c487cd78a">g_stDelayedEncapsulationMessages</a>[i].<a class="code" href="structSDelayedEncapsulationMessage.html#ab9de1ca60a6cceae2286585f1836f0f4">m_unTimeOut</a> -= <a class="code" href="LM3S8962_2sample__application_2opener__user__conf_8h.html#a72f913dfb4303ff1c1e6897b6a121a01">OPENER_TIMER_TICK</a>;</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;          <span class="keywordflow">if</span> (0 &gt;= <a class="code" href="encap_8c.html#a102bf4b6fe8090576444643c487cd78a">g_stDelayedEncapsulationMessages</a>[i].<a class="code" href="structSDelayedEncapsulationMessage.html#ab9de1ca60a6cceae2286585f1836f0f4">m_unTimeOut</a>)</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;            {</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;              <a class="code" href="group__CIP__CALLBACK__API.html#gabe8a4c7e971381f2ee46db5148aecf47">IApp_SendUDPData</a>(</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;                  &amp;(<a class="code" href="encap_8c.html#a102bf4b6fe8090576444643c487cd78a">g_stDelayedEncapsulationMessages</a>[i].<a class="code" href="structSDelayedEncapsulationMessage.html#aa2386a00551dc494c30d7fb279d50abd">m_stSendToAddr</a>),</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;                  <a class="code" href="encap_8c.html#a102bf4b6fe8090576444643c487cd78a">g_stDelayedEncapsulationMessages</a>[i].m_nSocket,</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;                  &amp;(<a class="code" href="encap_8c.html#a102bf4b6fe8090576444643c487cd78a">g_stDelayedEncapsulationMessages</a>[i].<a class="code" href="structSDelayedEncapsulationMessage.html#ad14c79ec74a1f98894655955c3717ed0">m_anMsg</a>[0]),</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;                  <a class="code" href="encap_8c.html#a102bf4b6fe8090576444643c487cd78a">g_stDelayedEncapsulationMessages</a>[i].<a class="code" href="structSDelayedEncapsulationMessage.html#a11418dbbd1800dcaa00db887bf1c5cb8">m_unMessageSize</a>);</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;              <a class="code" href="encap_8c.html#a102bf4b6fe8090576444643c487cd78a">g_stDelayedEncapsulationMessages</a>[i].<a class="code" href="structSDelayedEncapsulationMessage.html#ae5cb0fcf4bb3307b92e5b47894db8a4e">m_nSocket</a> = -1;</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;            }</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;        }</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    }</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;}</div>
<div class="ttc" id="typedefs_8h_html_adf0533b554c6a20e73928f231e5286d9"><div class="ttname"><a href="typedefs_8h.html#adf0533b554c6a20e73928f231e5286d9">EIP_STATUS</a></div><div class="ttdeci">EIP_STATUS</div><div class="ttdef"><b>Definition:</b> <a href="typedefs_8h_source.html#l00103">typedefs.h:103</a></div></div>
<div class="ttc" id="typedefs_8h_html_adf0533b554c6a20e73928f231e5286d9af5f331897ee90f67ca0c2b332ba93a28"><div class="ttname"><a href="typedefs_8h.html#adf0533b554c6a20e73928f231e5286d9af5f331897ee90f67ca0c2b332ba93a28">EIP_OK_SEND</a></div><div class="ttdef"><b>Definition:</b> <a href="typedefs_8h_source.html#l00106">typedefs.h:106</a></div></div>
<div class="ttc" id="encap_8h_html_a3adaab5278428ee74831f2b3bf6798fb"><div class="ttname"><a href="encap_8h.html#a3adaab5278428ee74831f2b3bf6798fb">OPENER_ENCAP_STATUS_INVALID_COMMAND</a></div><div class="ttdeci">#define OPENER_ENCAP_STATUS_INVALID_COMMAND</div><div class="ttdef"><b>Definition:</b> <a href="encap_8h_source.html#l00023">encap.h:23</a></div></div>
<div class="ttc" id="encap_8c_html_a622363b442e7e452daa79ef65dc54499"><div class="ttname"><a href="encap_8c.html#a622363b442e7e452daa79ef65dc54499">SUPPORTED_OPTIONS_MASK</a></div><div class="ttdeci">#define SUPPORTED_OPTIONS_MASK</div><div class="ttdef"><b>Definition:</b> <a href="encap_8c_source.html#l00035">encap.c:35</a></div></div>
<div class="ttc" id="opener__api_8h_html"><div class="ttname"><a href="opener__api_8h.html">opener_api.h</a></div></div>
<div class="ttc" id="encap_8c_html_a14527c419c89e7d55210374e4cfb78a2"><div class="ttname"><a href="encap_8c.html#a14527c419c89e7d55210374e4cfb78a2">COMMAND_LISTINTERFACES</a></div><div class="ttdeci">#define COMMAND_LISTINTERFACES</div><div class="ttdef"><b>Definition:</b> <a href="encap_8c_source.html#l00047">encap.c:47</a></div></div>
<div class="ttc" id="typedefs_8h_html_a811fdad4b361d09293f3bd0b814b8e18"><div class="ttname"><a href="typedefs_8h.html#a811fdad4b361d09293f3bd0b814b8e18">EIP_UINT8</a></div><div class="ttdeci">#define EIP_UINT8</div><div class="ttdef"><b>Definition:</b> <a href="typedefs_8h_source.html#l00067">typedefs.h:67</a></div></div>
<div class="ttc" id="encap_8c_html_a04f64e9b1e0897958cc336cbf3366d18"><div class="ttname"><a href="encap_8c.html#a04f64e9b1e0897958cc336cbf3366d18">DeviceType</a></div><div class="ttdeci">EIP_UINT16 DeviceType</div><div class="ttdef"><b>Definition:</b> <a href="cipidentity_8c_source.html#l00039">cipidentity.c:39</a></div></div>
<div class="ttc" id="cipcommon_8h_html"><div class="ttname"><a href="cipcommon_8h.html">cipcommon.h</a></div></div>
<div class="ttc" id="structCIPTCPIPNetworkInterfaceConfiguration_html"><div class="ttname"><a href="structCIPTCPIPNetworkInterfaceConfiguration.html">CIPTCPIPNetworkInterfaceConfiguration</a></div><div class="ttdef"><b>Definition:</b> <a href="ciptypes_8h_source.html#l00344">ciptypes.h:344</a></div></div>
<div class="ttc" id="encap_8c_html_adadf7d46d3b140b2939889e41c76952a"><div class="ttname"><a href="encap_8c.html#adadf7d46d3b140b2939889e41c76952a">handleReceivedRegisterSessionCmd</a></div><div class="ttdeci">void handleReceivedRegisterSessionCmd(int pa_nSockfd, struct S_Encapsulation_Data *pa_stReceiveData)</div><div class="ttdef"><b>Definition:</b> <a href="encap_8c_source.html#l00451">encap.c:451</a></div></div>
<div class="ttc" id="encap_8c_html_a25122df9eaa3cb4b33a7d386bec5ed84"><div class="ttname"><a href="encap_8c.html#a25122df9eaa3cb4b33a7d386bec5ed84">g_stInterfaceInformation</a></div><div class="ttdeci">struct S_Encapsulation_Interface_Information g_stInterfaceInformation</div><div class="ttdef"><b>Definition:</b> <a href="encap_8c_source.html#l00072">encap.c:72</a></div></div>
<div class="ttc" id="encap_8c_html_a82911003e9d79444b031ffb8cf1ab1cc"><div class="ttname"><a href="encap_8c.html#a82911003e9d79444b031ffb8cf1ab1cc">SUPPORT_CIP_TCP</a></div><div class="ttdeci">#define SUPPORT_CIP_TCP</div><div class="ttdef"><b>Definition:</b> <a href="encap_8c_source.html#l00054">encap.c:54</a></div></div>
<div class="ttc" id="structS__Encapsulation__Interface__Information_html_a6d2dcde21bd1b1d7a14a6a8fad1cc143"><div class="ttname"><a href="structS__Encapsulation__Interface__Information.html#a6d2dcde21bd1b1d7a14a6a8fad1cc143">S_Encapsulation_Interface_Information::TypeCode</a></div><div class="ttdeci">EIP_UINT16 TypeCode</div><div class="ttdef"><b>Definition:</b> <a href="encap_8h_source.html#l00047">encap.h:47</a></div></div>
<div class="ttc" id="group__ENCAP_html_ga52899252b48f864da5b3f107a110a785"><div class="ttname"><a href="group__ENCAP.html#ga52899252b48f864da5b3f107a110a785">manageEncapsulationMessages</a></div><div class="ttdeci">void manageEncapsulationMessages()</div><div class="ttdoc">Handle delayed encapsulation message responses. </div><div class="ttdef"><b>Definition:</b> <a href="encap_8c_source.html#l00722">encap.c:722</a></div></div>
<div class="ttc" id="structCIPShortString_html"><div class="ttname"><a href="structCIPShortString.html">CIPShortString</a></div><div class="ttdef"><b>Definition:</b> <a href="ciptypes_8h_source.html#l00226">ciptypes.h:226</a></div></div>
<div class="ttc" id="structCIPRevision_html"><div class="ttname"><a href="structCIPRevision.html">CIPRevision</a></div><div class="ttdef"><b>Definition:</b> <a href="ciptypes_8h_source.html#l00259">ciptypes.h:259</a></div></div>
<div class="ttc" id="structCIPTCPIPNetworkInterfaceConfiguration_html_a4fdee1a1e331e9b170cc517b4334e78b"><div class="ttname"><a href="structCIPTCPIPNetworkInterfaceConfiguration.html#a4fdee1a1e331e9b170cc517b4334e78b">CIPTCPIPNetworkInterfaceConfiguration::IPAddress</a></div><div class="ttdeci">EIP_UINT32 IPAddress</div><div class="ttdef"><b>Definition:</b> <a href="ciptypes_8h_source.html#l00345">ciptypes.h:345</a></div></div>
<div class="ttc" id="structS__Encapsulation__Data_html"><div class="ttname"><a href="structS__Encapsulation__Data.html">S_Encapsulation_Data</a></div><div class="ttdef"><b>Definition:</b> <a href="encap_8h_source.html#l00032">encap.h:32</a></div></div>
<div class="ttc" id="structS__Encapsulation__Data_html_a27d6de31606c902e75b7788cc6398605"><div class="ttname"><a href="structS__Encapsulation__Data.html#a27d6de31606c902e75b7788cc6398605">S_Encapsulation_Data::nStatus</a></div><div class="ttdeci">EIP_UINT32 nStatus</div><div class="ttdef"><b>Definition:</b> <a href="encap_8h_source.html#l00037">encap.h:37</a></div></div>
<div class="ttc" id="structSDelayedEncapsulationMessage_html_a11418dbbd1800dcaa00db887bf1c5cb8"><div class="ttname"><a href="structSDelayedEncapsulationMessage.html#a11418dbbd1800dcaa00db887bf1c5cb8">SDelayedEncapsulationMessage::m_unMessageSize</a></div><div class="ttdeci">unsigned int m_unMessageSize</div><div class="ttdef"><b>Definition:</b> <a href="encap_8c_source.html#l00069">encap.c:69</a></div></div>
<div class="ttc" id="structS__Encapsulation__Data_html_ab0ab5d550e17157f39ce50755e68183b"><div class="ttname"><a href="structS__Encapsulation__Data.html#ab0ab5d550e17157f39ce50755e68183b">S_Encapsulation_Data::m_acCurrentCommBufferPos</a></div><div class="ttdeci">EIP_UINT8 * m_acCurrentCommBufferPos</div><div class="ttdef"><b>Definition:</b> <a href="encap_8h_source.html#l00042">encap.h:42</a></div></div>
<div class="ttc" id="LM3S8962_2sample__application_2opener__user__conf_8h_html_a72f913dfb4303ff1c1e6897b6a121a01"><div class="ttname"><a href="LM3S8962_2sample__application_2opener__user__conf_8h.html#a72f913dfb4303ff1c1e6897b6a121a01">OPENER_TIMER_TICK</a></div><div class="ttdeci">#define OPENER_TIMER_TICK</div><div class="ttdef"><b>Definition:</b> <a href="LM3S8962_2sample__application_2opener__user__conf_8h_source.html#l00118">opener_user_conf.h:118</a></div></div>
<div class="ttc" id="encap_8c_html_a12d1ddd538779992a993351fa587b9e0"><div class="ttname"><a href="encap_8c.html#a12d1ddd538779992a993351fa587b9e0">INVALID_SESSION</a></div><div class="ttdeci">#define INVALID_SESSION</div><div class="ttdef"><b>Definition:</b> <a href="encap_8c_source.html#l00039">encap.c:39</a></div></div>
<div class="ttc" id="structS__Encapsulation__Data_html_a2513351dd1aebbcbbd2dd24fe27cff5b"><div class="ttname"><a href="structS__Encapsulation__Data.html#a2513351dd1aebbcbbd2dd24fe27cff5b">S_Encapsulation_Data::m_acCommBufferStart</a></div><div class="ttdeci">EIP_UINT8 * m_acCommBufferStart</div><div class="ttdef"><b>Definition:</b> <a href="encap_8h_source.html#l00041">encap.h:41</a></div></div>
<div class="ttc" id="encap_8c_html_a1c8ff172e0cba5fcdb26f7b06b86bb8a"><div class="ttname"><a href="encap_8c.html#a1c8ff172e0cba5fcdb26f7b06b86bb8a">COMMAND_NOP</a></div><div class="ttdeci">#define COMMAND_NOP</div><div class="ttdef"><b>Definition:</b> <a href="encap_8c_source.html#l00044">encap.c:44</a></div></div>
<div class="ttc" id="cpf_8h_html"><div class="ttname"><a href="cpf_8h.html">cpf.h</a></div></div>
<div class="ttc" id="structS__Encapsulation__Interface__Information_html_a79924fd06ee0dea3b1031baf79c6677f"><div class="ttname"><a href="structS__Encapsulation__Interface__Information.html#a79924fd06ee0dea3b1031baf79c6677f">S_Encapsulation_Interface_Information::CapabilityFlags</a></div><div class="ttdeci">EIP_UINT16 CapabilityFlags</div><div class="ttdef"><b>Definition:</b> <a href="encap_8h_source.html#l00050">encap.h:50</a></div></div>
<div class="ttc" id="encap_8c_html_aab7e6a84250ddb749a082ae4e69c5034"><div class="ttname"><a href="encap_8c.html#aab7e6a84250ddb749a082ae4e69c5034">getFreeSessionIndex</a></div><div class="ttdeci">int getFreeSessionIndex(void)</div><div class="ttdef"><b>Definition:</b> <a href="encap_8c_source.html#l00629">encap.c:629</a></div></div>
<div class="ttc" id="encap_8c_html_a2d38b4e49b5b3ac0c85931d3bcf621b8"><div class="ttname"><a href="encap_8c.html#a2d38b4e49b5b3ac0c85931d3bcf621b8">SUPPORTED_PROTOCOL_VERSION</a></div><div class="ttdeci">#define SUPPORTED_PROTOCOL_VERSION</div><div class="ttdef"><b>Definition:</b> <a href="encap_8c_source.html#l00033">encap.c:33</a></div></div>
<div class="ttc" id="structsockaddr__in_html"><div class="ttname"><a href="structsockaddr__in.html">sockaddr_in</a></div><div class="ttdef"><b>Definition:</b> <a href="LM3S8962_2sample__application_2opener__user__conf_8h_source.html#l00030">opener_user_conf.h:30</a></div></div>
<div class="ttc" id="encap_8c_html_a8f6e6fa53ccedfdc82e7a84170421772"><div class="ttname"><a href="encap_8c.html#a8f6e6fa53ccedfdc82e7a84170421772">determineDelayTime</a></div><div class="ttdeci">void determineDelayTime(EIP_BYTE *pa_acBufferStart, struct SDelayedEncapsulationMessage *pa_pstDelayedMessageBuffer)</div><div class="ttdef"><b>Definition:</b> <a href="encap_8c_source.html#l00419">encap.c:419</a></div></div>
<div class="ttc" id="endianconv_8h_html"><div class="ttname"><a href="endianconv_8h.html">endianconv.h</a></div></div>
<div class="ttc" id="group__CIP__API_html_gaabf704af111d213b94f459b8a34c7886"><div class="ttname"><a href="group__CIP__API.html#gaabf704af111d213b94f459b8a34c7886">closeSession</a></div><div class="ttdeci">void closeSession(int pa_nSocket)</div><div class="ttdoc">Inform the encapsulation layer that the remote host has closed the connection. </div><div class="ttdef"><b>Definition:</b> <a href="encap_8c_source.html#l00693">encap.c:693</a></div></div>
<div class="ttc" id="encap_8c_html_a39e9e92bf22bcf3708518f4aeac70132"><div class="ttname"><a href="encap_8c.html#a39e9e92bf22bcf3708518f4aeac70132">Revison</a></div><div class="ttdeci">S_CIP_Revision Revison</div><div class="ttdef"><b>Definition:</b> <a href="cipidentity_8c_source.html#l00041">cipidentity.c:41</a></div></div>
<div class="ttc" id="structS__Encapsulation__Data_html_a65f59c3cb2abdb15ef78201282080f4c"><div class="ttname"><a href="structS__Encapsulation__Data.html#a65f59c3cb2abdb15ef78201282080f4c">S_Encapsulation_Data::nOptions</a></div><div class="ttdeci">EIP_UINT32 nOptions</div><div class="ttdef"><b>Definition:</b> <a href="encap_8h_source.html#l00040">encap.h:40</a></div></div>
<div class="ttc" id="encap_8c_html_abfbc79b89f57d02418c75dbe0961b9cd"><div class="ttname"><a href="encap_8c.html#abfbc79b89f57d02418c75dbe0961b9cd">ProductName</a></div><div class="ttdeci">S_CIP_Short_String ProductName</div><div class="ttdef"><b>Definition:</b> <a href="cipidentity_8c_source.html#l00045">cipidentity.c:45</a></div></div>
<div class="ttc" id="typedefs_8h_html_ace23313ab660889d73718853b644405e"><div class="ttname"><a href="typedefs_8h.html#ace23313ab660889d73718853b644405e">EIP_INVALID_SOCKET</a></div><div class="ttdeci">#define EIP_INVALID_SOCKET</div><div class="ttdef"><b>Definition:</b> <a href="typedefs_8h_source.html#l00082">typedefs.h:82</a></div></div>
<div class="ttc" id="typedefs_8h_html_a72b3e7231681538d97279aa001872297"><div class="ttname"><a href="typedefs_8h.html#a72b3e7231681538d97279aa001872297">EIP_UINT16</a></div><div class="ttdeci">#define EIP_UINT16</div><div class="ttdef"><b>Definition:</b> <a href="typedefs_8h_source.html#l00068">typedefs.h:68</a></div></div>
<div class="ttc" id="encap_8c_html_a052f9fa1f65ae3d212201184a1022129"><div class="ttname"><a href="encap_8c.html#a052f9fa1f65ae3d212201184a1022129">COMMAND_LISTSERVICES</a></div><div class="ttdeci">#define COMMAND_LISTSERVICES</div><div class="ttdef"><b>Definition:</b> <a href="encap_8c_source.html#l00045">encap.c:45</a></div></div>
<div class="ttc" id="encap_8c_html_a6c6fcdf7201b77d91fcafd3fa1b89b4c"><div class="ttname"><a href="encap_8c.html#a6c6fcdf7201b77d91fcafd3fa1b89b4c">handleReceivedListIdentityCmdUDP</a></div><div class="ttdeci">void handleReceivedListIdentityCmdUDP(int pa_nSocket, struct sockaddr_in *pa_pstFromAddr, struct S_Encapsulation_Data *pa_stReceiveData)</div><div class="ttdef"><b>Definition:</b> <a href="encap_8c_source.html#l00341">encap.c:341</a></div></div>
<div class="ttc" id="encap_8c_html_a41a000c4d1d14e4d29855d6fe6dd64cb"><div class="ttname"><a href="encap_8c.html#a41a000c4d1d14e4d29855d6fe6dd64cb">createEncapsulationStructure</a></div><div class="ttdeci">EIP_INT16 createEncapsulationStructure(EIP_UINT8 *buf, int length, struct S_Encapsulation_Data *pa_S_ReceiveData)</div><div class="ttdef"><b>Definition:</b> <a href="encap_8c_source.html#l00651">encap.c:651</a></div></div>
<div class="ttc" id="encap_8c_html_ab6e6f153f2d21968b71362a7b0af6240"><div class="ttname"><a href="encap_8c.html#ab6e6f153f2d21968b71362a7b0af6240">VendorID</a></div><div class="ttdeci">EIP_UINT16 VendorID</div><div class="ttdef"><b>Definition:</b> <a href="cipidentity_8c_source.html#l00038">cipidentity.c:38</a></div></div>
<div class="ttc" id="typedefs_8h_html_a824c4bdde2e6a43bc9c58b5d2f0c034e"><div class="ttname"><a href="typedefs_8h.html#a824c4bdde2e6a43bc9c58b5d2f0c034e">EIP_INT16</a></div><div class="ttdeci">#define EIP_INT16</div><div class="ttdef"><b>Definition:</b> <a href="typedefs_8h_source.html#l00065">typedefs.h:65</a></div></div>
<div class="ttc" id="encap_8h_html_aaf79502425742f6c026a16b48308e545"><div class="ttname"><a href="encap_8h.html#aaf79502425742f6c026a16b48308e545">OPENER_ENCAP_STATUS_INVALID_SESSION_HANDLE</a></div><div class="ttdeci">#define OPENER_ENCAP_STATUS_INVALID_SESSION_HANDLE</div><div class="ttdef"><b>Definition:</b> <a href="encap_8h_source.html#l00026">encap.h:26</a></div></div>
<div class="ttc" id="structS__Encapsulation__Interface__Information_html_aad1250b418aad7ab3da300144dfb1824"><div class="ttname"><a href="structS__Encapsulation__Interface__Information.html#aad1250b418aad7ab3da300144dfb1824">S_Encapsulation_Interface_Information::EncapsulationProtocolVersion</a></div><div class="ttdeci">EIP_UINT16 EncapsulationProtocolVersion</div><div class="ttdef"><b>Definition:</b> <a href="encap_8h_source.html#l00049">encap.h:49</a></div></div>
<div class="ttc" id="typedefs_8h_html_acbe46633947878fe03e883b04984523c"><div class="ttname"><a href="typedefs_8h.html#acbe46633947878fe03e883b04984523c">EIP_INT32</a></div><div class="ttdeci">#define EIP_INT32</div><div class="ttdef"><b>Definition:</b> <a href="typedefs_8h_source.html#l00066">typedefs.h:66</a></div></div>
<div class="ttc" id="structSDelayedEncapsulationMessage_html_ab9de1ca60a6cceae2286585f1836f0f4"><div class="ttname"><a href="structSDelayedEncapsulationMessage.html#ab9de1ca60a6cceae2286585f1836f0f4">SDelayedEncapsulationMessage::m_unTimeOut</a></div><div class="ttdeci">EIP_INT32 m_unTimeOut</div><div class="ttdef"><b>Definition:</b> <a href="encap_8c_source.html#l00065">encap.c:65</a></div></div>
<div class="ttc" id="structS__Encapsulation__Data_html_a645337ca30ea006ae396b27c81da8974"><div class="ttname"><a href="structS__Encapsulation__Data.html#a645337ca30ea006ae396b27c81da8974">S_Encapsulation_Data::nData_length</a></div><div class="ttdeci">EIP_UINT16 nData_length</div><div class="ttdef"><b>Definition:</b> <a href="encap_8h_source.html#l00035">encap.h:35</a></div></div>
<div class="ttc" id="encap_8c_html_a210e10925483a76e5828918993d33428"><div class="ttname"><a href="encap_8c.html#a210e10925483a76e5828918993d33428">handleReceivedUnregisterSessionCmd</a></div><div class="ttdeci">EIP_STATUS handleReceivedUnregisterSessionCmd(struct S_Encapsulation_Data *pa_stReceiveData)</div><div class="ttdef"><b>Definition:</b> <a href="encap_8c_source.html#l00513">encap.c:513</a></div></div>
<div class="ttc" id="typedefs_8h_html_a4f1d71ddb23827c1af144276d0dd1947"><div class="ttname"><a href="typedefs_8h.html#a4f1d71ddb23827c1af144276d0dd1947">EIP_UINT32</a></div><div class="ttdeci">#define EIP_UINT32</div><div class="ttdef"><b>Definition:</b> <a href="typedefs_8h_source.html#l00069">typedefs.h:69</a></div></div>
<div class="ttc" id="encap_8c_html_ae63911b8eb1290e8ded9bea8bb93d2fd"><div class="ttname"><a href="encap_8c.html#ae63911b8eb1290e8ded9bea8bb93d2fd">COMMAND_REGISTERSESSION</a></div><div class="ttdeci">#define COMMAND_REGISTERSESSION</div><div class="ttdef"><b>Definition:</b> <a href="encap_8c_source.html#l00048">encap.c:48</a></div></div>
<div class="ttc" id="encap_8c_html_aaa8bf1bf94c599bc4db8c2bb2f0531b3"><div class="ttname"><a href="encap_8c.html#aaa8bf1bf94c599bc4db8c2bb2f0531b3">ID_Status</a></div><div class="ttdeci">EIP_UINT16 ID_Status</div><div class="ttdef"><b>Definition:</b> <a href="cipidentity_8c_source.html#l00043">cipidentity.c:43</a></div></div>
<div class="ttc" id="group__ENCAP_html_ga23b3ee03c1cffe279bbf32f3d1d4a8a3"><div class="ttname"><a href="group__ENCAP.html#ga23b3ee03c1cffe279bbf32f3d1d4a8a3">encapShutDown</a></div><div class="ttdeci">void encapShutDown(void)</div><div class="ttdoc">Shutdown the encapsulation layer. </div><div class="ttdef"><b>Definition:</b> <a href="encap_8c_source.html#l00708">encap.c:708</a></div></div>
<div class="ttc" id="structSDelayedEncapsulationMessage_html_ad14c79ec74a1f98894655955c3717ed0"><div class="ttname"><a href="structSDelayedEncapsulationMessage.html#ad14c79ec74a1f98894655955c3717ed0">SDelayedEncapsulationMessage::m_anMsg</a></div><div class="ttdeci">EIP_BYTE m_anMsg[ENCAP_MAX_DELAYED_ENCAP_MESSAGE_SIZE]</div><div class="ttdef"><b>Definition:</b> <a href="encap_8c_source.html#l00068">encap.c:68</a></div></div>
<div class="ttc" id="encap_8c_html_a687bc1b004e12fd67cc724da086ea1de"><div class="ttname"><a href="encap_8c.html#a687bc1b004e12fd67cc724da086ea1de">encapsulateListIdentyResponseMessage</a></div><div class="ttdeci">int encapsulateListIdentyResponseMessage(EIP_BYTE *pa_pacCommBuf)</div><div class="ttdef"><b>Definition:</b> <a href="encap_8c_source.html#l00381">encap.c:381</a></div></div>
<div class="ttc" id="group__ENCAP_html_ga4ac7387e49002d26462d7cdd094d238a"><div class="ttname"><a href="group__ENCAP.html#ga4ac7387e49002d26462d7cdd094d238a">ltohl</a></div><div class="ttdeci">EIP_UINT32 ltohl(EIP_UINT8 **pa_buf)</div><div class="ttdoc">Reads EIP_UINT32 from *pa_buf and converts little endian to host. </div><div class="ttdef"><b>Definition:</b> <a href="endianconv_8c_source.html#l00034">endianconv.c:34</a></div></div>
<div class="ttc" id="encap_8h_html_a53c3c5078f3974109b39e195fc31452d"><div class="ttname"><a href="encap_8h.html#a53c3c5078f3974109b39e195fc31452d">OPENER_ENCAP_STATUS_SUCCESS</a></div><div class="ttdeci">#define OPENER_ENCAP_STATUS_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="encap_8h_source.html#l00022">encap.h:22</a></div></div>
<div class="ttc" id="structCIPShortString_html_a116b283686264e1253bbf573eace8ede"><div class="ttname"><a href="structCIPShortString.html#a116b283686264e1253bbf573eace8ede">CIPShortString::Length</a></div><div class="ttdeci">EIP_UINT8 Length</div><div class="ttdef"><b>Definition:</b> <a href="ciptypes_8h_source.html#l00227">ciptypes.h:227</a></div></div>
<div class="ttc" id="encap_8c_html_a1426ca2396959f47ff5474905393e2f3"><div class="ttname"><a href="encap_8c.html#a1426ca2396959f47ff5474905393e2f3">SUPPORT_CIP_UDP_CLASS_0_OR_1</a></div><div class="ttdeci">#define SUPPORT_CIP_UDP_CLASS_0_OR_1</div><div class="ttdef"><b>Definition:</b> <a href="encap_8c_source.html#l00055">encap.c:55</a></div></div>
<div class="ttc" id="structSDelayedEncapsulationMessage_html_ae5cb0fcf4bb3307b92e5b47894db8a4e"><div class="ttname"><a href="structSDelayedEncapsulationMessage.html#ae5cb0fcf4bb3307b92e5b47894db8a4e">SDelayedEncapsulationMessage::m_nSocket</a></div><div class="ttdeci">int m_nSocket</div><div class="ttdef"><b>Definition:</b> <a href="encap_8c_source.html#l00066">encap.c:66</a></div></div>
<div class="ttc" id="encap_8c_html_abb7ffd35682c94bdc937f52890b3b4d3"><div class="ttname"><a href="encap_8c.html#abb7ffd35682c94bdc937f52890b3b4d3">anRegisteredSessions</a></div><div class="ttdeci">int anRegisteredSessions[OPENER_NUMBER_OF_SUPPORTED_SESSIONS]</div><div class="ttdef"><b>Definition:</b> <a href="encap_8c_source.html#l00074">encap.c:74</a></div></div>
<div class="ttc" id="LM3S8962_2networkhandler_8c_html_a166202be863ba2e99e6653d010ea4a6a"><div class="ttname"><a href="LM3S8962_2networkhandler_8c.html#a166202be863ba2e99e6653d010ea4a6a">IApp_CloseSocket_tcp</a></div><div class="ttdeci">void IApp_CloseSocket_tcp(int fd)</div><div class="ttdef"><b>Definition:</b> <a href="LM3S8962_2networkhandler_8c_source.html#l00418">networkhandler.c:418</a></div></div>
<div class="ttc" id="group__ENCAP_html_gac99d7cc31b4aec1f7454a5f1b6f56091"><div class="ttname"><a href="group__ENCAP.html#gac99d7cc31b4aec1f7454a5f1b6f56091">encapInit</a></div><div class="ttdeci">void encapInit(void)</div><div class="ttdoc">Initialize the encapsulation layer. </div><div class="ttdef"><b>Definition:</b> <a href="encap_8c_source.html#l00125">encap.c:125</a></div></div>
<div class="ttc" id="encap_8c_html_a0099080d916fa573196c16582fec7ecd"><div class="ttname"><a href="encap_8c.html#a0099080d916fa573196c16582fec7ecd">checkRegisteredSessions</a></div><div class="ttdeci">EIP_STATUS checkRegisteredSessions(struct S_Encapsulation_Data *pa_S_ReceiveData)</div><div class="ttdef"><b>Definition:</b> <a href="encap_8c_source.html#l00675">encap.c:675</a></div></div>
<div class="ttc" id="group__ENCAP_html_gaae831feae33de32fc7ea4ba1a1f9cc74"><div class="ttname"><a href="group__ENCAP.html#gaae831feae33de32fc7ea4ba1a1f9cc74">notifyCPF</a></div><div class="ttdeci">int notifyCPF(struct S_Encapsulation_Data *pa_stReceiveData, EIP_UINT8 *pa_acReplyBuf)</div><div class="ttdef"><b>Definition:</b> <a href="cpf_8c_source.html#l00020">cpf.c:20</a></div></div>
<div class="ttc" id="encap_8c_html_ac8f21143d6f4be9ea83079a9e77677d1"><div class="ttname"><a href="encap_8c.html#ac8f21143d6f4be9ea83079a9e77677d1">ENCAPSULATION_HEADER_SESSION_HANDLE_POS</a></div><div class="ttdeci">#define ENCAPSULATION_HEADER_SESSION_HANDLE_POS</div><div class="ttdef"><b>Definition:</b> <a href="encap_8c_source.html#l00037">encap.c:37</a></div></div>
<div class="ttc" id="encap_8h_html_a0cf1ae244dc06fbeb57c5818e78754b7"><div class="ttname"><a href="encap_8h.html#a0cf1ae244dc06fbeb57c5818e78754b7">OPENER_ETHERNET_PORT</a></div><div class="ttdeci">#define OPENER_ETHERNET_PORT</div><div class="ttdef"><b>Definition:</b> <a href="encap_8h_source.html#l00019">encap.h:19</a></div></div>
<div class="ttc" id="encap_8c_html_aa0c1743405c3991d57da22b83b6394e0"><div class="ttname"><a href="encap_8c.html#aa0c1743405c3991d57da22b83b6394e0">handleReceivedListIdentityCmdTCP</a></div><div class="ttdeci">void handleReceivedListIdentityCmdTCP(struct S_Encapsulation_Data *pa_stReceiveData)</div><div class="ttdef"><b>Definition:</b> <a href="encap_8c_source.html#l00334">encap.c:334</a></div></div>
<div class="ttc" id="encap_8c_html_a9eff9d73b7c06fa8e8183ee390306266"><div class="ttname"><a href="encap_8c.html#a9eff9d73b7c06fa8e8183ee390306266">handleReceivedListInterfacesCmd</a></div><div class="ttdeci">void handleReceivedListInterfacesCmd(struct S_Encapsulation_Data *pa_stReceiveData)</div><div class="ttdef"><b>Definition:</b> <a href="encap_8c_source.html#l00326">encap.c:326</a></div></div>
<div class="ttc" id="encap_8c_html_ad57df5dc2f859a02fc2dab3773c5ceab"><div class="ttname"><a href="encap_8c.html#ad57df5dc2f859a02fc2dab3773c5ceab">SerialNumber</a></div><div class="ttdeci">EIP_UINT32 SerialNumber</div><div class="ttdef"><b>Definition:</b> <a href="cipidentity_8c_source.html#l00044">cipidentity.c:44</a></div></div>
<div class="ttc" id="structS__Encapsulation__Data_html_ad606ae7f7dc984327de018b3f71b7770"><div class="ttname"><a href="structS__Encapsulation__Data.html#ad606ae7f7dc984327de018b3f71b7770">S_Encapsulation_Data::nCommand_code</a></div><div class="ttdeci">EIP_UINT16 nCommand_code</div><div class="ttdef"><b>Definition:</b> <a href="encap_8h_source.html#l00034">encap.h:34</a></div></div>
<div class="ttc" id="encap_8h_html_a89dc73a9be3e075d9612ab6f4ab6afe5"><div class="ttname"><a href="encap_8h.html#a89dc73a9be3e075d9612ab6f4ab6afe5">ENCAPSULATION_HEADER_LENGTH</a></div><div class="ttdeci">#define ENCAPSULATION_HEADER_LENGTH</div><div class="ttdef"><b>Definition:</b> <a href="encap_8h_source.html#l00018">encap.h:18</a></div></div>
<div class="ttc" id="encap_8c_html_ac310f4fd2bad17d663dded4094d041c9"><div class="ttname"><a href="encap_8c.html#ac310f4fd2bad17d663dded4094d041c9">encapsulate_data</a></div><div class="ttdeci">int encapsulate_data(struct S_Encapsulation_Data *pa_S_SendData)</div><div class="ttdef"><b>Definition:</b> <a href="encap_8c_source.html#l00286">encap.c:286</a></div></div>
<div class="ttc" id="cipidentity_8h_html"><div class="ttname"><a href="cipidentity_8h.html">cipidentity.h</a></div></div>
<div class="ttc" id="encap_8c_html_a298bf8dd05ad3a16cf15f5b96d8499c7"><div class="ttname"><a href="encap_8c.html#a298bf8dd05ad3a16cf15f5b96d8499c7">ProductCode</a></div><div class="ttdeci">EIP_UINT16 ProductCode</div><div class="ttdef"><b>Definition:</b> <a href="cipidentity_8c_source.html#l00040">cipidentity.c:40</a></div></div>
<div class="ttc" id="encap_8h_html_a6d3b35cb7d1fdb8734e473c146bdd54e"><div class="ttname"><a href="encap_8h.html#a6d3b35cb7d1fdb8734e473c146bdd54e">OPENER_ENCAP_STATUS_UNSUPPORTED_PROTOCOL</a></div><div class="ttdeci">#define OPENER_ENCAP_STATUS_UNSUPPORTED_PROTOCOL</div><div class="ttdef"><b>Definition:</b> <a href="encap_8h_source.html#l00028">encap.h:28</a></div></div>
<div class="ttc" id="encap_8c_html_a16f520a54eb1c9fb635985bfc123aa8c"><div class="ttname"><a href="encap_8c.html#a16f520a54eb1c9fb635985bfc123aa8c">ENCAP_MAX_DELAYED_ENCAP_MESSAGE_SIZE</a></div><div class="ttdeci">#define ENCAP_MAX_DELAYED_ENCAP_MESSAGE_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="encap_8c_source.html#l00059">encap.c:59</a></div></div>
<div class="ttc" id="typedefs_8h_html_adf0533b554c6a20e73928f231e5286d9aa2593a8a4cbf4566ee6f68f16e5115a6"><div class="ttname"><a href="typedefs_8h.html#adf0533b554c6a20e73928f231e5286d9aa2593a8a4cbf4566ee6f68f16e5115a6">EIP_ERROR</a></div><div class="ttdef"><b>Definition:</b> <a href="typedefs_8h_source.html#l00107">typedefs.h:107</a></div></div>
<div class="ttc" id="group__CIP__API_html_gac85a5ca9d67df6eaa87338ebd9c5c6ca"><div class="ttname"><a href="group__CIP__API.html#gac85a5ca9d67df6eaa87338ebd9c5c6ca">handleReceivedExplictUDPData</a></div><div class="ttdeci">int handleReceivedExplictUDPData(int pa_socket, struct sockaddr_in *pa_pstFromAddr, EIP_UINT8 *pa_buf, unsigned int pa_length, int *pa_nRemainingBytes)</div><div class="ttdoc">Notify the encapsulation layer that an explicit message has been received via UDP. </div><div class="ttdef"><b>Definition:</b> <a href="encap_8c_source.html#l00228">encap.c:228</a></div></div>
<div class="ttc" id="encap_8c_html_acee359becef6eab64950b6ba9944cf8b"><div class="ttname"><a href="encap_8c.html#acee359becef6eab64950b6ba9944cf8b">COMMAND_SENDUNITDATA</a></div><div class="ttdeci">#define COMMAND_SENDUNITDATA</div><div class="ttdef"><b>Definition:</b> <a href="encap_8c_source.html#l00051">encap.c:51</a></div></div>
<div class="ttc" id="structCIPShortString_html_a73c01848ef6ede78f575cbd3e56dfa34"><div class="ttname"><a href="structCIPShortString.html#a73c01848ef6ede78f575cbd3e56dfa34">CIPShortString::String</a></div><div class="ttdeci">EIP_BYTE * String</div><div class="ttdef"><b>Definition:</b> <a href="ciptypes_8h_source.html#l00228">ciptypes.h:228</a></div></div>
<div class="ttc" id="cipconnectionmanager_8h_html"><div class="ttname"><a href="cipconnectionmanager_8h.html">cipconnectionmanager.h</a></div></div>
<div class="ttc" id="typedefs_8h_html_adf0533b554c6a20e73928f231e5286d9ac471acf92535c32126cd4d318f8175ef"><div class="ttname"><a href="typedefs_8h.html#adf0533b554c6a20e73928f231e5286d9ac471acf92535c32126cd4d318f8175ef">EIP_OK</a></div><div class="ttdef"><b>Definition:</b> <a href="typedefs_8h_source.html#l00105">typedefs.h:105</a></div></div>
<div class="ttc" id="structS__Encapsulation__Interface__Information_html"><div class="ttname"><a href="structS__Encapsulation__Interface__Information.html">S_Encapsulation_Interface_Information</a></div><div class="ttdef"><b>Definition:</b> <a href="encap_8h_source.html#l00045">encap.h:45</a></div></div>
<div class="ttc" id="encap_8c_html_a102bf4b6fe8090576444643c487cd78a"><div class="ttname"><a href="encap_8c.html#a102bf4b6fe8090576444643c487cd78a">g_stDelayedEncapsulationMessages</a></div><div class="ttdeci">struct SDelayedEncapsulationMessage g_stDelayedEncapsulationMessages[ENCAP_NUMBER_OF_SUPPORTED_DELAYED_ENCAP_MESSAGES]</div><div class="ttdef"><b>Definition:</b> <a href="encap_8c_source.html#l00076">encap.c:76</a></div></div>
<div class="ttc" id="encap_8c_html_a36f3d3237aa73cd030e56277b4a042e2"><div class="ttname"><a href="encap_8c.html#a36f3d3237aa73cd030e56277b4a042e2">COMMAND_UNREGISTERSESSION</a></div><div class="ttdeci">#define COMMAND_UNREGISTERSESSION</div><div class="ttdef"><b>Definition:</b> <a href="encap_8c_source.html#l00049">encap.c:49</a></div></div>
<div class="ttc" id="group__CIP__API_html_ga500c1fe8838de5ff32f25d8ad6958289"><div class="ttname"><a href="group__CIP__API.html#ga500c1fe8838de5ff32f25d8ad6958289">handleReceivedExplictTCPData</a></div><div class="ttdeci">int handleReceivedExplictTCPData(int pa_socket, EIP_UINT8 *pa_buf, unsigned int pa_length, int *pa_nRemainingBytes)</div><div class="ttdoc">Notify the encapsulation layer that an explicit message has been received via TCP. </div><div class="ttdef"><b>Definition:</b> <a href="encap_8c_source.html#l00157">encap.c:157</a></div></div>
<div class="ttc" id="LM3S8962_2sample__application_2opener__user__conf_8h_html_a8d73780f7a1f5d9977d7388ebfbe1f93"><div class="ttname"><a href="LM3S8962_2sample__application_2opener__user__conf_8h.html#a8d73780f7a1f5d9977d7388ebfbe1f93">OPENER_NUMBER_OF_SUPPORTED_SESSIONS</a></div><div class="ttdeci">#define OPENER_NUMBER_OF_SUPPORTED_SESSIONS</div><div class="ttdef"><b>Definition:</b> <a href="LM3S8962_2sample__application_2opener__user__conf_8h_source.html#l00114">opener_user_conf.h:114</a></div></div>
<div class="ttc" id="encap_8c_html_a5b3259751a6bf74cbfdd3fb83a9263e7"><div class="ttname"><a href="encap_8c.html#a5b3259751a6bf74cbfdd3fb83a9263e7">handleReceivedListServicesCmd</a></div><div class="ttdeci">void handleReceivedListServicesCmd(struct S_Encapsulation_Data *pa_stReceiveData)</div><div class="ttdef"><b>Definition:</b> <a href="encap_8c_source.html#l00309">encap.c:309</a></div></div>
<div class="ttc" id="encap_8c_html_a4bdfd59456b03601ed310cae2d4bf733"><div class="ttname"><a href="encap_8c.html#a4bdfd59456b03601ed310cae2d4bf733">SENDER_CONTEXT_SIZE</a></div><div class="ttdeci">#define SENDER_CONTEXT_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="encap_8c_source.html#l00041">encap.c:41</a></div></div>
<div class="ttc" id="structCIPRevision_html_ac5b66e4f3983ce0e1c36723b2e08ec52"><div class="ttname"><a href="structCIPRevision.html#ac5b66e4f3983ce0e1c36723b2e08ec52">CIPRevision::MajorRevision</a></div><div class="ttdeci">EIP_UINT8 MajorRevision</div><div class="ttdef"><b>Definition:</b> <a href="ciptypes_8h_source.html#l00260">ciptypes.h:260</a></div></div>
<div class="ttc" id="encap_8c_html_a49f746b3f514de8a1ae8551af75d4e67"><div class="ttname"><a href="encap_8c.html#a49f746b3f514de8a1ae8551af75d4e67">ITEM_ID_LISTIDENTITY</a></div><div class="ttdeci">#define ITEM_ID_LISTIDENTITY</div><div class="ttdef"><b>Definition:</b> <a href="encap_8c_source.html#l00031">encap.c:31</a></div></div>
<div class="ttc" id="cipmessagerouter_8h_html"><div class="ttname"><a href="cipmessagerouter_8h.html">cipmessagerouter.h</a></div></div>
<div class="ttc" id="encap_8h_html"><div class="ttname"><a href="encap_8h.html">encap.h</a></div></div>
<div class="ttc" id="group__ENCAP_html_ga738d386bb3919d75bb14dcb40ca5389f"><div class="ttname"><a href="group__ENCAP.html#ga738d386bb3919d75bb14dcb40ca5389f">htols</a></div><div class="ttdeci">void htols(EIP_UINT16 data, EIP_UINT8 **pa_buf)</div><div class="ttdoc">converts UINT16 data from host to little endian an writes it to pa_buf. </div><div class="ttdef"><b>Definition:</b> <a href="endianconv_8c_source.html#l00048">endianconv.c:48</a></div></div>
<div class="ttc" id="group__ENCAP_html_ga6ce01de4023c01608d2bdfdb584d59d3"><div class="ttname"><a href="group__ENCAP.html#ga6ce01de4023c01608d2bdfdb584d59d3">ltohs</a></div><div class="ttdeci">EIP_UINT16 ltohs(EIP_UINT8 **pa_buf)</div><div class="ttdoc">Reads EIP_UINT16 from *pa_buf and converts little endian to host. </div><div class="ttdef"><b>Definition:</b> <a href="endianconv_8c_source.html#l00020">endianconv.c:20</a></div></div>
<div class="ttc" id="structS__Encapsulation__Data_html_a45a3e9d89c34f8776e0e25138110a647"><div class="ttname"><a href="structS__Encapsulation__Data.html#a45a3e9d89c34f8776e0e25138110a647">S_Encapsulation_Data::nSession_handle</a></div><div class="ttdeci">EIP_UINT32 nSession_handle</div><div class="ttdef"><b>Definition:</b> <a href="encap_8h_source.html#l00036">encap.h:36</a></div></div>
<div class="ttc" id="encap_8c_html_aba848fec29c4e01df56756077e6a777b"><div class="ttname"><a href="encap_8c.html#aba848fec29c4e01df56756077e6a777b">ENCAP_NUMBER_OF_SUPPORTED_DELAYED_ENCAP_MESSAGES</a></div><div class="ttdeci">#define ENCAP_NUMBER_OF_SUPPORTED_DELAYED_ENCAP_MESSAGES</div><div class="ttdef"><b>Definition:</b> <a href="encap_8c_source.html#l00057">encap.c:57</a></div></div>
<div class="ttc" id="endianconv_8c_html_a225c23a7ed872cd5a5d52c2e90870a83"><div class="ttname"><a href="endianconv_8c.html#a225c23a7ed872cd5a5d52c2e90870a83">determineEndianess</a></div><div class="ttdeci">void determineEndianess()</div><div class="ttdoc">Detects Endianess of the platform and sets global g_nOpENerPlatformEndianess variable accordingly...</div><div class="ttdef"><b>Definition:</b> <a href="endianconv_8c_source.html#l00203">endianconv.c:203</a></div></div>
<div class="ttc" id="group__CIP__CALLBACK__API_html_gabe8a4c7e971381f2ee46db5148aecf47"><div class="ttname"><a href="group__CIP__CALLBACK__API.html#gabe8a4c7e971381f2ee46db5148aecf47">IApp_SendUDPData</a></div><div class="ttdeci">EIP_STATUS IApp_SendUDPData(struct sockaddr_in *pa_pstAddr, int pa_nSockFd, EIP_UINT8 *pa_acData, EIP_UINT16 pa_nDataLength)</div><div class="ttdoc">create a producing or consuming UDP socket </div><div class="ttdef"><b>Definition:</b> <a href="LM3S8962_2networkhandler_8c_source.html#l00345">networkhandler.c:345</a></div></div>
<div class="ttc" id="group__ENCAP_html_ga615e04583bae27d4b8590e7f13d95d43"><div class="ttname"><a href="group__ENCAP.html#ga615e04583bae27d4b8590e7f13d95d43">notifyConnectedCPF</a></div><div class="ttdeci">int notifyConnectedCPF(struct S_Encapsulation_Data *pa_stReceiveData, EIP_UINT8 *pa_acReplyBuf)</div><div class="ttdef"><b>Definition:</b> <a href="cpf_8c_source.html#l00064">cpf.c:64</a></div></div>
<div class="ttc" id="structSDelayedEncapsulationMessage_html_aa2386a00551dc494c30d7fb279d50abd"><div class="ttname"><a href="structSDelayedEncapsulationMessage.html#aa2386a00551dc494c30d7fb279d50abd">SDelayedEncapsulationMessage::m_stSendToAddr</a></div><div class="ttdeci">struct sockaddr_in m_stSendToAddr</div><div class="ttdef"><b>Definition:</b> <a href="encap_8c_source.html#l00067">encap.c:67</a></div></div>
<div class="ttc" id="structS__Encapsulation__Interface__Information_html_a48a98a01c5eb96aae35d8f928b8677cd"><div class="ttname"><a href="structS__Encapsulation__Interface__Information.html#a48a98a01c5eb96aae35d8f928b8677cd">S_Encapsulation_Interface_Information::NameofService</a></div><div class="ttdeci">EIP_INT8 NameofService[16]</div><div class="ttdef"><b>Definition:</b> <a href="encap_8h_source.html#l00051">encap.h:51</a></div></div>
<div class="ttc" id="encap_8h_html_aaa2c07b78bbe683fbe223c16a3cd8581"><div class="ttname"><a href="encap_8h.html#aaa2c07b78bbe683fbe223c16a3cd8581">OPENER_ENCAP_STATUS_INSUFFICIENT_MEM</a></div><div class="ttdeci">#define OPENER_ENCAP_STATUS_INSUFFICIENT_MEM</div><div class="ttdef"><b>Definition:</b> <a href="encap_8h_source.html#l00024">encap.h:24</a></div></div>
<div class="ttc" id="endianconv_8c_html_a684d251f2990c861c5ef813d6d1f205b"><div class="ttname"><a href="endianconv_8c.html#a684d251f2990c861c5ef813d6d1f205b">encapsulateIPAdress</a></div><div class="ttdeci">void encapsulateIPAdress(EIP_UINT16 pa_unPort, EIP_UINT32 pa_unAddr, EIP_BYTE *pa_acCommBuf)</div><div class="ttdoc">Encapsulates the IP address and port into the package. </div><div class="ttdef"><b>Definition:</b> <a href="endianconv_8c_source.html#l00129">endianconv.c:129</a></div></div>
<div class="ttc" id="typedefs_8h_html_affeec34c5c7e6af4e283dfe12d4301c9"><div class="ttname"><a href="typedefs_8h.html#affeec34c5c7e6af4e283dfe12d4301c9">EIP_BYTE</a></div><div class="ttdeci">#define EIP_BYTE</div><div class="ttdef"><b>Definition:</b> <a href="typedefs_8h_source.html#l00063">typedefs.h:63</a></div></div>
<div class="ttc" id="encap_8c_html_ad2ad634c2eb9f00f8c524ac7a2116cfc"><div class="ttname"><a href="encap_8c.html#ad2ad634c2eb9f00f8c524ac7a2116cfc">COMMAND_SENDRRDATA</a></div><div class="ttdeci">#define COMMAND_SENDRRDATA</div><div class="ttdef"><b>Definition:</b> <a href="encap_8c_source.html#l00050">encap.c:50</a></div></div>
<div class="ttc" id="encap_8c_html_aa2bc1514f02b7d5270201f96f540e412"><div class="ttname"><a href="encap_8c.html#aa2bc1514f02b7d5270201f96f540e412">handleReceivedSendRRDataCmd</a></div><div class="ttdeci">EIP_STATUS handleReceivedSendRRDataCmd(struct S_Encapsulation_Data *pa_stReceiveData)</div><div class="ttdef"><b>Definition:</b> <a href="encap_8c_source.html#l00586">encap.c:586</a></div></div>
<div class="ttc" id="encap_8c_html_a01aebef0d051005258f6b2dc64ace1c3"><div class="ttname"><a href="encap_8c.html#a01aebef0d051005258f6b2dc64ace1c3">Interface_Configuration</a></div><div class="ttdeci">S_CIP_TCPIPNetworkInterfaceConfiguration Interface_Configuration</div><div class="ttdef"><b>Definition:</b> <a href="ciptcpipinterface_8c_source.html#l00026">ciptcpipinterface.c:26</a></div></div>
<div class="ttc" id="structS__Encapsulation__Interface__Information_html_a43d6798b80f07b2b73ed77383de9d3e5"><div class="ttname"><a href="structS__Encapsulation__Interface__Information.html#a43d6798b80f07b2b73ed77383de9d3e5">S_Encapsulation_Interface_Information::Length</a></div><div class="ttdeci">EIP_UINT16 Length</div><div class="ttdef"><b>Definition:</b> <a href="encap_8h_source.html#l00048">encap.h:48</a></div></div>
<div class="ttc" id="encap_8c_html_a9dc9ebf33956f4e735c48736ad9f9045"><div class="ttname"><a href="encap_8c.html#a9dc9ebf33956f4e735c48736ad9f9045">handleReceivedSendUnitDataCmd</a></div><div class="ttdeci">EIP_STATUS handleReceivedSendUnitDataCmd(struct S_Encapsulation_Data *pa_stReceiveData)</div><div class="ttdef"><b>Definition:</b> <a href="encap_8c_source.html#l00542">encap.c:542</a></div></div>
<div class="ttc" id="cpf_8h_html_aea98449f1952e948f55fcec44cc74a80"><div class="ttname"><a href="cpf_8h.html#aea98449f1952e948f55fcec44cc74a80">CIP_ITEM_ID_LISTSERVICE_RESPONSE</a></div><div class="ttdeci">#define CIP_ITEM_ID_LISTSERVICE_RESPONSE</div><div class="ttdef"><b>Definition:</b> <a href="cpf_8h_source.html#l00028">cpf.h:28</a></div></div>
<div class="ttc" id="encap_8c_html_a899bf7f0083315953ae5dd3abcc72a69"><div class="ttname"><a href="encap_8c.html#a899bf7f0083315953ae5dd3abcc72a69">COMMAND_LISTIDENTITY</a></div><div class="ttdeci">#define COMMAND_LISTIDENTITY</div><div class="ttdef"><b>Definition:</b> <a href="encap_8c_source.html#l00046">encap.c:46</a></div></div>
<div class="ttc" id="group__ENCAP_html_gaa00e394da5cd80135cdab7d4f3d88819"><div class="ttname"><a href="group__ENCAP.html#gaa00e394da5cd80135cdab7d4f3d88819">htoll</a></div><div class="ttdeci">void htoll(EIP_UINT32 data, EIP_UINT8 **pa_buf)</div><div class="ttdoc">Converts UINT32 data from host to little endian and writes it to pa_buf. </div><div class="ttdef"><b>Definition:</b> <a href="endianconv_8c_source.html#l00063">endianconv.c:63</a></div></div>
<div class="ttc" id="structCIPRevision_html_a525ba6c68fed868ac8d047bb16f25dc6"><div class="ttname"><a href="structCIPRevision.html#a525ba6c68fed868ac8d047bb16f25dc6">CIPRevision::MinorRevision</a></div><div class="ttdeci">EIP_UINT8 MinorRevision</div><div class="ttdef"><b>Definition:</b> <a href="ciptypes_8h_source.html#l00261">ciptypes.h:261</a></div></div>
<div class="ttc" id="structSDelayedEncapsulationMessage_html"><div class="ttname"><a href="structSDelayedEncapsulationMessage.html">SDelayedEncapsulationMessage</a></div><div class="ttdef"><b>Definition:</b> <a href="encap_8c_source.html#l00063">encap.c:63</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_e9add8f8d9ae9673501eada5427ffe52.html">enet_encap</a></li><li class="navelem"><a class="el" href="encap_8c.html">encap.c</a></li>
    <li class="footer">Generated on Tue Oct 20 2015 10:08:25 for OpENer - Open Source EtherNet/IP(TM)  I/O Target Stack by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.9.1 </li>
  </ul>
</div>
</body>
</html>
